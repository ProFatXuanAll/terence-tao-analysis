\section{Continuity and connectedness}\label{sec:2.4}

\begin{defn}[Connected spaces]\label{2.4.1}
  Let \((X, d)\) be a metric space.
  We say that \(X\) is \emph{disconnected} iff there exist disjoint non-empty open sets \(V\) and \(W\) in \(X\) such that \(V \cup W = X\).
  (Equivalently, \(X\) is disconnected iff \(X\) contains a non-empty proper subset which is simultaneously closed and open, see \cref{1.2.15}(e).)
  We say that \(X\) is \emph{connected} iff it is non-empty and not disconnected.
\end{defn}

\begin{note}
  We declare the empty set \(\emptyset\) as being special
  - it is neither connected nor disconnected;
  one could think of the empty set as ``unconnected''.
\end{note}

\setcounter{thm}{2}
\begin{defn}[Connected sets]\label{2.4.3}
  Let \((X, d)\) be a metric space, and let \(Y\) be a subset of \(X\).
  We say that \(Y\) is \emph{connected} iff the metric space \((Y, d|_{Y \times Y})\) is connected, and we say that \(Y\) is \emph{disconnected} iff the metric space \((Y, d|_{Y \times Y})\) is disconnected.
\end{defn}

\begin{rmk}\label{2.4.4}
  This definition is intrinsic;
  whether a set \(Y\) is connected or not depends only on what the metric is doing on \(Y\), but not on what ambient space \(X\) one placing \(Y\) in.
\end{rmk}

\begin{thm}\label{2.4.5}
  Let \(X\) be a non-empty subset of the real line \(\R\).
  Then the following statements are equivalent.
  \begin{enumerate}
    \item \(X\) is connected.
    \item Whenever \(x, y \in X\) and \(x < y\), the interval \([x, y]\) is also contained in \(X\).
    \item \(X\) is an interval (in the sense of Definition 9.1.1 in Analysis I).
  \end{enumerate}
\end{thm}

\begin{proof}
  First we show that (a) implies (b).
  Let \(d = d_{l^1}|_{\R \times \R}\).
  Suppose that \((X, d)\) is connected, and suppose for sake of contradiction that we could find points \(x < y\) in \(X\) such that \([x, y]\) is not contained in \(X\).
  Then there exists a real number \(x < z < y\) such that \(z \notin X\).
  Thus the sets \((-\infty, z) \cap X\) and \((z, \infty) \cap X\) will cover \(X\).
  But these sets are non-empty (because they contain \(x\) and \(y\) respectively) and are open relative to \((X, d)\), and so \(X\) is disconnected, a contradiction.

  Now we show that (b) implies (a).
  Let \(X\) be a set obeying the property (b).
  Suppose for sake of contradiction that \(X\) is disconnected.
  Then there exist disjoint non-empty sets \(V , W\) which are open relative to \(X\), such that \(V \cup W = X\).
  Since \(V\) and \(W\) are non-empty, we may choose an \(x \in V\) and \(y \in W\).
  Since \(V\) and \(W\) are disjoint, we have \(x \neq y\);
  without loss of generality we may assume \(x < y\).
  By property (b), we know that the entire interval \([x, y]\) is contained in \(X\).

  Now consider the set \([x, y] \cap V\).
  This set is both bounded and non-empty (because it contains \(x\)).
  Thus it has a supremum
  \[
    z \coloneqq \sup([x, y] \cap V).
  \]
  Clearly \(z \in [x, y]\), and hence \(z \in X\).
  Thus either \(z \in V\) or \(z \in W\).
  Suppose first that \(z \in V\).
  Then \(z \neq y\) (since \(y \in W\) and \(V\) is disjoint from \(W\)).
  But \(V\) is open relative to \(X\), which contains \([x, y]\), so there is some ball \(B_{\big([x,y], d\big)}(z, r) = (z - r, z + r)\) which is contained in \(V\).
  But this contradicts the fact that \(z\) is the supremum of \([x, y] \cap V\).
  Now suppose that \(z \in W\).
  Then \(z \neq x\) (since \(x \in V\) and \(V\) is disjoint from \(W\)).
  But \(W\) is open relative to \(X\), which contains \([x, y]\), so there is some ball \(B_{\big([x,y], d\big)}(z, r) = (z - r, z + r)\) which is contained in \(W\).
  But this again contradicts the fact that \(z\) is the supremum of \([x, y] \cap V\).
  Thus in either case we obtain a contradiction, which means that \(X\) cannot be disconnected, and must therefore be connected.

  Next we show that (b) implies (c).
  Suppose that
  \[
    \forall x, y \in X, x < y \implies [x, y] \subseteq X.
  \]
  Suppose for sake of contradiction that \(X\) is not an interval.
  Then we would have
  \[
    \exists x, y \in X : x < y \implies \exists z \in \R \setminus X : x < z < y.
  \]
  Clearly this contradicts to hypothesis, thus \(X\) is an interval.

  Finally we show that (c) implies (b).
  Suppose that \(X\) is an interval.
  Then we have
  \begin{align*}
             & \forall x, y \in X, x < y                                                        \\
    \implies & \inf(X) \leq x < y \leq \sup(X)                                                  \\
    \implies & \big(\forall z \in \R, x \leq z \leq y \implies \inf(X) \leq z \leq \sup(X)\big) \\
    \implies & \big(\forall z \in \R, x \leq z \leq y \implies z \in X\big)                     \\
    \implies & [x, y] \subseteq X.
  \end{align*}
\end{proof}

\begin{thm}tinuity preserves connectedness]\label{2.4.6}
  Let f : \(X \to Y\) be a continuous map from one metric space \((X, d_X)\) to another \((Y, d_Y)\).
  Let \(E\) be any connected subset of \(X\).
  Then \(f(E)\) is also connected.
\end{thm}

\begin{proof}
  Suppose for sake of contradiction that \(\big(f(E), d_Y|_{f(E) \times f(E)}\big)\) is disconnected.
  Then there exists two open set \(V_1, V_2\) in \(\big(f(E), d_Y|_{f(E) \times f(E)}\big)\) such that \(V_1 \cap V_2 = \emptyset\) and \(V_1 \cup V_2 = f(E)\).
  But then we have
  \begin{align*}
             & f \text{ is continuous from } (X, d_X) \text{ to } (Y, d_Y)                                                                             \\
    \implies & f^{-1}(V_1), f^{-1}(V_2) \text{ are open in } (E, d_X|_{E \times E})                                &  & \text{(by \cref{2.1.5}(a)(c))} \\
    \implies & \big(f^{-1}(V_1) \cap f^{-1}(V_2) = \emptyset\big) \land \big(f^{-1}(V_1) \cup f^{-1}(V_2) = E\big)                                     \\
    \implies & (E, d_X|_{E \times E}) \text{ is disconnected},                                                     &  & \by{2.4.1}
  \end{align*}
  a contradiction.
  Thus \(\big(f(E), d_Y|_{f(E) \times f(E)}\big)\) is connected.
\end{proof}

\begin{cor}[Intermediate value theorem]\label{2.4.7}
  Let \(f : X \to \R\) be a continuous map from one metric space \((X, d_X)\) to the real line.
  Let \(E\) be any connected subset of \(X\), and let \(a, b\) be any two elements of \(E\).
  Let \(y\) be a real number between \(f(a)\) and \(f(b)\), i.e., either \(f(a) \leq y \leq f(b)\) or \(f(a) \geq y \geq f(b)\).
  Then there exists \(c \in E\) such that \(f(c) = y\).
\end{cor}

\begin{proof}
  Since \(f\) is continuous from \((X, d_X)\) to \((\R, d_{l^1}|_{\R \times \R})\) and \((E, d_X|_{E \times E})\) is connected, by \cref{2.4.6} we know that \(\big(f(E), d_{l^1}|_{f(E) \times f(E)}\big)\) is connected.
  By \cref{2.4.5}(a)(c) we know that \(f(E)\) is an interval.
  Thus we have
  \begin{align*}
             & \forall a, b \in E, \forall y \in \Big[\min\big(f(a), f(b)\big), \max\big(f(a), f(b)\big)\Big] \\
    \implies & y \in f(E)                                                                                     \\
    \implies & \exists c \in X : f(c) = y.
  \end{align*}
\end{proof}

\exercisesection

\begin{ex}\label{ex:2.4.1}
  Let \((X, d_{\text{disc}})\) be a metric space with the discrete metric.
  Let \(E\) be a subset of \(X\) which contains at least two elements.
  Show that \(E\) is disconnected.
\end{ex}

\begin{proof}
  Let \(x, y \in E\) such that \(x \neq y\), let \(V = \set{x}\) and let \(W = E \setminus V\).
  Since \(x \in V\) and \(y \in W\), we know that \(V \neq \emptyset \neq W\).
  By \cref{1.2.8} we know that \(V, W\) are open in \((E, d_{\text{disc}}|_{E \times E})\).
  Since \(V \neq \emptyset \neq W\), \(V \cup W = E\) and \(V \cap W = \emptyset\), by \cref{2.4.3} we know that \((E, d_{\text{disc}}|_{E \times E})\) is disconnected.
\end{proof}

\begin{ex}\label{ex:2.4.2}
  Let \(f : X \to Y\) be a function from a connected metric space \((X, d)\) to a metric space \((Y, d_{\text{disc}})\) with the discrete metric.
  Show that \(f\) is continuous iff it is constant.
\end{ex}

\begin{proof}
  We first show that if \(f\) is continuous from \((X, d)\) to \((Y, d_{\text{disc}})\), then \(f\) is a constant function.
  Suppose for sake of contradiction that \(f\) is not a constant function.
  Then we have
  \[
    \exists x_1, x_2 \in X : (x_1 \neq x_2) \land \big(f(x_1) \neq f(x_2)\big)
  \]
  and by \cref{ex:2.4.1} we know that \(\big(f(E), d_{\text{disc}}|_{E \times E}\big)\) is disconnected.
  But \((X, d)\) is connected, thus by \cref{2.4.6} we know that \(\big(f(E), d_{\text{disc}}|_{E \times E}\big)\) is connected, a contradiction.
  Thus \(f\) is a constant function.

  Now we show that if \(f\) is a constant function, then \(f\) is continuous from \((X, d)\) to \((Y, d_{\text{disc}})\).
  We have
  \begin{align*}
             & \forall x_1, x_2 \in X, f(x_1) = f(x_2)                                                                                            \\
    \implies & \forall \varepsilon \in \R^+, \forall x_1, x_2 \in X, d_{\text{disc}}\big(f(x_1), f(x_2)\big) = 0 < \varepsilon                    \\
    \implies & f \text{ is uniformly continuous from } (X, d) \text{ to } (Y, d_{\text{disc}})                                 &  & \by{2.3.4}    \\
    \implies & f \text{ is continuous from } (X, d) \text{ to } (Y, d_{\text{disc}}).                                          &  & \by{ex:2.3.3}
  \end{align*}
\end{proof}

\begin{ex}\label{ex:2.4.3}
  Prove the equivalence of statements (b) and (c) in \cref{2.4.5}.
\end{ex}

\begin{proof}
  See \cref{2.4.5}.
\end{proof}

\begin{ex}\label{ex:2.4.4}
  Prove \cref{2.4.6}.
\end{ex}

\begin{proof}
  See \cref{2.4.6}.
\end{proof}

\begin{ex}\label{ex:2.4.5}
  Use \cref{2.4.6} to prove \cref{2.4.7}.
\end{ex}

\begin{proof}
  See \cref{2.4.7}.
\end{proof}

\begin{ex}\label{ex:2.4.6}
  Let \((X, d)\) be a metric space, and let \((E_\alpha)_{\alpha \in I}\) be a collection of connected sets in \(X\).
  Suppose also that \(\bigcap_{\alpha \in I} E_\alpha\) is non-empty.
  Show that \(\bigcup_{\alpha \in I} E_\alpha\) is connected.
\end{ex}

\begin{proof}
  Let
  \[
    d_E = d|_{(\bigcup_{\alpha \in I} V_\alpha) \times (\bigcup_{\alpha \in I} V_\alpha)}.
  \]
  Suppose for sake of contradiction that \((\bigcup_{\alpha \in I} E_\alpha, d_E)\) is disconnected.
  By \cref{2.4.1} we know that
  \[
    \exists V, W \subseteq \bigcup_{\alpha \in I} E_\alpha : \begin{dcases}
      V, W \text{ are open in } \bigg(\bigcup_{\alpha \in I} E_\alpha, d_E\bigg) \\
      V \neq \emptyset \neq W                                                    \\
      V \cap W = \emptyset                                                       \\
      V \cup W = \bigcup_{\alpha \in I} E_\alpha
    \end{dcases}
  \]
  Since \(\bigcap_{\alpha \in I} E_\alpha \neq \emptyset\), we know that \(V_\alpha \neq \emptyset\) for each \(\alpha \in I\).
  We claim that there exists some \(\beta \in I\) such that \(V \cap E_\beta \neq \emptyset\) and \(W \cap E_\beta \neq \emptyset\).
  If not, then we would have
  \begin{align*}
             & (\forall \alpha \in I, V \cap E_\alpha = \emptyset) \lor (\forall \alpha \in I, W \cap E_\alpha = \emptyset) \\
    \implies & (V = \emptyset) \lor (W = \emptyset),
  \end{align*}
  which contradicts to \(V \neq \emptyset \neq W\).
  Now let \(\beta \in I\) such that \(V \cap E_\beta \neq \emptyset\) and \(W \cap E_\beta \neq \emptyset\).
  But then we have
  \begin{align*}
             & E_\beta \subseteq \bigcup_{\alpha \in I} E_\alpha = V \cup W                                   \\
    \implies & \begin{dcases}
                 V \cap E_\beta \text{ is open in } (E_\beta, d_E|_{E_\beta \times E_\beta}) \\
                 W \cap E_\beta \text{ is open in } (E_\beta, d_E|_{E_\beta \times E_\beta}) \\
                 V \cap E_\beta \neq \emptyset \neq W \cap E_\beta                           \\
                 (V \cap E_\beta) \cap (W \cap E_\beta) = \emptyset                          \\
                 (V \cap E_\beta) \cup (W \cap E_\beta) = E_\beta
               \end{dcases} &  & \text{(by \cref{1.3.4}(a))}                    \\
    \implies & (E_\beta, d_E|_{E_\beta \times E_\beta}) \text{ is disconnected},              &  & \by{2.4.1}
  \end{align*}
  which contradict to the hypothesis that \((E_\beta, d_E|_{E_\beta \times E_\beta})\) is connected.
  Thus we know that \((\bigcup_{\alpha \in I} E_\alpha, d_E)\) is connected.
\end{proof}

\begin{ex}\label{ex:2.4.7}
  Let \((X, d)\) be a metric space, and let \(E\) be a subset of \(X\).
  We say that \(E\) is \emph{path-connected} iff, for every \(x, y \in E\), there exists a continuous function \(\gamma : [0, 1] \to E\) from the unit interval \([0, 1]\) to \(E\) such that \(\gamma(0) = x\) and \(\gamma(1) = y\).
  Show that every non-empty path-connected set is connected.
  (The converse is false, but is a bit tricky to show and will not be detailed here.)
\end{ex}

\begin{proof}
  Suppose for sake of contradiction that \((E, d|_{E \times E})\) is disconnected.
  Then by \cref{2.4.1} we have
  \[
    \exists V, W \subseteq E : \begin{dcases}
      V, W \text{ are open in } (E, d|_{E \times E}) \\
      V \neq \emptyset \neq W                        \\
      V \cap W = \emptyset                           \\
      V \cup W = E
    \end{dcases}
  \]
  Let \(x \in V\) and let \(y \in W\).
  Since \((E, d|_{E \times E})\) is path-connected and \(x, y \in E\), by definition we know that there exists a function \(\gamma : [0, 1] \to E\) which is continuous from \((\R, d_{l^1}|_{\R \times \R})\) to \((E, d|_{E \times E})\) and
  \[
    \begin{dcases}
      \gamma(0) = x;               \\
      \gamma(1) = y;               \\
      x \in \gamma([0, 1]) \cap V; \\
      y \in \gamma([0, 1]) \cap W.
    \end{dcases}
  \]
  But then we have
  \begin{align*}
             & ([0, 1], d_{l^1}|_{\R \times \R}) \text{ is connected}                                   &  & \text{(by \cref{2.4.5}(a)(c))} \\
    \implies & \Big(\gamma([0, 1]), d|_{\gamma([0, 1]) \times \gamma([0, 1])}\Big) \text{ is connected} &  & \by{2.4.6}
  \end{align*}
  and
  \begin{align*}
             & \begin{dcases}
                 \gamma([0, 1]) \cap V \text{ is open in } \big(r([0, 1]), d|_{\gamma([0, 1]) \times \gamma([0, 1])}\big) \\
                 \gamma([0, 1]) \cap W \text{ is open in } \big(r([0, 1]), d|_{\gamma([0, 1]) \times \gamma([0, 1])}\big) \\
                 \gamma([0, 1]) \cap V \neq \emptyset \neq \gamma([0, 1]) \cap W                                          \\
                 \big(\gamma([0, 1]) \cap V\big) \cap \big(\gamma([0, 1]) \cap W\big) = \emptyset                         \\
                 \big(\gamma([0, 1]) \cap V\big) \cup \big(\gamma([0, 1]) \cap W\big) = \gamma([0, 1])
               \end{dcases} &  & \text{(by \cref{1.3.4}(a))}                    \\
    \implies & \big(r([0, 1]), d|_{\gamma([0, 1]) \times \gamma([0, 1])}\big) \text{ is disconnected},                                     &  & \by{2.4.1}
  \end{align*}
  a contradiction.
  Thus we know that \((E, d|_{E \times E})\) is connected.
\end{proof}

\begin{ex}\label{ex:2.4.8}
  Let \((X, d)\) be a metric space, and let \(E\) be a subset of \(X\).
  Show that if \(E\) is connected, then the closure \(\overline{E}\) of \(E\) is also connected.
  Is the converse true?
\end{ex}

\begin{proof}
  Let \(\overline{E}\) be the closure of \(E\) in \((X, d)\).
  Suppose for sake of contradiction that \((\overline{E}, d|_{\overline{E} \times \overline{E}})\) is disconnected.
  Then by \cref{2.4.1} we have
  \[
    \exists V, W \subseteq \overline{E} : \begin{dcases}
      V, W \text{ are open in } (\overline{E}, d|_{\overline{E} \times \overline{E}}) \\
      V \neq \emptyset \neq W                                                         \\
      V \cap W = \emptyset                                                            \\
      V \cup W = \overline{E}
    \end{dcases}
  \]
  By \cref{1.2.10}(a)(b) we know that \(E \subseteq \overline{E}\), thus we know that at least one of \(E \cap V\) and \(E \cap W\) is not empty.
  Now we split into two cases:
  \begin{itemize}
    \item \(E \cap V = \emptyset\).
          But then we have \(E \subseteq W\) and
          \begin{align*}
                     & \forall x \in V, x \in \overline{E} \setminus E                                                                                                     \\
            \implies & \forall x \in V, \exists r \in \R^+ : B_{(\overline{E}, d|_{\overline{E} \times \overline{E}})}(x, r) \subseteq V &  & \text{(by \cref{1.2.15}(a))} \\
            \implies & \forall y \in E, \forall x \in V, \exists r \in \R^+ : d|_{\overline{E} \times \overline{E}}(x, y) \geq r
          \end{align*}
          which contradict to \cref{1.2.10}(c).
          Thus we must have \(E \cap V \neq \emptyset\).
    \item \(E \cap W = \emptyset\).
          But using similar arguments as above we know that we must have \(E \cap W \neq \emptyset\).
  \end{itemize}
  From all cases above we conclude that \(E \cap V \neq \emptyset \neq E \cap W\).
  But then we have
  \begin{align*}
             & E \subseteq \overline{E}                                     &  & \text{(by \cref{1.2.10}(a)(b))} \\
    \implies & \begin{dcases}
                 E \cap V \text{ is open in } \big(E, d|_{E \times E}\big) \\
                 E \cap W \text{ is open in } \big(E, d|_{E \times E}\big) \\
                 E \cap V \neq \emptyset \neq E \cap W                     \\
                 \big(E \cap V\big) \cap \big(E \cap W\big) = \emptyset    \\
                 \big(E \cap V\big) \cup \big(E \cap W\big) = E
               \end{dcases} &  & \text{(by \cref{1.3.4}(a))}                                         \\
    \implies & (E, d|_{E \times E}) \text{ is disconnected},                &  & \by{2.4.1}
  \end{align*}
  a contradiction.
  Thus we know that \((\overline{E}, d|_{\overline{E} \times \overline{E}})\) is connected.

  Now we give an example to show that the converse is not true.
  Let \(E = (0, 1) \cup (1, 2)\).
  Then we have \(\overline{E}_{(\R, d_{l^1}|_{\R \times \R})} = [0, 2]\).
  But by \cref{2.4.5}(a)(c) we know that \((\overline{E}_{(\R, d_{l^1}|_{\R \times \R})}, d_{l^1}|_{\R \times \R})\) is connected but \((E, d_{l^1}|_{\R \times \R})\) is not.
\end{proof}

\begin{ex}\label{ex:2.4.9}
  Let \((X, d)\) be a metric space. Let us define a relation \(x \sim y\) on \(X\) by declaring \(x \sim y\) iff there exists a connected subset of \(X\) which contains both \(x\) and \(y\).
  Show that this is an equivalence relation (i.e., it obeys the reflexive, symmetric, and transitive axioms).
  Also, show that the equivalence classes of this relation (i.e., the sets of the form \(\set{y \in  X : y \sim x}\) for some \(x \in X\)) are all closed and connected.
  These sets are known as the \emph{connected components} of \(X\).
\end{ex}

\begin{proof}
  Note that the relation \(\sim\) depends on the metric function \(d\) and we denoted it as \(\sim_d\).
  Since
  \begin{align*}
             & \forall x \in X, \set{x} \subseteq X                                                            \\
    \implies & \big(\set{x}, d|_{\set{x} \times \set{x}}\big) \text{ is connected} &  & \by{2.4.1}             \\
    \implies & x \sim_d x,                                                         &  & \text{(by definition)}
  \end{align*}
  we know that \((X, \sim_d)\) is reflexive.
  Since
  \begin{align*}
             & \forall x, y \in X, x \sim_d y                                        \\
    \implies & \exists S \subseteq X : \begin{dcases}
                                         x, y \in S \\
                                         (S, d|_{S \times S}) \text{ is connected}
                                       \end{dcases} &  & \text{(by definition)}      \\
    \implies & y \sim_d x,                               &  & \text{(by definition)}
  \end{align*}
  we know that \((X, \sim_d)\) is symmetric.
  Since
  \begin{align*}
             & \forall x, y, z \in X, \begin{dcases}
                                        x \sim_d y \\
                                        y \sim_d z
                                      \end{dcases}                                                                                                     \\
    \implies & \exists S_1, S_2 \subseteq X : \begin{dcases}
                                                x, y \in S_1                                    \\
                                                (S_1, d|_{S_1 \times S_1}) \text{ is connected} \\
                                                y, z \in S_2                                    \\
                                                (S_2, d|_{S_2 \times S_2}) \text{ is connected}
                                              \end{dcases}                                       &                      & \text{(by definition)}        \\
    \implies & S_1 \cap S_2 \neq \emptyset                                                              & (y \in S_1 \cap S_2)                          \\
    \implies & \big((S_1 \cup S_2), d|_{(S_1 \cup S_2) \times (S_1 \cup S_2)}\big) \text{ is connected} &                      & \by{ex:2.4.6}          \\
    \implies & x \sim_d z,                                                                              &                      & \text{(by definition)}
  \end{align*}
  we know that \((X, \sim_d)\) is transitive.
  Since \((X, \sim_d)\) is reflexive, symmetric and transitive, we know that \((X, \sim_d)\) is an equivalence relation.

  Next we show that every equivalence class of \((X, \sim_d)\) is connected.
  Let \(x \in X\) and let \(E_x = \set{y \in X : x \sim_d y}\).
  By definition we know that
  \[
    \forall y \in E_x, \exists S_y \subseteq X : \begin{dcases}
      (S_y, d|_{S_y \times S_y}) \text{ is connected} \\
      x, y \in S
    \end{dcases}
  \]
  Since
  \begin{align*}
             & \forall y \in E_x, x \in S_y                                                                                                        \\
    \implies & x \in \bigcap_{y \in E_x} S_y                                                                                                       \\
    \implies & \bigcap_{y \in E_x} S_y \neq \emptyset                                                                                              \\
    \implies & (\bigcup_{y \in E_x} S_y, d|_{(\bigcup_{y \in E_x} S_y) \times (\bigcup_{y \in E_x} S_y)}) \text{ is connected}, &  & \by{ex:2.4.6}
  \end{align*}
  by definition we know that \(E_x = \bigcup_{y \in E_x} S_y\).
  Thus \((E_x, d|_{E_x \times E_x})\) is connected.
  Since \(x\) is arbitrary, we know that every equivalent class of \((X, \sim_d)\) is connected.

  Finally we show that every equivalence class of \((X, \sim_d)\) is closed.
  Let \(x \in X\), let \(E_x = \set{y \in X : x \sim_d y}\) and let \(\overline{E}_x\) be the closure of \(E_x\) in \((X, d)\).
  To show that \(E_x\) is closed in \((X, d)\), by \cref{1.2.15}(b) we need to show that \(E_x = \overline{E}_x\).
  Since \((E_x, d|_{E_x \times E_x})\) is connected, by \cref{ex:2.4.8} we know that \((\overline{E}_x, d|_{\overline{E}_x \times \overline{E}_x})\) is connected.
  Thus we have
  \begin{align*}
             & E_x \subseteq \overline{E}_x                                            &  & \text{(by \cref{1.2.10}(a)(b))} \\
    \implies & (x \in \overline{E}_x) \land (\forall y \in \overline{E}_x, y \sim_d x) &  & \text{(by definition)}          \\
    \implies & \forall y \in \overline{E}_x, y \in E_x                                                                      \\
    \implies & E_x = \overline{E}_x.
  \end{align*}
\end{proof}

\begin{ex}\label{ex:2.4.10}
  Combine \cref{2.3.2} and \cref{2.4.7} to deduce a theorem for continuous functions on a compact connected domain which generalizes Corollary 9.7.4 in Analysis I.
\end{ex}

\begin{proof}
  First we deduce a theorem was asked.
  Let \((X, d)\) be a metric space.
  Let \(f : X \to \R\) be continuous map from \((X, d_X)\) to \((\R, d_{l^1}|_{\R \times \R})\).
  Let \(E \subseteq X\) such that \(E \neq \emptyset\) and \((E, d|_{E \times E})\) is compact and connected.
  Then we have
  \[
    \exists x_{\min}, x_{\max} \in E : f(E) = \big[f(x_{\min}), f(x_{\max})\big].
  \]

  Now we prove the theorem.
  Since \((E, d|_{E \times E})\) is compact, by \cref{2.3.2} we know that
  \[
    \exists x_{\min}, x_{\max} \in E : \forall x \in E, f(x_{\min}) \leq f(x) \leq f(x_{\max}).
  \]
  Then by \cref{2.4.7} we have
  \[
    \forall y \in \big[f(x_{\min}), f(x_{\max})\big], \exists x \in E : f(x) = y.
  \]
\end{proof}