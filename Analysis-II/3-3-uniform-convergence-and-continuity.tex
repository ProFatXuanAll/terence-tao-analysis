\section{Uniform convergence and continuity}\label{sec:3.3}

\begin{thm}[Uniform limits preserve continuity I]\label{3.3.1}
  Suppose \((f^{(n)})_{n = 1}^\infty\) is a sequence of functions from one metric space \((X, d_X)\) to another \((Y, d_Y)\), and suppose that this sequence converges uniformly to another function \(f : X \to Y\).
  Let \(x_0\) be a point in \(X\).
  If the functions \(f^{(n)}\) are continuous at \(x_0\) for each \(n\), then the limiting function \(f\) is also continuous at \(x_0\).
\end{thm}

\begin{proof}
  We have
  \begin{align*}
             & (f^{(n)})_{n = 1}^\infty \text{ converges uniformly to } f \text{ on } X                                                 \\
             & \text{with respect to } d_Y                                                                                              \\
    \implies & \forall \varepsilon \in \R^+, \exists\ N \in \Z^+ :                                                                      \\
             & \forall n \geq N, \forall x \in X, d_Y\big(f^{(n)}(x), f(x)\big) < \dfrac{\varepsilon}{3}. &  & \text{(by \cref{3.2.7})}
  \end{align*}
  We choose one pair of \(\varepsilon\) and \(N\).
  For each \(n \in \Z^+\), since \(f^{(n)}\) is continuous at \(x_0\) from \((X, d_X)\) to \((Y, d_Y)\), by \cref{2.1.1} we have
  \begin{align*}
             & \forall n \geq N, f^{(n)} \text{ is continuous at } x_0 \text{ from } (X, d_X) \text{ to } (Y, d_Y)                                                                                            \\
    \implies & \forall n \geq N, \exists\ \delta \in \R^+ :                                                                                                                                                   \\
             & \Big(\forall x \in X, d_X(x, x_0) < \delta \implies d_Y\big(f^{(n)}(x), f^{(n)}(x_0)\big) < \dfrac{\varepsilon}{3}\Big)                                                                        \\
    \implies & \forall n \geq N, \exists\ \delta \in \R^+ :                                                                                                                                                   \\
             & \Big(\forall x \in X, d_X(x, x_0) < \delta \implies d_Y\big(f(x), f(x_0)\big)                                                                                                                  \\
             & \leq d_Y\big(f(x), f^{(n)}(x)\big) + d_Y\big(f^{(n)}(x), f^{(n)}(x_0)\big) + d_Y\big(f^{(n)}(x_0), f(x_0)\big) < \dfrac{\varepsilon}{3} + \dfrac{\varepsilon}{3} + \dfrac{\varepsilon}{3}\Big) \\
    \implies & \forall n \geq N, \exists\ \delta \in \R^+ :                                                                                                                                                   \\
             & \Big(\forall x \in X, d_X(x, x_0) < \delta \implies d_Y\big(f(x), f(x_0)\big) < \varepsilon.
  \end{align*}
  Since \(\varepsilon\) is arbitrary, by \cref{2.1.1} we know that \(f\) is continuous at \(x_0\) from \((X, d_X)\) to \((Y, d_Y)\).
\end{proof}

\begin{cor}[Uniform limits preserve continuity II]\label{3.3.2}
  Let \((f^{(n)})_{n = 1}^\infty\) be a sequence of functions from one metric space \((X, d_X)\) to another \((Y, d_Y)\), and suppose that this sequence converges uniformly to another function \(f : X \to Y\).
  If the functions \(f^{(n)}\) are continuous on \(X\) for each \(n\), then the limiting function \(f\) is also continuous on \(X\).
\end{cor}

\begin{proof}
  By applying \cref{3.3.1} to each \(x \in X\) we conclude that \(f\) is continuous on \(X\) from \((X, d_X)\) to \((Y, d_Y)\).
\end{proof}

\begin{prop}[Interchange of limits and uniform limits]\label{3.3.3}
  Let
  \((X, d_X)\) and \((Y, d_Y)\) be metric spaces, with \(Y\) complete, and let \(E\) be a subset of \(X\).
  Let \((f^{(n)})_{n = 1}^\infty\) be a sequence of functions from \(E\) to \(Y\), and suppose that this sequence converges uniformly in \(E\) to some function \(f : E \to Y\).
  Let \(x_0 \in X\) be an adherent point of \(E\), and suppose that for each \(n\) the limit \(\lim_{x \to x_0 ; x \in E} f^{(n)}(x)\) exists.
  Then the limit \(\lim_{x \to x_0 ; x \in E} f(x)\) also exists, and is equal to the limit of the sequence \(\big(\lim_{x \to x_0 ; x \in E} f^{(n)}(x)\big)_{n = 1}^\infty\);
  in other words we have the interchange of limits
  \[
    \lim_{n \to \infty} \lim_{x \to x_0 ; x \in E} f^{(n)}(x) = \lim_{x \to x_0 ; x \in E} \lim_{n \to \infty} f^{(n)}(x).
  \]
\end{prop}

\begin{proof}
  For each \(n \in \Z^+\), we define \(d_Y - \lim_{x \to x_0 ; x \in E} f^{(n)}(x) = L^{(n)}\).
  We claim that the sequence \((L^{(n)})_{n = 1}^\infty\) converges in \(Y\) with respect to \(d_Y\).
  Since \((Y, d_Y)\) is complete, by \cref{1.4.10} it suffices to show that \((L^{(n)})_{n = 1}^\infty\) is a Cauchy sequence in \((Y, d_Y)\).
  Let \(n_1, n_2 \in \Z^+\).
  Then by \cref{3.2.7} we have
  \begin{align*}
             & (f^{(n)})_{n = 1}^\infty \text{ converges uniformly to } f \text{ on } X \text{ with respect to } d_Y                                         \\
    \implies & \forall \varepsilon \in \R^+, \exists\ N \in \Z^+ : \forall n \geq N, \forall x \in X, d_Y\big(f^{(n)}(x), f(x)\big) < \dfrac{\varepsilon}{4}
  \end{align*}
  Now fix one pair of \(\varepsilon\) and \(N\).
  Since \(L^{(n)}\) exists for each \(n \in \N\), by \cref{3.1.1} we have
  \begin{align*}
             & \forall n \geq N, d_Y - \lim_{x \to x_0 ; x \in E} f^{(n)}(x) = L^{(n)}                                                                                         \\
    \implies & \forall n \geq N, \exists\ \delta \in \R^+ : \Big(\forall x \in X, d_X(x, x_0) < \delta \implies d_Y\big(f^{(n)}(x), L^{(n)}\big) < \dfrac{\varepsilon}{4}\Big) \\
    \implies & \forall n_1, n_2 \geq N, \exists\ \delta \in \R^+ :                                                                                                             \\
             & \Big(\forall x \in X, d_X(x, x_0) < \delta \implies d_Y\big(L^{(n_1)}, L^{(n_2)}\big)                                                                           \\
             & \leq d_Y\big(L^{(n_1)}, f^{(n_1)}(x)\big) + d_Y\big(f^{(n_1)}(x), f(x)\big)                                                                                     \\
             & \quad + d_Y\big(f(x), f^{(n_2)}(x)\big) + d_Y\big(f^{(n_2)}(x), L^{(n_2)}\big)                                                                                  \\
             & < \dfrac{\varepsilon}{4} + \dfrac{\varepsilon}{4} + \dfrac{\varepsilon}{4} + \dfrac{\varepsilon}{4}\Big)                                                        \\
    \implies & \forall n_1, n_2 \geq N, d_Y\big(L^{(n_1)}, L^{(n_2)}\big) < \varepsilon
  \end{align*}
  Since \(\varepsilon\) is arbitrary, we have
  \[
    \forall \varepsilon \in \R^+, \exists\ N \in \Z^+ : \forall n_1, n_2 \geq N, d_Y\big(L^{(n_1)}, L^{(n_2)}\big) < \varepsilon
  \]
  and by \cref{1.4.6} \((L^{(n)})_{n = 1}^\infty\) is a Cauchy sequence in \((Y, d_Y)\).

  Let \(L \in Y\) such that \(d_Y - \lim_{n \to \infty} L^{(n)} = L\).
  Again by \cref{3.2.7} we have
  \begin{align*}
             & (f^{(n)})_{n = 1}^\infty \text{ converges uniformly to } f \text{ on } X \text{with respect to } d_Y                                               \\
    \implies & \forall \varepsilon \in \R^+, \exists\ N_1 \in \Z^+ : \forall n \geq N_1, \forall x \in X, d_Y\big(f^{(n)}(x), f(x)\big) < \dfrac{\varepsilon}{3}.
  \end{align*}
  Again we choose one pair of \(\varepsilon\) and \(N_1\).
  Since \(L\) exists, by \cref{3.1.1} we have
  \begin{align*}
             & \lim_{n \to \infty} d_Y\big(L^{(n)}, L\big) = 0                                                                                                                                 \\
    \implies & \exists\ N_2 \in \Z^+ : \forall n \geq N_2, d_Y(L^{(n)}, L) < \dfrac{\varepsilon}{3}                                                                                            \\
    \implies & \exists\ N = \max(N_1, N_2) : \forall n \geq N,                                                                                                                                 \\
             & \begin{dcases}
                 \exists\ \delta \in \R^+ : \forall x \in X, d_X(x, x_0) < \delta \implies d_Y\big(f^{(n)}(x), L^{(n)}\big) < \dfrac{\varepsilon}{3} \\
                 d_Y(L^{(n)}, L) < \dfrac{\varepsilon}{3}                                                                                            \\
                 \forall x \in X, d_Y\big(f^{(n)}(x), f(x)\big) < \dfrac{\varepsilon}{3}
               \end{dcases}                                             \\
    \implies & \exists\ N = \max(N_1, N_2) : \forall n \geq N, \exists\ \delta \in \R^+ :                                                                                                      \\
             & \Big(\forall x \in X, d_X(x, x_0) < \delta \implies d_Y\big(f(x), L\big)                                                                                                        \\
             & \leq d_Y\big(f(x), f^{(n)}(x)\big) + d_Y\big(f^{(n)}(x), L^{(n)}\big) + d_Y\big(L^{(n)}, L\big) < \dfrac{\varepsilon}{3} + \dfrac{\varepsilon}{3} + \dfrac{\varepsilon}{3}\Big) \\
    \implies & \exists\ \delta \in \R^+ : \Big(\forall x \in X, d_X(x, x_0) < \delta \implies d_Y\big(f(x), L\big) < \varepsilon\Big).
  \end{align*}
  Since \(\varepsilon\) is arbitrary, by \cref{3.1.1} we know that \(d_Y - \lim_{x \to x_0 ; x \in E} f(x) = L\).
\end{proof}

\begin{prop}\label{3.3.4}
  Let \((f^{(n)})_{n = 1}^\infty\) be a sequence of continuous functions from one metric space \((X, d_X)\) to another \((Y, d_Y)\), and suppose that this sequence converges uniformly to another function \(f : X \to Y\).
  Let \(x^{(n)}\) be a sequence of points in \(X\) which converge to some limit \(x\).
  Then \(f^{(n)}(x^{(n)})\) converges (in \(Y\)) to \(f(x)\).
\end{prop}

\begin{proof}
  Let \(x_0 \in X\).
  Suppose that \((x^{(n)})_{n = 1}^\infty\) is a sequence in \(X\) such that
  \[
    \lim_{n \to \infty} d_X(x^{(n)}, x_0) = 0.
  \]
  By \cref{3.3.1} we know that \(f\) is continuous at \(x_0\) from \((X, d_X)\) to \((Y, d_Y)\).
  Thus by \cref{2.1.4}(a)(b) we have
  \[
    \lim_{n \to \infty} d_Y\big(f(x^{(n)}), f(x_0)\big) = 0
  \]
  and by \cref{1.1.14} we have
  \[
    \forall \varepsilon \in \R^+, \exists\ N_1 \in \Z^+ : \forall n \geq N_1, d_Y\big(f(x^{(n)}), f(x_0)\big) < \dfrac{\varepsilon}{2}.
  \]
  Now we choose one pair of \(\varepsilon\) and \(N_1\).
  Since \((f^{(n)})_{n = 1}^\infty\) converges uniformly to \(f\) on \(X\) with respect to \(d_Y\), by \cref{3.2.7} we have
  \begin{align*}
             & \exists\ N_2 \in \Z^+ : \forall n \geq N_2, \forall x \in X, d_Y\big(f^{(n)}(x), f(x)\big) < \dfrac{\varepsilon}{2}                                                      \\
    \implies & \exists\ N_2 \in \Z^+ : \forall n \geq N_2, d_Y\big(f^{(n)}(x^{(n)}), f(x^{(n)})\big) < \dfrac{\varepsilon}{2}                                                           \\
    \implies & \exists\ N = \max(N_1, N_2) : \forall n \geq N,                                                                                                                          \\
             & d_Y\big(f^{(n)}(x^{(n)}), f(x_0)\big) \leq d_Y\big(f^{(n)}(x^{(n)}), f(x^{(n)})\big) + d_Y\big(f(x^{(n)}), f(x_0)\big) < \dfrac{\varepsilon}{2} + \dfrac{\varepsilon}{2} \\
    \implies & \exists\ N = \max(N_1, N_2) : \forall n \geq N, d_Y\big(f^{(n)}(x^{(n)}), f(x_0)\big) < \varepsilon.
  \end{align*}
  Since \(\varepsilon\) is arbitrary, by \cref{1.1.14} we know that
  \[
    \lim_{n \to \infty} d_Y\big(f^{(n)}(x^{(n)}), f(x_0)\big) = 0.
  \]
  Since \(x_0\) is arbitrary, we conclude that for any \(x_0 \in X\), if \((x^{(n)})_{n = 1}^\infty\) is a sequence in \(X\) such that
  \[
    \lim_{n \to \infty} d_X(x^{(n)}, x_0) = 0,
  \]
  then we have
  \[
    \lim_{n \to \infty} d_Y\big(f^{(n)}(x^{(n)}), f(x_0)\big) = 0.
  \]
\end{proof}

\begin{defn}[Bounded functions]\label{3.3.5}
  A function \(f : X \to Y\) from one metric space \((X, d_X)\) to another \((Y, d_Y)\) is \emph{bounded} if \(f(X)\) is a bounded set, i.e., there exists a ball \(B_{(Y, d_Y)}(y_0, R)\) in \(Y\) such that \(f(x) \in B_{(Y, d_Y)}(y_0, R)\) for all \(x \in X\).
\end{defn}

\begin{prop}[Uniform limits preserve boundedness]\label{3.3.6}
  Let \((f^{(n)})_{n = 1}^\infty\) be a sequence of functions from one metric space \((X, d_X)\) to another \((Y, d_Y)\), and suppose that this sequence converges uniformly to another function \(f : X \to Y\).
  If the functions \(f^{(n)}\) are bounded on \(X\) for each \(n\), then the limiting function \(f\) is also bounded on \(X\).
\end{prop}

\begin{proof}
  Since \(f^{(n)}\) is bounded in \((Y, d_Y)\) for each \(n \in \Z^+\), by \cref{3.3.5} and \cref{1.5.3} we have
  \begin{align*}
             & \forall n \in \Z^+, \forall y \in Y, \exists\ \varepsilon \in \R^+ : f^{(n)}(X) \subseteq B_{(Y, d_Y)}(y, \varepsilon)          \\
    \implies & \forall n \in \Z^+, \forall y \in Y, \exists\ \varepsilon \in \R^+ : \forall x \in X, d_Y\big(f^{(n)}(x), y\big) < \varepsilon.
  \end{align*}
  Now we choose \(y\) and \(\varepsilon\) for each \(n \in \Z^+\) and we denote them as \(y^{(n)}\) and \(\varepsilon^{(n)}\).
  Since \((f^{(n)})_{n = 1}^\infty\) converges uniformly to \(f\) on \(X\) with respect to \(d_Y\), by \cref{3.2.7} we have
  \begin{align*}
             & \exists\ N \in \Z^+ : \forall n \geq N, \forall x \in X, d_Y\big(f^{(n)}(x), f(x)\big) < 1                               \\
             & \exists\ N \in \Z^+ : \forall x \in X, d_Y\big(f^{(N)}(x), f(x)\big) < 1                                                 \\
    \implies & \exists\ N \in \Z^+ : \forall x \in X,                                                                                   \\
             & d_Y\big(f(x), y^{(N)}\big) \leq d_Y\big(f(x), f^{(N)}(x)\big) + d_Y\big(f^{(N)}(x), y^{(N)}\big) < \varepsilon^{(N)} + 1 \\
    \implies & \exists\ N \in \Z^+ : \forall x \in X, d_Y\big(f(x), y^{(N)}\big) < \varepsilon^{(N)} + 1                                \\
    \implies & \exists\ N \in \Z^+ : f(X) \subseteq B_{(Y, d_Y)}(y^{(N)}, \varepsilon^{(N)} + 1).
  \end{align*}
  Since \(y^{(N)}\) is arbitrary, we have
  \[
    \forall y \in Y, \exists\ \varepsilon \in \R^+ : f(X) \subseteq B_{(Y, d_Y)}(y, \varepsilon)
  \]
  and by \cref{1.5.3} and \cref{3.3.5} \(f\) is bounded in \((Y, d_Y)\).
\end{proof}

\begin{rmk}\label{3.3.7}
  The above propositions sound very reasonable, but one should caution that it only works if one assumes uniform convergence;
  pointwise convergence is not enough.
\end{rmk}

\exercisesection

\begin{ex}\label{ex:3.3.1}
  Prove \cref{3.3.1}.
  Explain briefly why your proof requires uniform convergence, and why pointwise convergence would not suffice.
\end{ex}

\begin{proof}
  See \cref{3.3.1}.
  Without uniform convergence we cannot make \(f^{(n)}(x)\) and \(f(x)\) arbitrary close.
\end{proof}

\begin{ex}\label{ex:3.3.2}
  Prove \cref{3.3.3}.
\end{ex}

\begin{proof}
  See \cref{3.3.3}.
\end{proof}

\begin{ex}\label{ex:3.3.3}
  Compare \cref{3.3.3} with Example 1.2.8 in Analysis I.
  Can you now explain why the interchange of limits in Example 1.2.8 in Analysis I led to a false statement, whereas the interchange of limits in \cref{3.3.3} is justified?
\end{ex}

\begin{proof}
  By \cref{ex:3.2.2}(b) we know that \(f^{(n)}(x) = x^{(n)}\) does not converge uniformly to any function \(f : (-1, 1) \to \R\), thus the interchange of limits in Example 1.2.8 in Analysis I failed.
\end{proof}

\begin{ex}\label{ex:3.3.4}
  Prove \cref{3.3.4}.
\end{ex}

\begin{proof}
  See \cref{3.3.4}.
\end{proof}

\begin{ex}\label{ex:3.3.5}
  Give an example to show that \cref{3.3.4} fails if the phrase ``converges uniformly'' is replaced by ``converges pointwise''.
\end{ex}

\begin{proof}
  For each \(n \in \Z^+\), let \(f^{(n)} : [0, 1] \to \R\) be the function where \(f^{(n)}(x) = x^n\) for each \(x \in [0, 1]\).
  Let \(f : [0, 1] \to \R\) be the function where
  \[
    \forall x \in [0, 1], f(x) = \begin{dcases}
      1 & \text{if } x = 1        \\
      0 & \text{if } x \in [0, 1)
    \end{dcases}
  \]
  By Example 3.2.4 in Analysis II we know that \((f^{(n)})_{n = 1}^\infty\) converges pointwise to \(f\) on \(X\) with respect to \(d_{l^1}|_{\R \times \R}\).
  By \cref{ex:3.2.2}(b) we know that \(f^{(n)}(x) = x^{(n)}\) does not converge uniformly to \(f\) on \(X\) with respect to \(d_{l^1}|_{\R \times \R}\).
  Let \((x^{(n)})_{n = 1}^\infty\) be the sequence where \(x^{(n)} = (\dfrac{1}{2})^{\dfrac{1}{n}}\) for each \(n \in \Z^+\).
  Then we have
  \[
    \lim_{n \to \infty} x^{(n)} = 1 = f(1).
  \]
  But
  \[
    \lim_{n \to \infty} f^{(n)}(x^{(n)}) = \lim_{n \to \infty} \big((\dfrac{1}{2})^{\dfrac{1}{n}}\big)^n = \lim_{n \to \infty} \dfrac{1}{2} = \dfrac{1}{2} \neq 1.
  \]
  Thus \cref{3.3.4} fails when the phrase ``converges uniformly'' is replaced by ``converges pointwise''.
\end{proof}

\begin{ex}\label{ex:3.3.6}
  Prove \cref{3.3.6}.
\end{ex}

\begin{proof}
  See \cref{3.3.6}.
\end{proof}

\begin{ex}\label{ex:3.3.7}
  Give an example to show that \cref{3.3.6} fails if the phrase ``converges uniformly'' is replaced by ``converges pointwise''.
\end{ex}

\begin{proof}
  By \cref{ex:3.2.2}(c) we know that \(g\) is unbounded since
  \[
    \lim_{x \to -1 ; x \in (-1, 1)} g(x) = \lim_{x \to -1 ; x \in (-1, 1)} \dfrac{x}{1 - x} = \lim_{x \to -1 ; x \in (-1, 1)} \dfrac{1}{1 - x} - 1 = +\infty.
  \]
\end{proof}

\begin{ex}\label{ex:3.3.8}
  Let \((X, d)\) be a metric space, and for every positive integer \(n\), let \(f_n : X \to \R\) and \(g_n : X \to \R\) be functions.
  Suppose that \((f_n)_{n = 1}^\infty\) converges uniformly to another function \(f : X \to \R\), and that \((g_n)_{n = 1}^\infty\) converges uniformly to another function \(g : X \to \R\).
  Suppose also that the functions \((f_n)_{n = 1}^\infty\) and \((g_n)_{n = 1}^\infty\) are uniformly bounded, i.e., there exists an \(M > 0\) such that \(\abs{f_n(x)} \leq M\) and \(\abs{g_n(x)} \leq M\) for all \(n \geq 1\) and \(x \in X\).
  Prove that the functions \(f_n g_n : X \to \R\) converge uniformly to \(fg : X \to \R\).
\end{ex}

\begin{proof}
  Let \(d_1 = d_{l^1}|_{\R \times \R}\).
  Since \((f_n)_{n = 1}^\infty\) and \((g_n)_{n = 1}^\infty\) are uniformly bounded, by \cref{3.3.5} we know that \(f_n\) and \(g_n\) are bounded in \((\R, d_1)\) for each \(n \in \Z^+\).
  By \cref{3.3.6} we know that \(f\) and \(g\) are bounded in \((\R, d_1)\), i.e.,
  \[
    \exists\ U \in \R^+ : \forall x \in X, \begin{dcases}
      \abs{f(x)} < U \\
      \abs{g(x)} < U
    \end{dcases}
  \]
  Since \((f_n)_{n = 1}^\infty\) and \((g_n)_{n = 1}^\infty\) converge uniformly to \(f\) on \(X\) with respect to \(d_1\), by \cref{3.2.7} we have
  \begin{align*}
     & \forall \varepsilon \in \R^+, \exists\ N_1 \in \Z^+ : \forall n \geq N_1, \forall x \in X, \abs{f_n(x) - f(x)} < \dfrac{\varepsilon}{2M}; \\
     & \forall \varepsilon \in \R^+, \exists\ N_2 \in \Z^+ : \forall n \geq N_2, \forall x \in X, \abs{g_n(x) - g(x)} < \dfrac{\varepsilon}{2U}.
  \end{align*}
  Now we fix one \(\varepsilon\) and its corresponding \(N_1, N_2\).
  Let \(N = \max(N_1, N_2)\).
  Then we have
  \begin{align*}
    \forall n \geq N, \forall x \in X, & \abs{f_n(x) g_n(x) - f(x) g(x)}                                        \\
                                       & = \abs{f_n(x) g_n(x) - f(x) g_n(x) + f(x) g_n(x) - f(x) g(x)}          \\
                                       & \leq \abs{f_n(x) g_n(x) - f(x) g_n(x)} + \abs{f(x) g_n(x) - f(x) g(x)} \\
                                       & = \abs{f_n(x) - f(x)} \abs{g_n(x)} + \abs{f(x)} \abs{g_n(x) - g(x)}    \\
                                       & < \dfrac{\varepsilon}{2M} M + U \dfrac{\varepsilon}{2U}                \\
                                       & = \varepsilon.
  \end{align*}
  Since \(\varepsilon\) is arbitrary, we have
  \[
    \forall \varepsilon \in \R^+, \exists\ N \in \Z^+ : \forall n \geq N, \forall x \in X, \abs{f_n(x) g_n(x) - f(x) g(x)} < \varepsilon
  \]
  and by \cref{3.2.7} \((f_n g_n)_{n = 1}^\infty\) converges uniformly to \(fg\) on \(X\) with respect to \(d_1\).
\end{proof}