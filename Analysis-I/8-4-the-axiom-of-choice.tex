\section{The axiom of choice}\label{sec:8.4}

\begin{note}
  We now discuss the final axiom of the standard Zermelo-Fraenkel-Choice system of set theory, namely the \emph{axiom of choice}.
  We have delayed introducing this axiom for a while now, to demonstrate that a large portion of the foundations of analysis can be constructed without appealing to this axiom.
  However, in many further developments of the theory, it is very convenient (and in some cases even essential) to employ this powerful axiom.
  On the other hand, the axiom of choice can lead to a number of unintuitive consequences (for instance the \emph{Banach-Tarski paradox}), and can lead to proofs that are philosophically somewhat unsatisfying.
  Nevertheless, the axiom is almost universally accepted by mathematicians.
  One reason for this confidence is a theorem due to the great logician Kurt Gödel, who showed that a result proven using the axiom of choice will never contradict a result proven without the axiom of choice
  (unless all the other axioms of set theory are themselves inconsistent, which is highly unlikely).
  More precisely, Gödel demonstrated that the axiom of choice is \emph{undecidable};
  it can neither be proved nor disproved from the other axioms of set theory, so long as those axioms are themselves consistent.
  (From a set of inconsistent axioms one can prove that every statement is both true and false.)
  In practice, this means that any ``real-life'' application of analysis
  (more precisely, any application involving only ``decidable'' questions)
  which can be rigorously supported using the axiom of choice, can also be rigorously supported without the axiom of choice, though in many cases it would take a much more complicated and lengthier argument to do so if one were not allowed to use the axiom of choice.
  Thus one can view the axiom of choice as a convenient and safe labour-saving device in analysis.
  In other disciplines of mathematics, notably in set theory in which many of the questions are not decidable, the issue of whether to accept the axiom of choice is more open to debate, and involves some philosophical concerns as well as mathematical and logical ones.
\end{note}

\begin{defn}[Infinite Cartesian products]\label{8.4.1}
  Let \(I\) be a set (possibly infinite), and for each \(\alpha \in I\) let \(X_{\alpha}\) be a set.
  We then define the Cartesian product \(\prod_{\alpha \in I} X_{\alpha}\) to be the set
  \[
    \prod_{\alpha \in I} X_{\alpha} = \Bigg\{(x_{\alpha})_{\alpha \in I} \in (\bigcup_{\beta \in I} X_{\beta})^I : x_{\alpha} \in X_{\alpha} \ \forall \alpha \in I\Bigg\},
  \]
  where we recall (from \cref{3.10}) that \((\bigcup_{\alpha \in I} X_{\alpha})^I\) is the set of all functions \((x_{\alpha})_{\alpha \in I}\) which assign an element \(x_{\alpha} \in \bigcup_{\beta \in I} X_{\beta}\) to each \(\alpha \in I\).
  Thus \(\prod_{\alpha \in I} X_{\alpha}\) is a subset of that set of functions, consisting instead of those functions \((x_{\alpha})_{\alpha \in I}\) which assign an element \(x_{\alpha} \in X_{\alpha}\) to each \(\alpha \in I\).
\end{defn}

\begin{eg}\label{8.4.2}
  For any sets \(I\) and X, we have \(\prod_{\alpha \in I} X = X^I\).
  If \(I\) is a set of the form \(I \coloneqq \{i \in \N : 1 \leq i \leq n\}\), then \(\prod_{\alpha \in I} X_{\alpha}\) is the same set as the set \(\prod_{1 \leq i \leq N} X_i\) defined in \cref{3.5.7}.
\end{eg}

\begin{note}
  Recall from \cref{3.5.12} that if \(X_1, \dots, X_n\) were any finite collection of non-empty sets, then the finite Cartesian product \(\prod_{1 \leq i \leq n} X_i\) was also non-empty.
  The axiom of choice asserts that this statement is also true fo infinite Cartesian products.
\end{note}

\begin{ax}[Choice]\label{8.1}
  Let \(I\) be a set, and for each \(\alpha \in I\), let \(X_{\alpha}\) be a non-empty set.
  Then \(\prod_{\alpha \in I} X_{\alpha}\) is also non-empty.
  In other words, there exists a function \((x_{\alpha})_{\alpha \in I}\) which assigns to each \(\alpha \in I\) an element \(x_{\alpha} \in X_{\alpha}\).
\end{ax}

\begin{rmk}\label{8.4.3}
  The intuition behind this axiom is that given a (possibly infinite) collection of non-empty sets \(X_{\alpha}\), one should be able to choose a single element \(x_{\alpha}\) from each one, and then form the possibly infinite tuple \((x_{\alpha})_{\alpha \in I}\) from all the choices one has made.
  On one hand, this is a very intuitively appealing axiom;
  in some sense one is just applying \cref{3.1.6} over and over again.
  On the other hand, the fact that one is making an infinite number of arbitrary choices, with no explicit rule as to \emph{how} to make these choices, is a little disconcerting.
  Indeed, there are many theorems proven using the axiom of choice which assert the abstract existence of some object \(x\) with certain properties, without saying at all \emph{what} that object is, or how to construct it.
  Thus the axiom of choice can lead to proofs which are \emph{non-constructive} - demonstrating existence of an object without actually constructing the object explicitly.
  This problem is not unique to the axiom of choice - it already appears for instance in \cref{3.1.6} - but the objects shown to exist using the axiom of choice tend to be rather extreme in their level of non-constructiveness.
  However, as long as one is aware of the distinction between a non-constructive existence statement, and a constructive existence statement (with the latter being preferable, but not strictly necessary in many cases), there is no difficulty here, except perhaps on a philosophical level.
\end{rmk}

\begin{rmk}\label{8.4.4}
  There are many equivalent formulations of the axiom of choice.
\end{rmk}

\begin{note}
  In analysis one often does not need the full power of the axiom of choice.
  Instead, one often only needs the \emph{axiom of countable choice}, which is the same as the axiom of choice but with the index set \(I\) restricted to be at most countable.
\end{note}

\begin{lem}\label{8.4.5}
  Let \(E\) be a non-empty subset of the real line with \(\sup(E) < \infty\)
  (i.e., \(E\) is bounded from above).
  Then there exists a sequence \((a_n)_{n = 1}^\infty\) whose elements \(a_n\) all lie in \(E\), such that \(\lim_{n \to \infty} a_n = \sup(E)\).
\end{lem}

\begin{proof}
  For each positive natural number \(n\), let \(X_n\) denote the set
  \[
    X_n \coloneqq \{x \in E : \sup(E) - 1 / n \leq x \leq \sup(E)\}.
  \]
  Since \(\sup(E)\) is the least upper bound for \(E\), then \(\sup(E) - 1 / n\) cannot be an upper bound for \(E\), and so \(X_n\) is non-empty for each \(n\).
  Using the axiom of choice (\cref{8.1}, or the axiom of countable choice), we can then find a sequence \((a_n)_{n = 1}^\infty\) such that \(a_n \in X_n\) for all \(n \geq 1\).
  In particular \(a_n \in E\) for all \(n\), and \(\sup(E) - 1 / n \leq a_n \leq \sup(E)\) for all \(n\).
  But then we have \(\lim_{n \to \infty} a_n = \sup(E)\) by the squeeze test (\cref{6.4.14}).
\end{proof}

\begin{rmk}\label{8.4.6}
  In many special cases, one can obtain the conclusion of \cref{8.4.5} without using the axiom of choice.
  For instance, if \(E\) is a closed set then one can define \(a_n\) without choice by the formula \(a_n \coloneqq \inf(X_n)\);
  the extra hypothesis that \(E\) is closed will ensure that \(a_n\) lies in \(E\).
\end{rmk}

\begin{prop}\label{8.4.7}
  Let \(X\) and \(Y\) be sets, and let \(P(x, y)\) be a property pertaining to an object \(x \in X\) and an object \(y \in Y\) such that for every \(x \in X\) there is at least one \(y \in Y\) such that \(P(x, y)\) is true.
  Then there exists a function \(f : X \to Y\) such that \(P(x, f(x))\) is true for all \(x \in X\).
\end{prop}

\begin{proof}
  We first show that axiom of choice (\cref{8.1}) implies \(\exists\ f : X \to Y\) such that \(P(x, f(x))\) is true for all \(x \in X\).
  Define
  \[
    Y_x \coloneqq \{y \in Y : P(x, y) \text{ is true}\}
  \]
  for each \(x \in X\).
  Such a set exist by \cref{3.5} and is non-empty by the hypothesis.
  By \cref{3.10}, we know that the set
  \[
    \prod_{x \in X} Y_x = \Bigg\{(y_x)_{x \in X} \in (\bigcup_{x \in X} Y_x)^X : y_x \in Y_x \text{ for all } x \in X\Bigg\}
  \]
  exists.
  By axiom of choice (\cref{8.1}) we also know that the set \(\prod_{x \in X} Y_x\) is non-empty.
  Now we can choose an element \(f \in \prod_{x \in X} Y_x\).
  We know that \(f\) is a function with domain \(X\) and range \(Y\).
  Also, \(\forall x \in X\), we have an unique \(f(x) \in Y_x\).
  By the definition of \(Y_x\) we know that \(P(x, f(x))\) is true.
  Thus axiom of choice (\cref{8.1}) implies \(\exists\ f : X \to Y\) such that \(P(x, f(x))\) is true for all \(x \in X\).

  Now we show that if \(\forall x \in X\), \(\exists\ y \in Y\) such that \(P(x, y)\) is true and \(\exists\ f : X \to Y\) such that \(P(x, f(x))\) is true for all \(x \in X\), then axiom of choice (\cref{8.1}) is true.
  Using the definition of \(Y_x\) again we know that \(f(x) \in Y_x\), so \(Y_x \neq \emptyset\).
  By \cref{3.10} we can have a set \(\prod_{x \in X} Y_x\).
  We want to show that \(\prod_{x \in X} Y_x \neq \emptyset\).
  But this is true since \(f \in \prod_{x \in X} Y_x\).
  Thus \cref{8.4.7} implies axiom of choice (\cref{8.1}).
\end{proof}

\exercisesection

\begin{ex}\label{ex:8.4.1}
  Show that the axiom of choice implies \cref{8.4.7}.
  Conversely, show that if \cref{8.4.7} is true, then the axiom of choice is also true.
\end{ex}

\begin{proof}
  See \cref{8.4.7}.
\end{proof}

\begin{ex}\label{ex:8.4.2}
  Let \(I\) be a set, and for each \(\alpha \in I\) let \(X_{\alpha}\) be a non-empty set.
  Suppose that all the sets \(X_{\alpha}\) are disjoint from each other, i.e., \(X_{\alpha} \cap X_{\beta} = \emptyset\) for all distinct \(\alpha, \beta \in I\).
  Using the axiom of choice, show that there exists a set \(Y\) such that \(\#(Y \cap X_{\alpha}) = 1\) for all \(\alpha \in I\) (i.e., \(Y\) intersects each \(X_{\alpha}\) in exactly one element).
  Conversely, show that if the above statement was true for an arbitrary choice of sets \(I\) and non-empty disjoint sets \(X_{\alpha}\), then the axiom of choice is true.
\end{ex}

\begin{proof}
  We first show that axiom of choice (\cref{8.1}) implies there exists a set \(Y\) such that \(\#(Y \cap X_{\alpha}) = 1\) for all \(\alpha \in I\).
  By \cref{8.1}, the set \(\prod_{\alpha \in I} X_{\alpha}\) is non-empty.
  Let \(f \in \prod_{\alpha \in I} X_{\alpha}\) and let \(Y = f(I)\).
  Then we have
  \begin{align*}
     & \forall \alpha \in I, Y \cap X_{\alpha}                                                                                                         \\
     & = f(I) \cap X_{\alpha}                                                                                                                          \\
     & = \Bigg(\bigcup_{\beta \in I} \{f(\beta)\}\Bigg) \cap X_{\alpha}                                                                                \\
     & = \Bigg(\{f(\alpha)\} \cup \bigg(\bigcup_{\beta \in I : \beta \neq \alpha} \{f(\beta)\}\bigg)\Bigg) \cap X_{\alpha}                             \\
     & = \{f(\alpha)\} \cap X_{\alpha}                                                                                     &  & \text{(by hypothesis)} \\
     & = \{f(\alpha)\}.
  \end{align*}
  Thus \(\#(Y \cap X_{\alpha}) = 1\) for every \(\alpha \in I\).
  We conclude that axiom of choice (\cref{8.1}) implies there exists a set \(Y\) such that \(\#(Y \cap X_{\alpha}) = 1\) for all \(\alpha \in I\).

  Now we show that if there exists a set \(Y\) such that \(\#(Y \cap X_{\alpha}) = 1\) for all \(\alpha \in I\), then axiom of choice (\cref{8.1}) is true.
  Since we know that \(\exists\ Y : \#(Y \cap X_{\alpha}) = 1\) for all \(\alpha \in I\), we can let \(Y \cap X_{\alpha} = \{x_{\alpha}\}\) for some \(x_{\alpha} \in X_{\alpha}\).
  Thus by \cref{3.6} we have a function \(f : I \to \bigcup_{\alpha \in I} X_{\alpha}\) such that \(f(\alpha) = x_{\alpha} \in X_{\alpha}\) for all \(\alpha \in I\).
  But this means \(f \in \prod_{\alpha \in I} X_{\alpha}\), so \(\prod_{\alpha \in I} X_{\alpha} \neq \emptyset\), and axiom of choice (\cref{8.1}) is true.
  Thus if there exists a set \(Y\) such that \(\#(Y \cap X_{\alpha}) = 1\) for all \(\alpha \in I\), then axiom of choice (\cref{8.1}) is true.
\end{proof}

\begin{ex}\label{ex:8.4.3}
  Let \(A\) and \(B\) be sets such that there exists a surjection \(g : B \to A\).
  Using the axiom of choice, show that there exists an injection \(f: A \to B\) with \(g \circ f : A \to A\) the identity map;
  in particular \(A\) has lesser or equal cardinality to \(B\) in the sense of \cref{ex:3.6.7}.
  Compare this with \cref{ex:3.6.8}.
  Conversely, show that if the above statement is true for arbitrary sets \(A, B\) and surjections \(g : B \to A\), then the axiom of choice is true.
\end{ex}

\begin{proof}
  We first show that if \(g : B \to A\) is a surjection, then there exists an injection \(f : A \to B\).
  Let \(g^{-1}(A)\) be the inverse image of \(A\).
  Since \(g\) is surjective, we know that \(g^{-1}(A) = \bigcup_{a \in A} g^{-1}(\{a\}) = B\).
  By axiom of choice (\cref{8.1}), we know that the set \(\prod_{a \in A} g^{-1}(\{a\}) \neq \emptyset\).
  Let \(f \in \prod_{a \in A} g^{-1}(\{a\})\).
  We know that \(f\) has domain \(A\) and range \(\bigcup_{a \in A} g^{-1}(\{a\}) = B\).
  We now show that \(f\) is injective.
  \(\forall a_1, a_2 \in A\), if \(a_1 \neq a_2\), then we must have \(g^{-1}(\{a_1\}) \cap g^{-1}(\{a_2\}) = \emptyset\).
  Otherwise by \cref{3.4.4} \(\exists\ b \in B\) such that \(g(b) = a_1 \land g(b) = a_2\), a contradiction.
  By the definition of \(f\), we know that \(f(a_1) \in g^{-1}(\{a_1\}) \land f(a_2) \in g^{-1}(\{a_2\})\).
  Since \(g^{-1}(\{a_1\}) \cap g^{-1}(\{a_2\}) = \emptyset\), we know that \(f(a_1) \neq f(a_2)\), thus \(f\) is injective.

  Next we show that \(g \circ f : A \to A\) is an identity map.
  \begin{align*}
             & \forall a \in A, f(a) \in g^{-1}(\{a\})                 \\
    \implies & g(f(a)) = a.                            &  & \by{3.4.4}
  \end{align*}
  Thus \(g \circ f : A \to A\) is an identity map.

  Now we show that if \(g : B \to A\) is a surjection and there exists an injection \(f : A \to B\) where \(g \circ f : A \to A\) is an identity map, then the axiom of choice is true.
  Let \(A_a = \{a \in A : g(f(a)) = a\}\).
  Since \(g \circ f\) is an identity map, \(\forall a_1, a_2 \in A\), we have \(a_1 \neq a_2 \implies g(f(a_1)) \neq g(f(a_2))\).
  Thus \(\#(A_a) = 1\) and \(\forall a_1, a_2 \in A\), \(a_1 \neq a_2 \implies A_{a_1} \cap A_{a_2} = \emptyset\).
  Also we have \(A \cap A_a = A_a\) for every \(a \in A\), and thus \(\#(A \cap A_a) = 1\).
  So by \cref{ex:8.4.2} we know that axiom of choice (\cref{8.1}) is true.
\end{proof}