\section{Monotone functions and derivatives}\label{i:sec:10.3}

\begin{prop}\label{i:10.3.1}
  Let \(X\) be a subset of \(\R\), let \(x_0 \in X\) be a limit point of \(X\), and let \(f : X \to \R\) be a function.
  If \(f\) is monotone increasing and \(f\) is differentiable at \(x_0\), then \(f'(x_0) \geq 0\).
  If f is monotone decreasing and \(f\) is differentiable at \(x_0\), then \(f'(x_0) \leq 0\).
\end{prop}

\begin{proof}
  First, suppose that \(f\) is monotone increasing.
  Since
  \begin{align*}
             & \forall x \in X \setminus \set{x_0}, x \neq x_0    \\
    \implies & \begin{dcases}
                 x < x_0 \\
                 x > x_0 \\
               \end{dcases}                                      \\
    \implies & \begin{dcases}
                 (x - x_0 < 0) \land \big(f(x) - f(x_0) \leq 0\big) \\
                 (x - x_0 > 0) \land \big(f(x) - f(x_0) \geq 0\big) \\
               \end{dcases} &  & \by{i:9.8.1} \\
    \implies & \dfrac{f(x) - f(x_0)}{x - x_0} \geq 0,
  \end{align*}
  by \cref{i:9.3.14} we have \(f'(x_0) \geq 0\).

  Now suppose that \(f\) is monotone decreasing.
  Since
  \begin{align*}
             & \forall x \in X \setminus \set{x_0}, x \neq x_0    \\
    \implies & \begin{dcases}
                 x < x_0 \\
                 x > x_0 \\
               \end{dcases}                                      \\
    \implies & \begin{dcases}
                 (x - x_0 < 0) \land \big(f(x) - f(x_0) \geq 0\big) \\
                 (x - x_0 > 0) \land \big(f(x) - f(x_0) \leq 0\big) \\
               \end{dcases} &  & \by{i:9.8.1} \\
    \implies & \dfrac{f(x) - f(x_0)}{x - x_0} \leq 0,
  \end{align*}
  by \cref{i:9.3.14} we have \(f'(x_0) \leq 0\).
\end{proof}

\begin{rmk}\label{i:10.3.2}
  We have to assume that \(f\) is differentiable at \(x_0\);
  There exist monotone functions which are not always differentiable, and of course if \(f\) is not differentiable at \(x_0\) we cannot possibly conclude that \(f'(x_0) \geq 0\) or \(f'(x_0) \leq 0\).
\end{rmk}

\begin{note}
  One might naively guess that if \(f\) were strictly monotone increasing, and \(f\) was differentiable at \(x_0\), then the derivative \(f'(x_0)\) would be strictly positive instead of merely non-negative.
  Unfortunately, this is not always the case.
\end{note}

\begin{prop}\label{i:10.3.3}
  Let \(a < b\), and let \(f : [a, b] \to \R\) be a differentiable function.
  If \(f'(x) > 0\) for all \(x \in [a, b]\), then \(f\) is strictly monotone increasing.
  If \(f'(x) < 0\) for all \(x \in [a, b]\), then \(f\) is strictly monotone decreasing.
  If \(f'(x) = 0\) for all \(x \in [a, b]\), then \(f\) is a constant function.
\end{prop}

\begin{proof}
  We first show that if \(f'(x) > 0\) for all \(x \in [a, b]\), then \(f\) is strictly monotone increasing.
  Let \(x_1, x_2 \in [a, b]\) and \(x_1 < x_2\).
  Since \(f\) is differentiable on \([a, b]\), by \cref{i:ex:10.1.1} we know that \(f\) is differentiable on \((x_1, x_2)\), and by \cref{i:10.1.12} \(f\) is continuous on \([x_1, x_2]\).
  By mean value theorem (\cref{i:10.2.9}) \(\exists c \in (x_1, x_2)\) such that \(f'(c) = \dfrac{f(x_2) - f(x_1)}{x_2 - x_1}\).
  Since \(c \in (x_1, x_2)\), we have \(c \in [a, b]\).
  Now we split into three cases:
  \begin{itemize}
    \item If \(f'(x) > 0\) for all \(x \in [a, b]\), then we have
          \begin{align*}
                     & f'(c) > 0                                            \\
            \implies & \dfrac{f(x_2) - f(x_1)}{x_2 - x_1} > 0               \\
            \implies & f(x_2) - f(x_1) > 0                    & (x_2 > x_1) \\
            \implies & f(x_2) > f(x_1).
          \end{align*}
          Since \(x_1, x_2\) was arbitrary, by \cref{i:9.8.1} we conclude that \(f\) is strictly monotone increasing.
    \item If \(f'(x) < 0\) for all \(x \in [a, b]\), then we have
          \begin{align*}
                     & f'(c) < 0                                            \\
            \implies & \dfrac{f(x_2) - f(x_1)}{x_2 - x_1} < 0               \\
            \implies & f(x_2) - f(x_1) < 0                    & (x_2 > x_1) \\
            \implies & f(x_2) < f(x_1).
          \end{align*}
          Since \(x_1, x_2\) was arbitrary, by \cref{i:9.8.1} we conclude that \(f\) is strictly monotone decreasing.
    \item If \(f'(x) = 0\) for all \(x \in [a, b]\), then we have
          \begin{align*}
                     & f'(c) = 0                                            \\
            \implies & \dfrac{f(x_2) - f(x_1)}{x_2 - x_1} = 0               \\
            \implies & f(x_2) - f(x_1) = 0                    & (x_2 > x_1) \\
            \implies & f(x_2) = f(x_1).
          \end{align*}
          Since \(x_1, x_2\) was arbitrary, we conclude that \(f\) is a constant function.
  \end{itemize}
\end{proof}

\exercisesection

\begin{ex}\label{i:ex:10.3.1}
  Prove \cref{i:10.3.1}.
\end{ex}

\begin{proof}
  See \cref{i:10.3.1}.
\end{proof}

\begin{ex}\label{i:ex:10.3.2}
  Give an example of a function \(f : (-1, 1) \to \R\) which is continuous and monotone increasing, but which is not differentiable at \(0\).
  Explain why this does not contradict \cref{i:10.3.1}.
\end{ex}

\begin{proof}
  Define \(f\) as follow
  \[
    \forall x \in (-1, 1), f(x) = \begin{dcases}
      x  & \text{if } x \in (-1, 0), \\
      2x & \text{if } x \in [0, 1).
    \end{dcases}
  \]
  Then \(f\) is monotone increasing, \(f(0+) \geq 0\) and \(f(0-) < 0\).
  Since \(f(0+) \neq f(0-)\), by \cref{i:ac:9.5.1} \(f\) is not continuous at \(0\), and by \cref{i:10.1.10} \(f\) is not differentiable at \(0\).
  This does not contradict to \cref{i:10.3.1} since \(0\) is not given to be differentiable.
\end{proof}

\begin{ex}\label{i:ex:10.3.3}
  Give an example of a function \(f : \R \to \R\) which is strictly monotone increasing and differentiable, but whose derivative at \(0\) is zero.
  Explain why this does not contradict \cref{i:10.3.1} or \cref{i:10.3.3}.
\end{ex}

\begin{proof}
  Let \(f(x) = x^3\).
  By \cref{i:ex:10.1.5} \(f\) is differentiable on \(\R\) and \(f'(x) = 3x^2\), thus \(f'(0) = 0\).
  If \(x, y \in \R\) and \(x < y\), then \(x^3 < y^3\), thus by \cref{i:9.8.1} \(f\) is strictly monotone increasing.
  This does not contradict to \cref{i:10.3.1} since \(f'(0) = 0 \geq 0\).
  This does not contradict to \cref{i:10.3.3} since \(\forall x \in \R\), \(3x^2 \geq 0\).
\end{proof}

\begin{ex}\label{i:ex:10.3.4}
  Prove \cref{i:10.3.3}.
\end{ex}

\begin{proof}
  See \cref{i:10.3.3}.
\end{proof}

\begin{ex}\label{i:ex:10.3.5}
  Give an example of a subset \(X \subseteq \R\) and a function \(f : X \to \R\) which is differentiable on \(X\), is such that \(f'(x) > 0\) for all \(x \in X\), but \(f\) is not strictly monotone increasing.
\end{ex}

\begin{proof}
  Let \(X = [0, 0.5] \cup [1, 2]\) and let \(f : X \to \R\) be the following function
  \[
    \forall x \in X, f(x) = \begin{dcases}
      2x & \text{if } x \in [0, 0.5], \\
      x  & \text{if } x \in [1, 2].
    \end{dcases}
  \]
  By \cref{i:ex:10.1.5} we know that \(x\) and \(2x\) are differentiable and
  \[
    \forall x \in X, f'(x) = \begin{dcases}
      2 & \text{if } x \in [0, 0.5], \\
      1 & \text{if } x \in [1, 2].
    \end{dcases}
  \]
  So we have \(f'(x) > 0\) for every \(x \in X\).
  Since \(0.5 < 1\) and \(f(0.5) = f(1) = 1\), by \cref{i:9.8.1} \(f\) is not strictly monotone increasing.
\end{proof}
