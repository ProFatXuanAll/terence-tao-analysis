\section{Fundamentals}\label{sec:3.1}

\begin{defn}\label{3.1.1}
  We define a \emph{set} \(A\) to be any unordered collection of objects.
  If \(x\) is an object, we say that \emph{\(x\) is an element of \(A\)} or \(x \in A\) if \(x\) lies in the collection;
  otherwise we say that \(x \notin A\).
\end{defn}

\begin{ax}[Sets are objects]\label{3.1}
  If \(A\) is a set, then \(A\) is also an object.
  In particular, given two sets \(A\) and \(B\), it is meaningful to ask whether \(A\) is also an element of \(B\).
\end{ax}

\setcounter{thm}{2}
\begin{rmk}\label{3.1.3}
  There is a special case of set theory, called ``pure set theory'', in which \emph{all} objects are sets;
  for instance the number \(0\) might be identified with the empty set \(\emptyset = \{\}\), the number \(1\) might be identified with \(\{0\} = \{\{\}\}\), the number \(2\) might be identified with \(\{0, 1\} = \{\{\}, \{\{\}\}\}\), and so forth.
  From a logical point of view, pure set theory is a simpler theory, since one only has to deal with sets and not with objects;
  however, from a conceptual point of view it is often easier to deal with impure set theories in which some objects are not considered to be sets.
  The two types of theories are more or less equivalent for the purposes of doing mathematics, and so we shall take an agnostic position as to whether all objects are sets or not.
\end{rmk}

\begin{defn}[Equality of sets]\label{3.1.4}
  Two sets \(A\) and \(B\) are \emph{equal}, \(A = B\), iff every element of \(A\) is an element of \(B\) and vice versa.
  To put it another way, \(A = B\) if and only if every element \(x\) of \(A\) belongs also to \(B\), and every element \(y\) of \(B\) belongs also to \(A\).
\end{defn}

\begin{ac}\label{ac:3.1.1}
  The definition of equality in \cref{3.1.4} is reflexive, symmetric and transitive.
\end{ac}

\begin{proof}
  We first prove that \cref{3.1.4} is reflexive.
  Let \(A\) be a set.
  Since
  \[
    \forall x : x \in A \implies x \in A,
  \]
  we have \cref{3.1.4} is reflexive, i.e., \(A = A\).

  Next we prove that \cref{3.1.4} is symmetric.
  Let \(A, B\) be sets and suppose \(A = B\).
  Since
  \[
    (\forall x : x \in A \iff x \in B) \iff (\forall x : x \in B \iff x \in A),
  \]
  we have \cref{3.1.4} is symmetric, i.e., \(A = B \iff B = A\).

  Finally, we prove that \cref{3.1.4} is transitive.
  Let \(A, B, C\) be sets and suppose \(A = B\) and \(B = C\).
  Since
  \[
    (\forall x : (x \in A \implies x \in B) \land (x \in B \implies x \in C)) \implies (\forall x : x \in A \implies x \in C),
  \]
  we have \cref{3.1.4} is transitive, i.e., \(A = B \land B = C \implies A = C\).
\end{proof}

\begin{note}
  Observe that if \(x \in A\) and \(A = B\), then \(x \in B\), by \cref{3.1.4}.
  Thus the ``is an element of'' relation \(\in\) obeys the axiom of substitution.
  Because of this, any new operation we define on sets will also obey the axiom of substitution, as long as we can define that operation purely in terms of the relation \(\in\).
\end{note}

\begin{note}
  Next, we turn to the issue of exactly which objects are sets and which objects are not.
  The situation is analogous to how we defined the natural numbers in the previous chapter;
  we started with a single natural number, \(0\), and started building more numbers out of \(0\) using the increment operation.
  We will try something similar here, starting with a single set, the \emph{empty set},
  and building more sets out of the empty set by various operations.
  We begin by postulating the existence of the empty set.
\end{note}

\begin{ax}[Empty set]\label{3.2}
  There exists a set \(\emptyset\), known as the empty set, which contains no elements, i.e., for every object \(x\) we have \(x \notin \emptyset\).
\end{ax}

\begin{note}
  The empty set is also denoted \(\{\}\).
\end{note}

\begin{ac}\label{ac:3.1.2}
  There can only be one empty set;
  if there were two sets \(\emptyset\) and \(\emptyset'\) which were both empty, then they would be equal to each other.
\end{ac}

\begin{proof}
  Suppose there exist two empty set \(\emptyset\) and \(\emptyset'\).
  Then we have
  \begin{align*}
         & (\forall x : (x \in \emptyset \implies x \in \emptyset') \land (x \in \emptyset' \implies x \in \emptyset)) &  & \text{(vacuously true)}  \\
    \iff & (\forall x : x \in \emptyset \iff x \in \emptyset')                                                                                       \\
    \iff & \emptyset = \emptyset'.                                                                                     &  & \text{(by \cref{3.1.4})}
  \end{align*}
\end{proof}

\begin{note}
  If a set is not equal to the empty set, we call it \emph{non-empty}.
\end{note}

\setcounter{thm}{5}
\begin{lem}[Single choice]\label{3.1.6}
  Let \(A\) be a non-empty set.
  Then there exists an object \(x\) such that \(x \in A\).
\end{lem}

\begin{proof}
  We prove by contradiction.
  Suppose there does not exist any object \(x\) such that \(x \in A\).
  Then for all objects \(x\), we have \(x \notin A\).
  Also, by \cref{3.2} we have \(x \notin \emptyset\).
  Thus \(x \in A \iff x \in \emptyset\) (both statements are equally false), and so \(A = \emptyset\) by \cref{3.1.4}, a contradiction.
\end{proof}

\begin{rmk}\label{3.1.7}
  The above Lemma asserts that given any non-empty set \(A\), we are allowed to ``choose'' an element \(x\) of \(A\) which demonstrates this non-emptyness.
  Later on (in \cref{3.5.12}) we will show that given any finite number of non-empty sets, say \(A_1, \dots, A_n\), it is possible to choose one element \(x_1, \dots, x_n\) from each set \(A_1, \dots, A_n\);
  this is known as ``finite choice''.
  However, in order to choose elements from an infinite number of sets, we need an additional axiom, the \emph{axiom of choice} (\cref{8.1}).
\end{rmk}

\begin{rmk}\label{3.1.8}
  Note that the empty set is \emph{not} the same thing as the natural number \(0\).
  One is a set;
  the other is a number.
  However, it is true that the \emph{cardinality} of the empty set is \(0\).
\end{rmk}

\begin{ax}[Singleton sets and pair sets]\label{3.3}
  If \(a\) is an object, then there exists a set \(\{a\}\) whose only element is \(a\), i.e., for every object \(y\), we have \(y \in \{a\}\) if and only if \(y = a\);
  we refer to \(\{a\}\) as the \emph{singleton set} whose element is \(a\).
  Furthermore, if \(a\) and \(b\) are objects, then there exists a set \(\{a, b\}\) whose only elements are \(a\) and \(b\);
  i.e., for every object \(y\), we have \(y \in \{a, b\}\) if and only if \(y = a\) or \(y = b\);
  we refer to this set as the \emph{pair set} formed by \(a\) and \(b\).
\end{ax}

\begin{rmk}\label{3.1.9}
  There is only one singleton set for each object \(a\).
  Similarly, given any two objects \(a\) and \(b\), there is only one pair set formed by \(a\) and \(b\).
  Thus the singleton set axiom is in fact redundant, being a consequence of the pair set axiom.
  Conversely, the pair set axiom will follow from the singleton set axiom and the pairwise union axiom (\cref{3.4}).
\end{rmk}

\begin{proof}
  We first show the uniqueness of singleton set.
  Suppose there exists two sets \(A\) and \(A'\) which are singleton sets of object \(a\).
  Then we have
  \begin{align*}
         & (\forall x : x \in A \iff x = a) \land (\forall x : x \in A' \iff x = a) &  & \text{(by \cref{3.3})}   \\
    \iff & \forall x : x \in A \iff x \in A'                                                                      \\
    \iff & A = A'.                                                                  &  & \text{(by \cref{3.1.4})}
  \end{align*}

  Next we show the uniqueness of pair set.
  Suppose there exists two sets \(X\) and \(X'\) which are pair sets of object \(a\) and \(b\).
  Then we have
  \begin{align*}
         & (\forall x : x \in X \iff (x = a) \lor (x = b))                                      \\
         & \land (\forall x : x \in X' \iff (x = a) \lor (x = b)) &  & \text{(by \cref{3.3})}   \\
    \iff & \forall x : x \in X \iff x \in X'                                                    \\
    \iff & X = X'.                                                &  & \text{(by \cref{3.1.4})}
  \end{align*}
\end{proof}

\begin{eg}\label{3.1.10}
  Since \(\emptyset\) is a set (and hence an object), so is the singleton set \(\{\emptyset\}\), i.e., the set whose only element is \(\emptyset\), is a set (and it is not the same set as \(\emptyset\), \(\{\emptyset\} \neq \emptyset\)).
  Similarly, the singleton set \(\{\{\emptyset\}\}\) and the pair set \(\{\emptyset, \{\emptyset\}\}\) are also sets.
  These three sets are not equal to each other.
\end{eg}

\begin{ax}[Pairwise union]\label{3.4}
  Given any two sets \(A\), \(B\), there exists a set \(A \cup B\), called the \emph{union} \(A \cup B\) of \(A\) and \(B\), whose elements consist of all the elements which belong to \(A\) or \(B\) or both.
  In other words, for any object \(x\),
  \[
    x \in A \cup B \iff (x \in A \lor x \in B).
  \]
\end{ax}

\setcounter{thm}{11}
\begin{rmk}\label{3.1.12}
  If \(A\), \(B\), \(A'\) are sets, and \(A\) is equal to \(A'\), then \(A \cup B\) is equal to \(A' \cup B\).
  Similarly if \(B'\) is a set which is equal to \(B\), then \(A \cup B\) is equal to \(A \cup B'\).
  Thus the operation of union obeys the axiom of substitution, and is thus well-defined on sets.
\end{rmk}

\begin{proof}
  Suppose \(A, A', B\) are sets such that \(A = A'\).
  Then we have
  \begin{align*}
         & \forall x : x \in A \cup B                               \\
    \iff & x \in A \lor x \in B       &  & \text{(by \cref{3.4})}   \\
    \iff & x \in A' \lor x \in B      &  & \text{(by \cref{3.1.4})} \\
    \iff & x \in A' \cup B.           &  & \text{(by \cref{3.4})}
  \end{align*}

  Similarly, suppose \(A, B, B'\) are sets such that \(B = B'\).
  Then we have
  \begin{align*}
         & \forall x : x \in A \cup B                               \\
    \iff & x \in A \lor x \in B       &  & \text{(by \cref{3.4})}   \\
    \iff & x \in A \lor x \in B'      &  & \text{(by \cref{3.1.4})} \\
    \iff & x \in A \cup B'.           &  & \text{(by \cref{3.4})}
  \end{align*}
\end{proof}

\begin{lem}\label{3.1.13}
  If \(a\) and \(b\) are objects, then \(\{a, b\} = \{a\} \cup \{b\}\).
  If \(A\), \(B\), \(C\) are sets, then the union operation is commutative (i.e., \(A \cup B = B \cup A\)) and associative (i.e., \((A \cup B) \cup C = A \cup (B \cup C)\)).
  Also, we have \(A \cup A = A \cup \emptyset = \emptyset \cup A = A\).
\end{lem}

\begin{proof}
  We first show that \(\{a, b\} = \{a\} \cup \{b\}\).
  By \cref{3.3}, the sets \(\{a\}, \{b\}, \{a, b\}\) exist.
  And by \cref{3.4}, the set \(\{a\} \cup \{b\}\) exists.
  Then we have
  \begin{align*}
         & (\forall x : x \in \{a, b\} \iff x = a \lor x = b)             &  & \text{(by \cref{3.3})}   \\
    \iff & (\forall x : x \in \{a, b\} \iff x \in \{a\} \lor x \in \{b\}) &  & \text{(by \cref{3.3})}   \\
    \iff & (\forall x : x \in \{a, b\} \iff x \in \{a\} \cup \{b\})       &  & \text{(by \cref{3.4})}   \\
    \iff & \{a, b\} = \{a\} \cup \{b\}.                                   &  & \text{(by \cref{3.1.4})}
  \end{align*}

  Next we show the commutative identity of union sets.
  Suppose that \(A, B\) are sets.
  By \cref{3.4}, the sets \(A \cup B\) and \(B \cup A\) exists.
  Then we have
  \begin{align*}
         & (\forall x : x \in A \cup B \iff x \in A \lor x \in B) &  & \text{(by \cref{3.4})}   \\
    \iff & (\forall x : x \in A \cup B \iff x \in B \lor x \in A)                               \\
    \iff & (\forall x : x \in A \cup B \iff x \in B \cup A)       &  & \text{(by \cref{3.4})}   \\
    \iff & A \cup B = B \cup A.                                   &  & \text{(by \cref{3.1.4})}
  \end{align*}

  Next we show the associativity identity of union sets.
  By \cref{3.1.4}, we need to show that every element \(x\) of \((A \cup B) \cup C\) is an element of \(A \cup (B \cup C)\), and vice versa.
  So suppose first that \(x\) is an element of \((A \cup B) \cup C\).
  By \cref{3.4}, this means that at least one of \(x \in A \cup B\) or \(x \in C\) is true.
  We now divide into two cases.
  If \(x \in C\), then by \cref{3.4} again \(x \in B \cup C\), and so by \cref{3.4} again we have \(x \in A \cup (B \cup C)\).
  Now suppose instead \(x \in A \cup B\), then by \cref{3.4} again \(x \in A\) or \(x \in B\).
  If \(x \in A\) then \(x \in A \cup (B \cup C)\) by \cref{3.4}, while if \(x \in B\) then by consecutive applications of \cref{3.4} we have \(x \in B \cup C\) and hence \(x \in A \cup (B \cup C)\).
  Thus in all cases we see that every element of \((A \cup B) \cup C\) lies in \(A \cup (B \cup C)\).
  A similar argument shows that every element of \(A \cup (B \cup C)\) lies in \((A \cup B) \cup C\), and so \((A \cup B) \cup C = A \cup (B \cup C) \) as desired.

  Finally we show that \(A \cup A = A \cup \emptyset = \emptyset \cup A = A\).
  Suppose that \(A\) is a set.
  Then we have
  \begin{align*}
         & (\forall x : x \in A \iff x \in A \lor x \in A)                                       \\
    \iff & (\forall x : x \in A \iff x \in A \cup A)               &  & \text{(by \cref{3.4})}   \\
    \iff & (A = A \cup A)                                          &  & \text{(by \cref{3.1.4})} \\
    \iff & (\forall x : x \in A \iff x \in A \lor x \in \emptyset) &  & \text{(vacuously true)}  \\
    \iff & A = A \cup \emptyset                                    &  & \text{(by \cref{3.1.4})} \\
    \iff & (\forall x : x \in A \iff x \in \emptyset \lor x \in A) &  & \text{(vacuously true)}  \\
    \iff & A = \emptyset \cup A.                                   &  & \text{(by \cref{3.1.4})}
  \end{align*}
\end{proof}

\begin{note}
  Because of \cref{3.1.13}, we do not need to use parentheses to denote multiple unions, thus for instance we can write \(A \cup B \cup C\) instead of \((A \cup B) \cup C\) or \(A \cup (B \cup C)\).
  Similarly for unions of four sets, \(A \cup B \cup C \cup D\), etc.
\end{note}

\begin{rmk}\label{3.1.14}
  While the operation of union has some similarities with addition, the two operations are \emph{not} identical.
\end{rmk}

\begin{note}
  \cref{3.4} allows us to define triplet sets, quadruplet sets, and so forth: if \(a, b, c\) are three objects, we define \(\{a, b, c\} \coloneqq \{a\} \cup \{b\} \cup \{c\}\);
  if \(a, b, c, d\) are four objects, then we define \(\{a, b, c, d\} \coloneqq \{a\} \cup \{b\} \cup \{c\} \cup \{d\}\), and so forth.
  On the other hand, we are not yet in a position to define sets consisting of \(n\) objects for any given natural number \(n\);
  this would require iterating the above construction ``\(n\) times'', but the concept of \(n\)-fold iteration has not yet been rigorously defined.
  For similar reasons, we cannot yet define sets consisting of infinitely many objects, because that would require iterating the axiom of pairwise union (\cref{3.4}) infinitely often, and it is not clear at this stage that one can do this rigorously.
  Later on, we will introduce other axioms of set theory which allow one to construct arbitrarily large, and even infinite, sets.
\end{note}

\begin{defn}[Subsets]\label{3.1.15}
  Let \(A\), \(B\) be sets.
  We say that \(A\) is a \emph{subset} of \(B\), denoted \(A \subseteq B\), iff every element of \(A\) is also an element of \(B\), i.e.
  \[
    \text{For any object } x, x \in A \implies x \in B.
  \]
  We say that \(A\) is a \emph{proper subset} of \(B\), denoted \(A \subsetneq B\), if \(A \subseteq B\) and \(A \neq B\).
\end{defn}

\begin{rmk}\label{3.1.16}
  Because these definitions involve only the notions of equality and the ``is an element of'' relation, both of which already obey the axiom of substitution, the notion of subset also automatically obeys the axiom of substitution.
  Thus for instance if \(A \subseteq B\) and \(A = A'\), then \(A' \subseteq B\).
\end{rmk}

\begin{eg}\label{3.1.17}
  Given any set \(A\), we always have \(A \subseteq A\) and \(\emptyset \subseteq A\).
\end{eg}

\begin{proof}
  Suppose that \(A\) is a set.
  Then we have
  \begin{align*}
    \top \iff & (\forall x : x \in A \implies x \in A)                                \\
    \iff      & A \subseteq A.                         &  & \text{(by \cref{3.1.15})}
  \end{align*}
  And we also have
  \begin{align*}
         & (\forall x : x \in \emptyset \implies x \in A) &  & \text{(vacuously true)}   \\
    \iff & \emptyset \subseteq A.                         &  & \text{(by \cref{3.1.15})}
  \end{align*}
\end{proof}

\begin{prop}[Sets are partially ordered by set inclusion]\label{3.1.18}
  Let \(A\), \(B\), \(C\) be sets.
  If \(A \subseteq B\) and \(B \subseteq C\) then \(A \subseteq C\).
  \(A \subseteq B\) and \(B \subseteq A\) if and only if \(A = B\).
  Finally, if \(A \subsetneq B\) and \(B \subsetneq C\) then \(A \subsetneq C\).
\end{prop}

\begin{proof}
  We first show that \(A \subseteq B \land B \subseteq C \implies A \subseteq C\).
  Suppose that \(A \subseteq B\) and \(B \subseteq C\).
  To prove that \(A \subseteq C\), we have to prove that every element of \(A\) is an element of \(C\).
  So, let us pick an arbitrary element \(x\) of \(A\).
  Then, since \(A \subseteq B\), \(x\) must then be an element of \(B\).
  But then since \(B \subseteq C\), \(x\) is an element of \(C\).
  Thus every element of \(A\) is indeed an element of \(C\), as claimed.

  Next we show that \(A \subseteq B \land B \subseteq A \iff A = B\).
  Suppose that \(A, B\) are sets and \(A \subseteq B \land B \subseteq A\).
  Then we have
  \begin{align*}
         & A \subseteq B \land B \subseteq A                                                                        \\
    \iff & (\forall x : (x \in A \implies x \in B) \land (x \in B \implies x \in A)) &  & \text{(by \cref{3.1.15})} \\
    \iff & (\forall x : x \in A \iff x \in B)                                                                       \\
    \iff & A = B.                                                                    &  & \text{(by \cref{3.1.4})}
  \end{align*}

  Finally we show that \(A \subsetneq B \land B \subsetneq C \implies A \subsetneq C\).
  Suppose that \(A, B, C\) are sets and \(A \subsetneq B \land B \subsetneq C\).
  Then we have
  \begin{align*}
             & A \subsetneq B \land B \subsetneq C                                                                                                          \\
    \implies & (\forall x : x \in A \implies x \in B) \land (A \neq B)                                                                                      \\
             & \land (\forall x : x \in B \implies x \in C) \land (B \neq C)                   &  & \text{(by \cref{3.1.15})}                               \\
    \implies & (\forall x : x \in A \implies x \in B)                                                                                                       \\
             & \land \lnot(\forall x : x \in A \iff x \in B)                                                                                                \\
             & \land (\forall x : x \in B \implies x \in C)                                                                                                 \\
             & \land (B \neq C)                                                                                                                             \\
    \implies & (\forall x : x \in A \implies x \in B)                                                                                                       \\
             & \land (\exists\ x : (x \in A \land x \notin B) \lor (x \in B \land x \notin A))                                                              \\
             & \land (\forall x : x \in B \implies x \in C)                                                                                                 \\
             & \land (B \neq C)                                                                                                                             \\
    \implies & (\forall x : x \in A \implies x \in B)                                                                                                       \\
             & \land (\exists\ x : x \in B \land x \notin A)                                   &  & \text{(since \(\forall x : x \in A \implies x \in B\))} \\
             & \land (\forall x : x \in B \implies x \in C)                                                                                                 \\
             & \land (B \neq C)                                                                                                                             \\
    \implies & (\forall x : x \in A \implies x \in B)                                                                                                       \\
             & \land (\exists\ x : x \in C \land x \notin A)                                   &  & \text{(since \(\forall x : x \in B \implies x \in C\))} \\
             & \land (\forall x : x \in B \implies x \in C)                                                                                                 \\
             & \land (B \neq C)                                                                                                                             \\
    \implies & (\forall x : x \in A \implies x \in C)                                                                                                       \\
             & \land (A \neq C) \land (B \neq C)                                                                                                            \\
    \implies & A \subseteq C \land A \neq C \land B \neq C                                     &  & \text{(by \cref{3.1.15})}                               \\
    \implies & A \subsetneq C \land B \neq C                                                   &  & \text{(by \cref{3.1.15})}                               \\
    \implies & A \subsetneq C.
  \end{align*}
\end{proof}

\setcounter{thm}{19}
\begin{rmk}\label{3.1.20}
  There is one important difference between the subset relation \(\subsetneq\) and the less than relation \(<\).
  Given any two distinct natural numbers \(n\), \(m\), we know that one of them is smaller than the other (\cref{2.2.13});
  however, given two distinct sets, it is not in general true that one of them is a subset of the other.
  we say that sets are only \emph{partially ordered}, whereas the natural numbers are \emph{totally ordered}.
\end{rmk}

\begin{rmk}\label{3.1.21}
  We should also caution that the subset relation \(\subseteq\) is not the same as the element relation \(\in\).
  It is important to distinguish sets from their elements, as they can have different properties.
  For instance, it is possible to have an infinite set consisting of finite numbers (the set \(\N\) of natural numbers is one such example), and it is also possible to have a finite set consisting of infinite objects
  (consider for instance the finite set \(\{\N, \Z, \Q, \R\}\), which has four elements, all of which are infinite).
\end{rmk}

\begin{ax}[Axiom of specification]\label{3.5}
  Let \(A\) be a set, and for each \(x \in A\), let \(P(x)\) be a property pertaining to \(x\) (i.e., \(P(x)\) is either a true statement or a false statement).
  Then there exists a set, called \(\{x \in A : P(x) \text{ is true}\}\) (or simply \(\{x \in A : P(x)\}\) for short), whose elements are precisely the elements \(x\) in \(A\) for which \(P(x)\) is true.
  In other words, for any object \(y\),
  \[
    y \in \{x \in A : P(x) \text{ is true}\} \iff (y \in A \text{ and } P(y) \text{ is true}).
  \]
\end{ax}

\begin{note}
  \cref{3.5} is also known as the \emph{axiom of separation}.
  We sometimes write \(\{x \in A \mid P(x)\}\) instead of \(\{x \in A : P(x)\}\);
  this is useful when we are using the colon ``:'' to denote something else.
\end{note}

\setcounter{thm}{22}
\begin{defn}[Intersections]\label{3.1.23}
  The intersection \(S_1 \cap S_2\) of two sets is defined to be the set
  \[
    S_1 \cap S_2 \coloneqq \{x \in S_1 : x \in S_2\}.
  \]
  In other words, \(S_1 \cap S_2\) consists of all the elements which belong to both \(S_1\) and \(S_2\).
  Thus, for all objects \(x\),
  \[
    x \in S_1 \cap S_2 \iff x \in S_1 \text{ and } x \in S_2.
  \]
\end{defn}

\begin{note}
  Two sets \(A\), \(B\) are said to be \emph{disjoint} if \(A \cap B = \emptyset\).
  This is not the same concept as being \emph{distinct}, \(A \neq B\).
  Meanwhile, the sets \(\emptyset\) and \(\emptyset\) are disjoint but not distinct.
\end{note}

\setcounter{thm}{26}
\begin{defn}[Difference sets]\label{3.1.27}
  Given two sets \(A\) and \(B\), we define the set \(A - B\) or \(A \setminus B\) to be the set \(A\) with any elements of \(B\) removed:
  \[
    A \setminus B \coloneqq \{x \in A : x \notin B\}.
  \]
\end{defn}

\begin{prop}[Sets form a boolean algebra]\label{3.1.28}
  Let \(A\), \(B\), \(C\) be sets, and let \(X\) be a set containing \(A\), \(B\), \(C\) as subsets.
  \begin{enumerate}
    \item (Minimal element) We have \(A \cup \emptyset = A\) and \(A \cap \emptyset = \emptyset\).
    \item (Maximal element) We have \(A \cup X = X\) and \(A \cap X = A\).
    \item (Identity) We have \(A \cap A = A\) and \(A \cup A = A\).
    \item (Commutativity) We have \(A \cup B = B \cup A\) and \(A \cap B = B \cap A\).
    \item (Associativity) We have \((A \cup B) \cup C = A \cup (B \cup C)\) and \((A \cap B) \cap C = A \cap (B \cap C)\).
    \item (Distributivity) We have \(A \cap (B \cup C) = (A \cap B) \cup (A \cap C)\) and \(A \cup (B \cap C) = (A \cup B) \cap (A \cup C)\).
    \item (Partition) We have \(A \cup (X \setminus A) = X\) and \(A \cap (X \setminus A) = \emptyset\).
    \item (De Morgan laws) We have \(X \setminus (A \cup B) = (X \setminus A) \cap (X \setminus B)\) and \(X \setminus (A \cap B) = (X \setminus A) \cup (X \setminus B)\).
  \end{enumerate}
\end{prop}

\begin{proof}{(a)}
  Suppose that \(A\) is a set.
  By \cref{3.1.13} we have \(A \cup \emptyset = A\).
  We only need to show that \(A \cap \emptyset = \emptyset\).
  \begin{align*}
    \top \iff & (\bot \iff \bot)                                                 &  & \text{(vacuously true)}   \\
    \iff      & (\forall x : x \in \emptyset \iff x \in \emptyset)               &  & \text{(vacuously true)}   \\
    \iff      & (\forall x : x \in \emptyset \iff x \in A \land x \in \emptyset)                                \\
    \iff      & (\forall x : x \in \emptyset \iff x \in A \cap \emptyset)        &  & \text{(by \cref{3.1.23})} \\
    \iff      & \emptyset = A \cap \emptyset.                                    &  & \text{(by \cref{3.1.4})}
  \end{align*}
\end{proof}

\begin{proof}{(b)}
  Suppose that \(A, X\) are sets and \(A \subseteq X\).
  Then we have
  \begin{align*}
    \top \iff                     & (\forall x : x \in X \implies x \in A \lor x \in X)                                \\
    \iff                          & (\forall x : x \in X \implies x \in A \cup X).      &  & \text{(by \cref{3.4})}    \\
    A \subseteq X \iff            & (\forall x : x \in A \implies x \in X)              &  & \text{(by \cref{3.1.15})} \\
    \iff                          & (\forall x : x \in A \lor x \in X \implies x \in X)                                \\
    \iff                          & (\forall x : x \in A \cup X \implies x \in X).      &  & \text{(by \cref{3.4})}    \\
    \top \land A \subseteq X \iff & (\forall x : x \in X \iff x \in A \cup X)                                          \\
    \iff                          & X = A \cup X.                                       &  & \text{(by \cref{3.1.4})}
  \end{align*}
  And we also have
  \begin{align*}
    \top \iff                     & (\forall x : x \in A \land x \in X \implies x \in A)                                \\
    \iff                          & (\forall x : x \in A \cap X \implies x \in A).       &  & \text{(by \cref{3.1.23})} \\
    A \subseteq X \iff            & (\forall x : x \in A \implies x \in X)               &  & \text{(by \cref{3.1.15})} \\
    \iff                          & (\forall x : x \in A \implies x \in A \land x \in X)                                \\
    \iff                          & (\forall x : x \in A \implies x \in A \cap X).       &  & \text{(by \cref{3.1.23})} \\
    \top \land A \subseteq X \iff & (\forall x : x \in A \cap X \iff x \in A)                                           \\
    \iff                          & A \cap X = A.                                        &  & \text{(by \cref{3.1.4})}
  \end{align*}
\end{proof}

\begin{proof}{(c)}
  Suppose that \(A\) is a set.
  By \cref{3.1.13} we have \(A \cup A = A\).
  We only need to show that \(A \cap A = A\).
  \begin{align*}
    \top \iff & (\forall x : x \in A \iff x \in A)                                              \\
    \iff      & (\forall x : x \in A \land x \in A \iff x \in A)                                \\
    \iff      & (\forall x : x \in A \cap A \iff x \in A)        &  & \text{(by \cref{3.1.23})} \\
    \iff      & A \cap A = A.                                    &  & \text{(by \cref{3.1.4})}
  \end{align*}
\end{proof}

\begin{proof}{(d)}
  Suppose that \(A, B\) are sets.
  Then we have
  \begin{align*}
         & (\forall x : x \in A \cup B \iff x \in A \lor x \in B) &  & \text{(by \cref{3.4})}   \\
    \iff & (\forall x : x \in A \cup B \iff x \in B \lor x \in A)                               \\
    \iff & (\forall x : x \in A \cup B \iff x \in B \cup A)       &  & \text{(by \cref{3.4})}   \\
    \iff & A \cup B = B \cup A.                                   &  & \text{(by \cref{3.1.4})}
  \end{align*}
  And we also have
  \begin{align*}
         & (\forall x : x \in A \cap B \iff x \in A \land x \in B) &  & \text{(by \cref{3.1.23})} \\
    \iff & (\forall x : x \in A \cap B \iff x \in B \land x \in A)                                \\
    \iff & (\forall x : x \in A \cap B \iff x \in B \cap A)        &  & \text{(by \cref{3.1.23})} \\
    \iff & A \cap B = B \cap A.                                    &  & \text{(by \cref{3.1.4})}
  \end{align*}
\end{proof}

\begin{proof}{(e)}
  Suppose that \(A, B, C\) are sets.
  Then we have
  \begin{align*}
         & (\forall x : x \in (A \cup B) \cup C \iff (x \in A \lor x \in B) \lor x \in C) &  & \text{(by \cref{3.4})}   \\
    \iff & (\forall x : x \in (A \cup B) \cup C \iff x \in A \lor (x \in B \lor x \in C))                               \\
    \iff & (\forall x : x \in (A \cup B) \cup C \iff x \in A \cup (B \cup C))             &  & \text{(by \cref{3.4})}   \\
    \iff & (A \cup B) \cup C = A \cup (B \cup C).                                         &  & \text{(by \cref{3.1.4})}
  \end{align*}
  And we also have
  \begin{align*}
         & (\forall x : x \in (A \cap B) \cap C \iff (x \in A \land x \in B) \land x \in C) &  & \text{(by \cref{3.1.23})} \\
    \iff & (\forall x : x \in (A \cap B) \cap C \iff x \in A \land (x \in B \land x \in C))                                \\
    \iff & (\forall x : x \in (A \cap B) \cap C \iff x \in A \cap (B \cap C))               &  & \text{(by \cref{3.1.23})} \\
    \iff & (A \cap B) \cap C = A \cap (B \cap C).                                           &  & \text{(by \cref{3.1.4})}
  \end{align*}
\end{proof}

\begin{proof}{(f)}
  Suppose that \(A, B, C\) are sets.
  Then we have
  \begin{align*}
         & \forall x : x \in A \cap (B \cup C)                                                 \\
    \iff & x \in A \land x \in B \cup C                         &  & \text{(by \cref{3.1.23})} \\
    \iff & x \in A \land (x \in B \lor x \in C)                 &  & \text{(by \cref{3.4})}    \\
    \iff & (x \in A \land x \in B) \lor (x \in A \land x \in C)                                \\
    \iff & (x \in A \cap B) \lor (x \in A \cap C)               &  & \text{(by \cref{3.1.23})} \\
    \iff & x \in (A \cap B) \cup (A \cap C).                    &  & \text{(by \cref{3.4})}
  \end{align*}
  Thus by \cref{3.1.4} we have \(A \cap (B \cup C) = (A \cap B) \cup (A \cap C)\).
  Similarly we have
  \begin{align*}
         & \forall x : x \in A \cup (B \cap C)                                                \\
    \iff & x \in A \lor x \in B \cap C                         &  & \text{(by \cref{3.4})}    \\
    \iff & x \in A \lor (x \in B \land x \in C)                &  & \text{(by \cref{3.1.23})} \\
    \iff & (x \in A \lor x \in B) \land (x \in A \lor x \in C)                                \\
    \iff & (x \in A \cup B) \land (x \in A \cup C)             &  & \text{(by \cref{3.4})}    \\
    \iff & x \in (A \cup B) \cap (A \cup C).                   &  & \text{(by \cref{3.1.23})}
  \end{align*}
  Thus by \cref{3.1.4} we have \(A \cup (B \cap C) = (A \cup B) \cap (A \cup C)\).
\end{proof}

\begin{proof}{(g)}
  Suppose that \(A, X\) are sets and \(A \subseteq X\).
  Then we have
  \begin{align*}
         & \forall x : x \in A \cup (X \setminus A)                                                 \\
    \iff & x \in A \lor x \in (X \setminus A)                     &  & \text{(by \cref{3.4})}       \\
    \iff & x \in A \lor (x \in X \land x \notin A)                &  & \text{(by \cref{3.1.27})}    \\
    \iff & (x \in A \lor x \in X) \land (x \in A \lor x \notin A)                                   \\
    \iff & (x \in A \lor x \in X) \land \top                                                        \\
    \iff & x \in A \lor x \in X                                                                     \\
    \iff & x \in A \cup X                                         &  & \text{(by \cref{3.4})}       \\
    \iff & x \in X.                                               &  & \text{(by \cref{3.1.28})(b)}
  \end{align*}
  Thus by \cref{3.1.4} we have \(A \cup (X \setminus A) = X\).
  Similarly we have
  \begin{align*}
         & \forall x : x \in A \cap (X \setminus A)                                \\
    \iff & x \in A \land x \in (X \setminus A)      &  & \text{(by \cref{3.1.23})} \\
    \iff & x \in A \land (x \in X \land x \notin A) &  & \text{(by \cref{3.1.27})} \\
    \iff & (x \in A \land x \notin A) \land x \in X                                \\
    \iff & \bot \land x \in X                                                      \\
    \iff & \bot                                                                    \\
    \iff & x \in \emptyset.                         &  & \text{(vacuously true)}
  \end{align*}
  Thus by \cref{3.1.4} we have \(A \cap (X \setminus A) = \emptyset\).
\end{proof}

\begin{proof}{(h)}
  Suppose that \(A, B, X\) are sets such that \(A \subseteq X\) and \(B \subseteq X\).
  Then we have
  \begin{align*}
         & \forall x : x \in X \setminus (A \cup B)                                                   \\
    \iff & x \in X \land x \notin (A \cup B)                           &  & \text{(by \cref{3.1.27})} \\
    \iff & x \in X \land \lnot (x \in A \cup B)                                                       \\
    \iff & x \in X \land \lnot (x \in A \lor x \in B)                  &  & \text{(by \cref{3.4})}    \\
    \iff & x \in X \land (x \notin A \land x \notin B)                                                \\
    \iff & (x \in X \land x \notin A) \land (x \in X \land x \notin B)                                \\
    \iff & (x \in X \setminus A) \land (x \in X \setminus B)           &  & \text{(by \cref{3.1.27})} \\
    \iff & x \in (X \setminus A) \cap (X \setminus B).                 &  & \text{(by \cref{3.1.23})}
  \end{align*}
  Thus by \cref{3.1.4} we have \(X \setminus (A \cup B) = (X \setminus A) \cap (X \setminus B)\).
  Similarly we have
  \begin{align*}
         & \forall x : x \in X \setminus (A \cap B)                                                  \\
    \iff & x \in X \land x \notin (A \cap B)                          &  & \text{(by \cref{3.1.27})} \\
    \iff & x \in X \land \lnot (x \in A \cap B)                                                      \\
    \iff & x \in X \land \lnot (x \in A \land x \in B)                &  & \text{(by \cref{3.1.23})} \\
    \iff & x \in X \land (x \notin A \lor x \notin B)                                                \\
    \iff & (x \in X \land x \notin A) \lor (x \in X \land x \notin B)                                \\
    \iff & (x \in X \setminus A) \lor (x \in X \setminus B)           &  & \text{(by \cref{3.1.27})} \\
    \iff & x \in (X \setminus A) \cup (X \setminus B).                &  & \text{(by \cref{3.4})}
  \end{align*}
  Thus by \cref{3.1.4} we have \(X \setminus (A \cap B) = (X \setminus A) \cup (X \setminus B)\).
\end{proof}

\begin{rmk}\label{3.1.29}
  The de Morgan laws are named after the logician Augustus De Morgan (1806 -- 1871), who identified them as one of the basic laws of set theory.
\end{rmk}

\begin{rmk}\label{3.1.30}
  The reader may observe a certain symmetry in the above laws between \(\cup\) and \(\cap\), and between \(X\) and \(\emptyset\).
  This is an example of \emph{duality} - two distinct properties or objects being dual to each other.
  In this case, the duality is manifested by the complementation relation \(A \mapsto X \setminus A\);
  the de Morgan laws assert that this relation converts unions into intersections and vice versa.
  (It also interchanges \(X\) and the empty set.)
  \cref{3.1.28} are collectively known as the \emph{laws of Boolean algebra}, after the mathematician George Boole (1815 -- 1864), and are also applicable to a number of other objects other than sets;
  it plays a particularly important role in logic.
\end{rmk}

\begin{ax}[Replacement]\label{3.6}
  Let \(A\) be a set.
  For any object \(x \in A\), and any object \(y\), suppose we have a statement \(P(x, y)\) pertaining to \(x\) and \(y\), such that for each \(x \in A\) there is at most one \(y\) for which \(P(x, y)\) is true.
  Then there exists a set \(\{y : P(x, y) \text{ is true for some } x \in A\}\), such that for any object \(z\),
  \[
    z \in \{y: P(x, y) \text{ is true for some } x \in A\} \iff P(x, y) \text{ is true for some } x \in A.
  \]
\end{ax}

\begin{note}
  The keyword here is ``suppose'';
  We have to assume that there exists a set \(E = \{x \in A : \exists!\ y \text{ such that } P(x, y) \text{ is true}\}\).
  \(E\) must exist first so we can apply \cref{3.6}.
  This means we assert the existence of a function \(f : E \to \{y : P(x, y) \text{ is true for some } x\}\).
\end{note}

\begin{note}
  We often abbreviate a set of the form
  \[
    \{y : y = f(x) \text{ for some } x \in A\}
  \]
  as \(\{f(x) : x \in A\}\) or \(\{f(x) \mid x \in A\}\).
  We can of course combine the axiom of replacement with the axiom of specification, thus for instance we can create sets such as \(\{f(x) : x \in A; P(x) \text{ is true}\}\) by starting with the set \(A\), using the axiom of specification to create the set \(\{x \in A : P(x) \text{ is true}\}\), and then applying the axiom of replacement to create \(\{f(x) : x \in A; P(x) \text{ is true}\}\).
\end{note}

\begin{ax}[Infinity]\label{3.7}
  There exists a set \(\N\), whose elements are called natural numbers, as well as an object \(0\) in \(\N\), and an object \(n++\) assigned to every natural number \(n \in \N\), such that the Peano axioms (\crefrange{2.1}{2.5}) hold.
\end{ax}

\exercisesection

\begin{ex}\label{ex:3.1.1}
  Show that the definition of equality in \cref{3.1.4} is reflexive, symmetric, and transitive.
\end{ex}

\begin{proof}
  See \cref{ac:3.1.1}.
\end{proof}

\begin{ex}\label{ex:3.1.2}
  Using only \cref{3.1.4}, \cref{3.1}, \cref{3.2}, and \cref{3.3}, prove that the sets \(\emptyset\), \(\{\emptyset\}\), \(\{\{\emptyset\}\}\), and \(\{\emptyset, \{\emptyset\}\}\) are all distinct
  (i.e., no two of them are equal to each other).
\end{ex}

\begin{proof}
  We first show that \(\emptyset \neq \{\emptyset\}\), \(\emptyset \neq \{\{\emptyset\}\}\) and \(\emptyset \neq \{\emptyset, \{\emptyset\}\}\).
  \begin{align*}
             & \emptyset \in \{\emptyset\} \land \emptyset \notin \emptyset                &  & \text{(by \cref{3.2})}   \\
    \implies & \{\emptyset\} \neq \emptyset.                                               &  & \text{(by \cref{3.1.4})} \\
             & \{\emptyset\} \in \{\{\emptyset\}\} \land \{\emptyset\} \notin \emptyset    &  & \text{(by \cref{3.2})}   \\
    \implies & \{\{\emptyset\}\} \neq \emptyset.                                           &  & \text{(by \cref{3.1.4})} \\
             & \emptyset \in \{\emptyset, \{\emptyset\}\} \land \emptyset \notin \emptyset &  & \text{(by \cref{3.2})}   \\
    \implies & \{\emptyset\} \neq \emptyset.                                               &  & \text{(by \cref{3.1.4})}
  \end{align*}

  Next we show that \(\{\emptyset\} \neq \{\{\emptyset\}\}\) and \(\{\emptyset\} \neq \{\emptyset, \{\emptyset\}\}\).
  \begin{align*}
             & \{\emptyset\} \in \{\{\emptyset\}\} \land \{\emptyset\} \notin \{\emptyset\}            &  & \text{(by \cref{3.3})}   \\
    \implies & \{\emptyset\} \neq \{\{\emptyset\}\}.                                                   &  & \text{(by \cref{3.1.4})} \\
             & \{\emptyset\} \in \{\emptyset, \{\emptyset\}\} \land \{\emptyset\} \notin \{\emptyset\} &  & \text{(by \cref{3.2})}   \\
    \implies & \{\emptyset\} \neq \{\{\emptyset\}\}.                                                   &  & \text{(by \cref{3.1.4})}
  \end{align*}

  Finally we show that \(\{\{\emptyset\}\} \neq \{\emptyset, \{\emptyset\}\}\).
  \begin{align*}
             & \emptyset \in \{\emptyset, \{\emptyset\}\} \land \emptyset \notin \{\{\emptyset\}\} &  & \text{(by \cref{3.3})}   \\
    \implies & \{\{\emptyset\}\} \neq \{\emptyset, \{\emptyset\}\}.                                &  & \text{(by \cref{3.1.4})}
  \end{align*}
\end{proof}

\begin{ex}\label{ex:3.1.3}
  Prove the remaining claims in \cref{3.1.13}.
\end{ex}

\begin{proof}
  See \cref{3.1.13}.
\end{proof}

\begin{ex}\label{ex:3.1.4}
  Prove the remaining claims in \cref{3.1.18}.
\end{ex}

\begin{proof}
  See \cref{3.1.18}.
\end{proof}

\begin{ex}\label{ex:3.1.5}
  Let \(A\), \(B\) be sets.
  Show that the three statements \(A \subseteq B\), \(A \cup B = B\), \(A \cap B = A\) are logically equivalent (any one of them implies the other two).
\end{ex}

\begin{proof}
  We first show that \(A \subseteq B \iff A \cup B = B\).
  Suppose that \(A, B\) are sets.
  Then we have
  \begin{align*}
    A \subseteq B \implies & A \cup B = B.                                   &  & \text{(by \cref{3.1.28}(b))} \\
    A \cup B = B \implies  & (\forall x : x \in A \cup B \iff x \in B)       &  & \text{(by \cref{3.1.4})}     \\
    \implies               & (\forall x : x \in A \lor x \in B \iff x \in B) &  & \text{(by \cref{3.4})}       \\
    \implies               & (\forall x : x \in A \implies x \in B)                                            \\
    \implies               & A \subseteq B.                                  &  & \text{(by \cref{3.1.15})}    \\
    A \cup B = B \iff      & A \subseteq B.
  \end{align*}

  Now we show that \(A \subseteq B \iff A \cap B = A\).
  Suppose that \(A, B\) are sets.
  Then we have
  \begin{align*}
    A \subseteq B \implies & A \cap B = A.                                    &  & \text{(by \cref{3.1.28}(b))} \\
    A \cap B = A \implies  & (\forall x : x \in A \cap B \iff x \in A)        &  & \text{(by \cref{3.1.4})}     \\
    \implies               & (\forall x : x \in A \land x \in B \iff x \in A) &  & \text{(by \cref{3.1.23})}    \\
    \implies               & (\forall x : x \in A \implies x \in B)                                             \\
    \implies               & A \subseteq B.                                   &  & \text{(by \cref{3.1.15})}    \\
    A \cap B = A \iff      & A \subseteq B.
  \end{align*}
\end{proof}

\begin{ex}\label{ex:3.1.6}
  Prove \cref{3.1.28}.
\end{ex}

\begin{proof}
  See \cref{3.1.28}.
\end{proof}

\begin{ex}\label{ex:3.1.7}
  Let \(A\), \(B\), \(C\) be sets.
  Show that \(A \cap B \subseteq A\) and \(A \cap B \subseteq B\).
  Furthermore, show that \(C \subseteq A\) and \(C \subseteq B\) if and only if \(C \subseteq A \cap B\).
  In a similar spirit, show that \(A \subseteq A \cup B\) and \(B \subseteq A \cup B\), and furthermore that \(A \subseteq C\) and \(B \subseteq C\) if and only if \(A \cup B \subseteq C\).
\end{ex}

\begin{proof}
  We first show that \(A \cap B \subseteq A\) and \(A \cap B \subseteq B\).
  Suppose that \(A, B\) are sets.
  Then we have
  \begin{align*}
             & (\forall x : x \in A \cap B \iff x \in A \land x \in B) &  & \text{(by \cref{3.1.23})} \\
    \implies & ((\forall x : x \in A \cap B \implies x \in A)                                         \\
             & \land (\forall x : x \in A \cap B \implies x \in B))                                   \\
    \implies & (A \cap B \subseteq A) \land (A \cap B \subseteq B).    &  & \text{(by \cref{3.1.15})}
  \end{align*}

  Next we show that \(C \subseteq A \land C \subseteq B \iff C \subseteq A \cap B\).
  Suppose that \(A, B, C\) are sets.
  Then we have
  \begin{align*}
         & (C \subseteq A \land C \subseteq B)                                                                                \\
    \iff & (\forall x : x \in C \implies x \in A) \land (\forall x : x \in C \implies x \in B) &  & \text{(by \cref{3.1.15})} \\
    \iff & (\forall x : x \in C \implies x \in A \land x \in B)                                                               \\
    \iff & (\forall x : x \in C \implies x \in A \cap B)                                       &  & \text{(by \cref{3.1.23})} \\
    \iff & (C \subseteq A \cap B).                                                             &  & \text{(by \cref{3.1.15})}
  \end{align*}

  Next we show that \(A \subseteq A \cup B\) and \(B \subseteq A \cup B\).
  Suppose that \(A, B\) are sets.
  Then we have
  \begin{align*}
    \top \iff & (\forall x : x \in A \implies \forall x : x \in A \lor x \in B)                                \\
    \iff      & (\forall x : x \in A \implies \forall x : x \in A \cup B)       &  & \text{(by \cref{3.4})}    \\
    \iff      & (A \subseteq A \cup B).                                         &  & \text{(by \cref{3.1.15})} \\
    \top \iff & (\forall x : x \in B \implies \forall x : x \in A \lor x \in B)                                \\
    \iff      & (\forall x : x \in B \implies \forall x : x \in A \cup B)       &  & \text{(by \cref{3.4})}    \\
    \iff      & (B \subseteq A \cup B).                                         &  & \text{(by \cref{3.1.15})}
  \end{align*}

  Finally we show that \(A \subseteq C \land B \subseteq C \iff A \cup B \subseteq C\).
  Suppose that \(A, B, C\) are sets.
  Then we have
  \begin{align*}
         & (A \subseteq C \land B \subseteq C)                                                                                \\
    \iff & (\forall x : x \in A \implies x \in C) \land (\forall x : x \in B \implies x \in C) &  & \text{(by \cref{3.1.15})} \\
    \iff & (\forall x : x \in A \lor x \in B \implies x \in C)                                                                \\
    \iff & (\forall x : x \in A \cup B \implies x \in C)                                       &  & \text{(by \cref{3.4})}    \\
    \iff & (A \cup B \subseteq C).                                                             &  & \text{(by \cref{3.1.15})}
  \end{align*}
\end{proof}

\begin{ex}\label{ex:3.1.8}
  Let \(A\), \(B\) be sets.
  Prove the \emph{absorption laws} \(A \cap (A \cup B) = A\) and \(A \cup (A \cap B) = A\).
\end{ex}

\begin{proof}
  Suppose that \(A, B\) are sets.
  Then we have
  \begin{align*}
         & \forall x : x \in A \cap (A \cup B)                                 \\
    \iff & x \in A \land x \in A \cup B         &  & \text{(by \cref{3.1.23})} \\
    \iff & x \in A \land (x \in A \lor x \in B) &  & \text{(by \cref{3.4})}    \\
    \iff & x \in A.
  \end{align*}
  Thus by \cref{3.1.4} we have \(A \cap (A \cup B) = A\).
  Similarly we have
  \begin{align*}
         & \forall x : x \in A \cup (A \cap B)                                 \\
    \iff & x \in A \lor x \in A \cap B          &  & \text{(by \cref{3.4})}    \\
    \iff & x \in A \lor (x \in A \land x \in B) &  & \text{(by \cref{3.1.23})} \\
    \iff & x \in A.
  \end{align*}
  Thus by \cref{3.1.4} we have \(A \cup (A \cap B) = A\).
\end{proof}

\begin{ex}\label{ex:3.1.9}
  Let \(A\), \(B\), \(X\) be sets such that \(A \cup B = X\) and \(A \cap B = \emptyset\).
  Show that \(A = X \setminus B\) and \(B = X \setminus A\).
\end{ex}

\begin{proof}
  Suppose that \(A, B, X\) are sets such that \(A \cup B = X\) and \(A \cap B = \emptyset\).
  We first show that \(A \cap B = \emptyset \iff \forall x : (x \in A \implies x \notin B) \land (x \in B \implies x \notin A)\).
  \begin{align*}
         & (A \cap B = \emptyset)                                                                                         \\
    \iff & (\forall x : x \notin A \cap B)                                                 &  & \text{(by \cref{3.2})}    \\
    \iff & (\forall x : \lnot (x \in A \cap B))                                                                           \\
    \iff & (\forall x : \lnot (x \in A \land x \in B))                                     &  & \text{(by \cref{3.1.23})} \\
    \iff & (\forall x : x \notin A \lor x \notin B)                                                                       \\
    \iff & (\forall x : (x \in A \implies x \notin B) \land (x \in B \implies x \notin A))                                \\
  \end{align*}

  Now we show that \(A = X \setminus B\).
  From the proof above we have
  \begin{align*}
             & (A \cup B = X) \land (A \cap B = \emptyset)                                                          \\
    \implies & (A \subseteq X) \land (A \cap B = \emptyset)                        &  & \text{(by \cref{ex:3.1.7})} \\
    \implies & (\forall x : x \in A \implies x \in X) \land (A \cap B = \emptyset) &  & \text{(by \cref{3.1.15})}   \\
    \implies & (\forall x : x \in A \implies x \in X)                                                               \\
             & \land (\forall x : x \in A \implies x \notin B)                                                      \\
    \implies & (\forall x : x \in A \implies x \in X \land x \notin B)                                              \\
    \implies & (\forall x : x \in A \implies x \in X \setminus B).                 &  & \text{(by \cref{3.1.27})}
  \end{align*}
  And we also have
  \begin{align*}
             & \forall x : x \in X \setminus B                                        \\
    \implies & x \in X \land x \notin B                &  & \text{(by \cref{3.1.27})} \\
    \implies & x \in A \cup B \land x \notin B                                        \\
    \implies & (x \in A \lor x \in B) \land x \notin B &  & \text{(by \cref{3.4})}    \\
    \implies & x \in A \land x \notin B                                               \\
    \implies & x \in A.
  \end{align*}
  Thus by \cref{3.1.4} we have \(A = X \setminus B\).
  Similarly argument show that \(B = X \setminus A\), as desired.
\end{proof}

\begin{ex}\label{ex:3.1.10}
  Let \(A\) and \(B\) be sets.
  Show that the three sets \(A \setminus B\), \(A \cap B\), and \(B \setminus A\) are disjoint, and that their union is \(A \cup B\).
\end{ex}

\begin{proof}
  Suppose that \(A, B\) are sets.
  Then we have
  \begin{align*}
             & \forall x : x \in A \setminus B                                \\
    \implies & x \in A \land x \notin B        &  & \text{(by \cref{3.1.27})} \\
    \implies & x \notin A \cap B.              &  & \text{(by \cref{3.1.23})}
  \end{align*}
  And we also have
  \begin{align*}
             & \forall x : x \in A \cap B                                \\
    \implies & x \in A \land x \in B      &  & \text{(by \cref{3.1.23})} \\
    \implies & x \notin A \setminus B.    &  & \text{(by \cref{3.1.27})}
  \end{align*}
  Thus \(A \setminus B\) and \(A \cap B\) are disjoint.
  Similarly argument show that \(B \setminus A\) and \(A \cap B\) are disjoint.
  For \(A \setminus B\) and \(B \setminus A\), we have
  \begin{align*}
             & \forall x : x \in A \setminus B                                \\
    \implies & x \in A \land x \notin B        &  & \text{(by \cref{3.1.27})} \\
    \implies & x \notin B \setminus A.         &  & \text{(by \cref{3.1.27})}
  \end{align*}
  Similarly argument show that \(\forall x : x \in B \setminus A \implies x \notin A \setminus B\).
  Thus \(A \setminus B\) and \(B \setminus A\) are disjoint.

  Now we show that \((A \setminus B) \cup (A \cap B) \cup (B \setminus A) = A \cup B\).
  \begin{align*}
         & \forall x : x \in (A \setminus B) \cup (A \cap B) \cup (B \setminus A)                                                 \\
    \iff & x \in (A \setminus B) \lor x \in (A \cap B) \lor x \in (B \setminus A)                  &  & \text{(by \cref{3.4})}    \\
    \iff & (x \in A \land x \notin B) \lor (x \in A \cap B) \lor (x \in B \land x \notin A)        &  & \text{(by \cref{3.1.27})} \\
    \iff & (x \in A \land x \notin B) \lor (x \in A \land x \in B) \lor (x \in B \land x \notin A) &  & \text{(by \cref{3.1.23})} \\
    \iff & ((x \in A \lor (x \in A \land x \in B))                                                                                \\
         & \land (x \notin B \lor (x \in A \land x \in B)))                                                                       \\
         & \lor (x \in B \land x \notin A)                                                                                        \\
    \iff & ((x \in A) \land (x \notin B \lor x \in A)) \lor (x \in B \land x \notin A)                                            \\
    \iff & (x \in A) \lor (x \in B \land x \notin A)                                                                              \\
    \iff & x \in A \lor x \in B                                                                                                   \\
    \iff & x \in A \cup B.                                                                         &  & \text{(by \cref{3.4})}
  \end{align*}
\end{proof}

\begin{ex}\label{ex:3.1.11}
  Show that the axiom of replacement implies the axiom of specification.
\end{ex}

\begin{proof}
  By \cref{3.6}, \(z \in \{y : P(x, y) \text{ is true for some } x \in A\} \iff P(x, z)\) is true for some \(x \in A\).
  Change all \(y\) and \(z\) into \(x\), and replace \(P(x, x)\) with \(P(x)\), we derive \(x \in \{x : P(x) \text{ is true for some } x \in A\} \iff P(x)\) is true for some \(x \in A\), which is the same as \cref{3.5}.
  Thus we conclude that \cref{3.6} implies \cref{3.5}.
\end{proof}