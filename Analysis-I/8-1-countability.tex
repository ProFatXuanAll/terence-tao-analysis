\section{Countability}\label{sec 8.1}

\begin{note}
    From Theorem \ref{3.6.12} we know that the set \(\mathbf{N}\) of natural numbers is infinite.
    The set \(\mathbf{N} - \{0\}\) is also infinite, thanks to Proposition \ref{3.6.14}(a), and is a proper subset of \(\mathbf{N}\).
    However, the set \(\mathbf{N} - \{0\}\), despite being ``smaller'' than \(\mathbf{N}\), still has the same cardinality as \(\mathbf{N}\), because the function \(f : \mathbf{N} \to \mathbf{N} - \{0\}\) defined by \(f(n) \coloneqq n + 1\), is a bijection from \(\mathbf{N}\) to \(\mathbf{N} - \{0\}\).
    This is one characteristic of infinite sets.
\end{note}

\begin{definition}[Countable sets]\label{8.1.1}
    A set \(X\) is said to be \emph{countably infinite} (or just \emph{countable}) iff it has equal cardinality with the natural numbers \(\mathbf{N}\).
    A set \(X\) is said to be \emph{at most countable} iff it is either countable or finite.
    We say that a set is \emph{uncountable} if it is infinite but not countable.
\end{definition}

\begin{remark}\label{8.1.2}
    Countably infinite sets are also called \emph{denumerable} sets.
\end{remark}

\begin{example}\label{8.1.3}
    The even natural numbers \(\{2n : n \in \mathbf{N}\}\), since the function \(f(n) \coloneqq 2n\) provides a bijection between \(\mathbf{N}\) and the even natural numbers.
\end{example}

\begin{note}
    Let \(X\) be a countable set.
    Then, by definition, we know that there exists a bijection \(f : \mathbf{N} \to X\).
    Thus, every element of \(X\) can be written in the form \(f(n)\) for exactly one natural number \(n\).
    Informally, we thus have
    \[
        X = \{f(0), f(1), f(2), f(3), \dots\}.
    \]
    Thus, a countable set can be arranged in a sequence, so that we have a zeroth element \(f(0)\), followed by a first element \(f(1)\), then a second element \(f(2)\), and so forth, in such a way that all these elements \(f(0), f(1), f(2), \dots\) are all distinct, and together they fill out all of \(X\).
    (This is why these sets are called \emph{countable};
    because we can literally count them one by one, starting from \(f(0)\), then \(f(1)\), and so forth.)
\end{note}

\begin{proposition}[Well ordering principle]\label{8.1.4}
    Let \(X\) be a non-empty subset of the natural numbers \(\mathbf{N}\).
    Then there exists exactly one element \(n \in X\) such that \(n \leq m\) for all \(m \in X\).
    In other words, every non-empty set of natural numbers has a minimum element.
\end{proposition}

\begin{proof}
    Suppose for sake of contradiction that \(X\) has no minimum element.
    Let \(n \in \mathbf{N}\) and let \(P(n)\) be the statement ``\(\forall m \in X\), we have \(n \leq m\) and \(n \notin X\)''.
    We now use induction to show that \(P(n)\) is true \(\forall n \in \mathbf{N}\).
    For \(n = 0\), we have
    \begin{align*}
                 & X \subseteq \mathbf{N}                                                    \\
        \implies & \forall m \in X, m \in \mathbf{N} & \text{(by Definition \ref{3.1.15})}   \\
        \implies & \forall m \in X, 0 \leq m         & \text{(by Axiom \ref{2.3})}           \\
        \implies & 0 \notin X.                       & \text{(\(X\) has no minimum element)}
    \end{align*}
    Thus the base case holds.
    Suppose inductively that \(P(n)\) is true for some \(n \geq 0\).
    Then for \(n + 1\), we have
    \begin{align*}
                 & \forall m \in X, n \leq m \land n \notin X & \text{(by induction hypothesis)}        \\
        \implies & \forall m \in X, n < m                     & \text{(by Definition \ref{2.2.11})}     \\
        \implies & \forall m \in X, n + 1 \leq m              & \text{(by Proposition \ref{2.2.12}(e))} \\
        \implies & n + 1 \notin X.                            & \text{(\(X\) has no minimum element)}
    \end{align*}
    This closes the induction.

    By hypothesis we know that \(X \subseteq \mathbf{N}\) and \(X \neq \emptyset\).
    So let \(n \in X\).
    But \(P(n)\) is true, we must have \(n \notin X\), a contradiction.
    Thus \(X\) must have a minimum element \(\min(X) \in X\).

    Now we show that such \(\min(X)\) is unique.
    Suppose that \(\exists\ n, n' \in X\) such that \(\forall m \in X\), we have \(n \leq m \land n' \leq m\).
    Since \(n, n' \in X\), we have \(n \leq n' \land n' \leq n\).
    Thus \(n = n'\).
\end{proof}

\begin{note}
    We will refer to the element \(n\) given by the well-ordering principle as the \emph{minimum} of \(X\), and write it as \(\min(X)\).
    This minimum is clearly the same as the infimum of \(X\), as defined in Definition \ref{5.5.10}.
\end{note}

\begin{proposition}\label{8.1.5}
    Let \(X\) be an infinite subset of the natural numbers \(\mathbf{N}\).
    Then there exists a unique bijection \(f : \mathbf{N} \to X\) which is increasing, in the sense that \(f(n + 1) > f(n)\) for all \(n \in N\).
    In particular, \(X\) has equal cardinality with \(\mathbf{N}\) and is hence countable.
\end{proposition}

\begin{proof}
    We now define a sequence \(a_0, a_1, a_2, \dots\) of natural numbers recursively by the formula
    \[
        a_n \coloneqq \min\{x \in X : x \neq a_m \text{ for all } m < n\}.
    \]
    Intuitively speaking, \(a_0\) is the smallest element of \(X\);
    \(a_1\) is the second smallest element of \(X\), i.e., the smallest element of \(X\) once \(a_0\) is removed;
    \(a_2\) is the third smallest element of \(X\);
    and so forth.
    Observe that in order to define \(a_n\), one only needs to know the values of \(a_m\) for all \(m < n\), so this definition is recursive.
    Also, since \(X\) is infinite, the set \(\{x \in X : x \neq a_m \text{ for all } m < n\}\) is infinite, hence non-empty.
    (If it is finite, then its union with the set \(\{a_0, \dots, a_{n - 1}\}\) is also finite, but the union is \(X\), which contradict to \(X\) is infinite.)
    Thus by the well-ordering principle (Proposition \ref{8.1.5}), the minimum, \(\min\{x \in X : x \neq a_m \text{ for all } m < n\}\) is always well-defined.

    Since \(a_{n + 1} = \min\{x \in X : x \neq a_m \text{ for all } m < n + 1\}\), we know that \(a_n < a_{n + 1}\).
    Since \(n\) is arbitrary, we see that \(a_n\) is an increasing sequence, i.e.
    \[
        a_0 < a_1 < a_2 < \dots
    \]
    and in particular that \(a_n \neq a_m\) for all \(n \neq m\).
    Also, we have \(a_n \in X\) for each natural number \(n\) (by Proposition \ref{8.1.4}).

    Now define the function \(f : \mathbf{N} \to X\) by \(f(n) \coloneqq a_n\).
    From the previous paragraph we know that \(f\) is one-to-one.
    Now we show that \(f\) is onto.
    In other words, we claim that for every \(y \in X\), there exists an \(n\) such that \(a_n = y\).

    Let \(y \in X\).
    Suppose for sake of contradiction that \(a_n \neq y\) for every natural number \(n\).
    Then this implies that \(y\) is an element of the set \(\{x \in X : x \neq a_m \text{ for all } m < n\}\) for all \(n\).
    By definition of \(a_n\), this implies that \(y > a_n\) for every natural number \(n\).
    (If \(y < a_n\), then \(y = \min\{x \in X : a \neq a_m \text{ for all } m < n\}\) instead of \(a_n\), a contradiction)
    However, since \(a_n\) is an increasing sequence, we have \(a_n \geq n\), and hence \(y \geq n\) for every natural number \(n\).
    In particular we have \(y \geq y + 1\), which is a contradiction.
    Thus we must have \(a_n = y\) for some natural number \(n\), and hence \(f\) is onto.

    Since \(f : \mathbf{N} \to X\) is both one-to-one and onto, it is a bijection.
    We have thus found at least one increasing bijection \(f\) from \(\mathbf{N}\) to \(X\).
    Now suppose for sake of contradiction that there was at least one other increasing bijection \(g\) from \(\mathbf{N}\) to \(X\) which was not equal to \(f\).
    Then the set \(\{n \in \mathbf{N} : g(n) \neq f(n)\}\) is non-empty, and define \(m \coloneqq \min\{n \in \mathbf{N} : g(n) \neq f(n)\}\), thus in particular \(g(m) \neq f(m) = a_m\), and \(g(n) = f(n) = a_n\) for all \(n < m\).
    But we then must have
    \[
        g(m) = \min\{x \in X : x \neq a_t \text{ for all } t < m\} = a_m,
    \]
    a contradiction.
    Thus there is no other increasing bijection from \(\mathbf{N}\) to \(X\) other than \(f\).
\end{proof}

\begin{corollary}\label{8.1.6}
    All subsets of the natural numbers are at most countable.
\end{corollary}

\begin{proof}
    Since finite sets are at most countable by definition, combine with Proposition \ref{8.1.5} we thus have all subsets of the natural numbers are at most countable.
\end{proof}

\begin{corollary}\label{8.1.7}
    If \(X\) is an at most countable set, and \(Y\) is a subset of \(X\), then \(Y\) is at most countable.
\end{corollary}

\begin{proof}
    If \(X\) is finite then this follows from Proposition \ref{3.6.14}(c), so assume \(X\) is countable.
    Then there is a bijection \(f : X \to \mathbf{N}\) between \(X\) and \(\mathbf{N}\).
    Since \(Y\) is a subset of \(X\), and \(f\) is a bijection from \(X\) and \(\mathbf{N}\), then when we restrict \(f\) to \(Y\), we obtain a bijection between \(Y\) and \(f(Y)\).
    Thus \(f(Y)\) has equal cardinality with \(Y\).
    But \(f(Y)\) is a subset of \(\mathbf{N}\), and hence at most countable by Corollary \ref{8.1.6}.
    Hence \(Y\) is also at most countable.
\end{proof}

\begin{proposition}\label{8.1.8}
    Let \(Y\) be a set, and let \(f : \mathbf{N} \to Y\) be a function.
    Then \(f(\mathbf{N})\) is at most countable.
\end{proposition}

\begin{proof}
    If \(f(\mathbf{N})\) is finite then by Definition \ref{8.1.1} it is at most countable.
    So assume that \(f(\mathbf{N})\) is infinite.
    Let \(A\) be the set
    \[
        A = \{n \in \mathbf{N} : f(m) \neq f(n) \text{ for all } 0 \leq m < n\}.
    \]
    So \(A \subseteq \mathbf{N}\) and \(A\) is infinite.
    We now show that \(f|_A : A \to f(A)\) is a bijection.

    Let \(p, q \in A\) and \(p \neq q\).
    By the definition of \(A\) we know that \(f|_A(p) \neq f|_A(q)\) and thus \(f|_A\) is injective.
    By Definition \ref{3.4.1} we also know that \(f|_A\) is surjective, thus \(f|_A\) is bijective.

    Now we show that \(\forall y \in f(\mathbf{N})\), \(\exists\ p \in A\) such that \(f|_A(p) = y\).
    Suppose for sake of contradiction that \(\nexists p \in A\) such that \(f|_A(p) = y\).
    Then we have \(y \neq f|_A(p)\) for every \(p \in A\).
    Since \(y \in f(\mathbf{N})\), we know that \(\exists\ q \in \mathbf{N}\) such that \(f(q) = y\) and \(q \notin A\).
    Since \(q \notin A\), by the definition of \(A\) we know that \(\exists\ 0 \leq m < q\) such that \(f(m) = f(q) = y\).
    Now we let \(E\) be the set
    \[
        E = \{m \in \mathbf{N} : f(m) = f(q) = y\}.
    \]
    Since \(E \subseteq \mathbf{N}\) and \(E \neq \emptyset\), by well ordering principle (Proposition \ref{8.1.4}) we know that \(\min(E)\) exists.
    This means \(\exists\ p \in E\) such that \(\forall 0 \leq m < p\), we have \(f(m) \neq f(p) = f(q)\).
    But then we must have \(p \in A\), a contradiction.
    Thus \(\forall y \in f(\mathbf{N})\), \(\exists\ p \in A\) such that \(f|_A(p) = y\).
    This means \(f(\mathbf{N}) \subseteq f(A)\), thus we have \(f(\mathbf{N}) = f(A)\).

    Since \(A \subseteq \mathbf{N}\) and \(A\) is infinite, by Proposition \ref{8.1.5} \(\exists\ g : \mathbf{N} \to A\) where \(g\) is bijective.
    This means \(f|_A \circ g\) is bijective and we have
    \[
        (f|_A \circ g)(\mathbf{N}) = f|_A\big(g(\mathbf{N})\big) = f|_A(A) = f(A) = f(\mathbf{N}).
    \]
    Thus by Definition \ref{8.1.1} \(f(\mathbf{N})\) is countable, and thus at most countable.
\end{proof}

\begin{corollary}\label{8.1.9}
    Let \(X\) be a countable set, and let \(f : X \to Y\) be a function.
    Then \(f(X)\) is at most countable.
\end{corollary}

\begin{proof}
    By Definition \ref{8.1.1} \(\exists\ g : \mathbf{N} \to X\) such that \(g\) is a bijection.
    Then we have \(f \circ g : \mathbf{N} \to Y\) and by Proposition \ref{8.1.8} \((f \circ g)(\mathbf{N})\) is at most countable.
    But
    \[
        (f \circ g)(\mathbf{N}) = f(g(\mathbf{N})) = f(X).
    \]
    Thus \(f(X)\) is at most countable.
\end{proof}

\begin{proposition}\label{8.1.10}
    Let \(X\) be a countable set, and let \(Y\) be a countable set.
    Then \(X \cup Y\) is a countable set.
\end{proposition}

\begin{proof}
    By Definition \ref{8.1.1} \(\exists\ f : \mathbf{N} \to X\) and \(g : \mathbf{N} \to Y\) such that \(f\) and \(g\) are bijections.
    Let \(h : \mathbf{N} \to X \cup Y\) by setting \(h(2n) = f(n)\) and \(h(2n + 1) = g(n)\) for every natural number \(n\).
    We now show that \(h(\mathbf{N}) = X \cup Y\).
    \begin{align*}
             & z \in h(\mathbf{N})                                                                                          \\
        \iff & \exists\ k \in \mathbf{N} : h(k) = z                                                                         \\
        \iff & (\exists\ k \in \mathbf{N} : h(k) = z)                                                                       \\
             & \land (\exists\ n \in \mathbf{N} : k = 2n \lor k = 2n + 1) & \text{(by Additional Corollary \ref{ac 4.4.2})} \\
        \iff & \exists\ n \in \mathbf{N} : z = h(2n) \lor z = h(2n + 1)                                                     \\
        \iff & z = f(n) \lor z = g(n)                                                                                       \\
        \iff & z \in X \lor z \in Y                                                                                         \\
        \iff & z \in X \cup Y.
    \end{align*}
    Then by Corollary \ref{8.1.9} we have \(h(\mathbf{N}) = X \cup Y\) is at most countable.
    But since \(X\) and \(Y\) are infinite sets, \(X \cup Y\) can not be finite, thus \(X \cup Y\) is countable.
\end{proof}

\begin{note}
    To summarize, any subset or image of a countable set is at most countable, and any finite union of countable sets is still countable.
\end{note}

\begin{additional corollary}\label{ac 8.1.1}
Let \(X, Y\) be at most countable sets.
Then \(X \cup Y\) is at most countable.
\end{additional corollary}

\begin{proof}
    We split into following three cases:
    \begin{itemize}
        \item \(X, Y\) are countable.
              Then by Proposition \ref{8.1.10} we know that \(X \cup Y\) is countable, thus at most countable.
        \item \(X, Y\) are finite.
              Then by Proposition \ref{3.6.14}(b) we know that \(X \cup Y\) is finite, thus at most countable.
        \item \(X, Y\) consist of one finite set and one countable set.
              Without the loss of generality, suppose that \(X\) is finite and \(Y\) is countable.
              Since \(X\) is finite, there exists a function \(f : \{i \in \mathbf{N} : 1 \leq i \leq \#(X)\} \to X\) such that \(f\) is bijective.
              Since \(Y\) is countable, by Definition \ref{8.1.1} there exists a function \(g : \mathbf{N} \to Y\) such that \(g\) is bijective.
              Now we define a functiton \(h : \mathbf{N} \to X \cup Y\) as follow:
              \[
                  \forall n \in \mathbf{N}, h(n) = \begin{cases}
                      f(n + 1)     & \text{ if } n < \#(X)    \\
                      g(n - \#(X)) & \text{ if } n \geq \#(X)
                  \end{cases}
              \]
              We need to show that \(h(\mathbf{N}) = X \cup Y\).
              Since \(h(\mathbf{N}) \subseteq X \cup Y\), it suffices to show that \(X \cup Y \subseteq h(\mathbf{N})\).
              \begin{align*}
                           & \forall z \in X \cup Y                                                         \\
                  \implies & (z \in X) \lor (z \in Y)                                                       \\
                  \implies & \big(\exists\ n \in \{i \in \mathbf{N} : 1 \leq i \leq \#(X)\} : f(n) = z\big) \\
                           & \land \big(\exists\ n \in \mathbf{N} : g(n) = z\big)                           \\
                  \implies & \big(h(n - 1) = f(n) = z\big) \land \big(h(n + \#(X)) = g(n) = z\big)          \\
                  \implies & z \in h(\mathbf{N}),
              \end{align*}
              Thus we have \(X \cup Y \subseteq h(\mathbf{N})\).
              By Proposition \ref{8.1.8} \(X \cup Y\) is at most countable.
    \end{itemize}
    From all cases above we conclude that \(X \cup Y\) is at most countable.
\end{proof}

\begin{corollary}\label{8.1.11}
    The integers \(\mathbf{Z}\) are countable.
\end{corollary}

\begin{proof}
    We already know that the set \(\mathbf{N} = \{0, 1, 2, 3, \dots\}\) of natural numbers are countable.
    The set \(-\mathbf{N}\) defined by
    \[
        -\mathbf{N} \coloneqq \{-n : n \in \mathbf{N}\} = \{0, -1, -2, -3, \dots\}
    \]
    is also countable, since the map \(f(n) \coloneqq -n\) is a bijection between \(\mathbf{N}\) and this set.
    Since the integers are the union of \(\mathbf{N}\) and \(-\mathbf{N}\), the claim follows from Proposition \ref{8.1.10}.
\end{proof}

\begin{note}
    To establish countability of the rationals, we need to relate countability with Cartesian products.
    In particular, we need to show that the set \(\mathbf{N} \times \mathbf{N}\) is countable.
\end{note}

\begin{lemma}\label{8.1.12}
    The set
    \[
        A \coloneqq \{(n, m) \in \mathbf{N} \times \mathbf{N} : 0 \leq m \leq n\}
    \]
    is countable.
\end{lemma}

\begin{proof}
    Define the sequence \(a_0, a_1, a_2, \dots\) recursively by setting \(a_0 \coloneqq 0\), and \(a_{n + 1} \coloneqq a_n + n + 1\) for all natural numbers \(n\).
    Thus
    \[
        a_0 = 0; a_1 = 0 + 1; a_2 = 0 + 1 + 2; a_3 = 0 + 1 + 2 + 3; \dots
    \]
    By induction one can show that \(a_n\) is increasing, i.e., that \(a_n > a_m\) whenever \(n > m\).

    Now define the function \(f : A \to \mathbf{N}\) by
    \[
        f(n, m) \coloneqq a_n + m.
    \]
    We claim that \(f\) is one-to-one.
    In other words, if \((n, m)\) and \((n', m')\) are any two distinct elements of \(A\), then we claim that \(f(n, m) \neq f(n', m')\).

    To prove this claim, let \((n, m)\) and \((n', m')\) be two distinct elements of \(A\).
    There are three cases: \(n' = n\), \(n' > n\), and \(n' < n\).
    First suppose that \(n' = n\).
    Then we must have \(m \neq m'\), otherwise \((n, m)\) and \((n', m')\) would not be distinct.
    Thus \(a_n + m \neq a_n + m'\), and hence \(f(n, m) \neq f(n', m')\), as desired.

    Now suppose that \(n' > n\).
    Then \(n' \geq n + 1\), and hence
    \[
        f(n', m') = a_{n'} + m' \geq a_{n'} \geq a_{n + 1} = a_n + n + 1.
    \]
    But since \((n, m) \in A\), we have \(m \leq n < n + 1\), and hence
    \[
        f(n', m') \geq a_n + n + 1 > a_n + m = f(n, m),
    \]
    and thus \(f(n', m') \neq f(n, m)\).

    The case \(n' < n\) is proven similarly, by switching the roles of \(n\) and \(n'\) in the previous argument.
    Thus we have shown that \(f\) is one-to-one.
    Thus \(f\) is a bijection from \(A\) to \(f(A)\), and so \(A\) has equal cardinality with \(f(A)\).
    But \(f(A)\) is a subset of \(\mathbf{N}\), and hence by Corollary \ref{8.1.6} \(f(A)\) is at most countable.
    Therefore \(A\) is at most countable.
    But, \(A\) is clearly not finite.
    (if \(A\) was finite, then every subset of \(A\) would be finite, and in particular \(\{(n, 0) : n \in \mathbf{N}\}\) would be finite, but this is clearly countably infinite, a contradiction.)
    Thus, \(A\) must be countable.
\end{proof}

\begin{corollary}\label{8.1.13}
    The set \(\mathbf{N} \times \mathbf{N}\) is countable.
\end{corollary}

\begin{proof}
    We already know that the set
    \[
        A \coloneqq \{(n, m) \in \mathbf{N} \times \mathbf{N} : 0 \leq m \leq n\}
    \]
    is countable.
    This implies that the set
    \[
        B \coloneqq \{(n, m) \in \mathbf{N} \times \mathbf{N} : 0 \leq n \leq m\}
    \]
    is also countable, since the map \(f : A \to B\) given by \(f(n, m) \coloneqq (m, n)\) is a bijection from \(A\) to \(B\).
    We prove \(f\) is bijective by showing that \(f\) is both injective and surjective.
    \begin{itemize}
        \item To prove that \(f\) is injective, suppose that \((n, m), (n', m') \in A\) and \(f(n, m) = f(n', m')\).
              Then we have
              \begin{align*}
                           & f(n, m) = f(n', m')                                       \\
                  \implies & (m, n) = (m', n')   & \text{(by the definition of \(f\))} \\
                  \implies & n = n' \land m = m' & \text{(by Definition \ref{3.5.1})}  \\
                  \implies & (n, m) = (n', m').  & \text{(by Definition \ref{3.5.1})}
              \end{align*}
              Thus \(f\) is injective.
        \item Since \(\forall (n, m) \in B\), we have \(n \leq m\), thus \((m, n) \in A\) and \(f(m, n) = (n, m)\).
              So \(f\) is surjective.
    \end{itemize}

    We now show that \(\mathbf{N} \times \mathbf{N} = A \cup B\).
    By Proposition \ref{3.1.18} we need to show that \(\mathbf{N} \times \mathbf{N} \subseteq A \cup B\) and \(A \cup B \subseteq \mathbf{N} \times \mathbf{N}\).
    It is clearly that \(A \cup B \subseteq \mathbf{N} \times \mathbf{N}\).
    So we only need to show that \(\mathbf{N} \times \mathbf{N} \subseteq A \cup B\).
    \begin{align*}
                 & \forall (a, b) \in \mathbf{N} \times \mathbf{N}                                                 \\
        \implies & (a < b) \lor (a = b) \lor (a > b)               & \text{(by Proposition \ref{2.2.13})}          \\
        \implies & (a, b) \in A \lor (a, b) \in B                  & \text{(by the definition of \(A\) and \(B\))} \\
        \implies & (a, b) \in A \cup B.                            & \text{(by Axiom \ref{3.4})}
    \end{align*}
    Thus by Definition \ref{3.1.15} we have \(\mathbf{N} \times \mathbf{N} \subseteq A \cup B\).

    Since \(\mathbf{N} \times \mathbf{N}\) is the union of \(A\) and \(B\), the claim then follows from Proposition \ref{8.1.10}.
\end{proof}

\begin{corollary}\label{8.1.14}
    If \(X\) and \(Y\) are countable, then \(X \times Y\) is countable.
\end{corollary}

\begin{proof}
    By Definition \ref{8.1.1} \(\exists\ f : \mathbf{N} \to X\) and \(g : \mathbf{N} \to Y\) such that \(f\) and \(g\) are bijections.
    Let \(h : \mathbf{N} \times \mathbf{N} \to X \times Y\) by setting \(h(x, y) = (f(x), g(y))\).
    If \(n, n', m, m' \in \mathbf{N}\) and \((n, m) \neq (n', m')\), then
    \[
        h(n, m) = (f(n), g(m)) \neq (f(n'), g(m')) = h(n', m')
    \]
    since \(f, g\) are bijections, so \(h\) is injective.
    Again since \(f, g\) are bijections, \(\forall x \in X \land \forall y \in Y\), \(\exists\ n, m \in \mathbf{N}\) such that \(x = f(n) \land y = g(m)\).
    So \(h\) is surjective, and thus \(h\) is bijective.

    Since \(h\) is bijective, \(\mathbf{N} \times \mathbf{N}\) and \(X \times Y\) has the same cardinality.
    But by Corollary \ref{8.1.13} we know that \(\mathbf{N} \times \mathbf{N}\) is countable.
    Thus by Definition \ref{8.1.1} \(X \times Y\) is countable.
\end{proof}

\begin{corollary}\label{8.1.15}
    The rationals \(\mathbf{Q}\) are countable.
\end{corollary}

\begin{proof}
    We already know that the integers \(\mathbf{Z}\) are countable, which implies that the non-zero integers \(\mathbf{Z} - \{0\}\) are countable.
    (since \(\mathbf{Z} - \{0\} \subseteq \mathbf{Z}\), by Corollary \ref{8.1.7} we know that \(\mathbf{Z} - \{0\}\) is at most countable, and clearly \(\mathbf{Z} - \{0\}\) is not finite.)
    By Corollary \ref{8.1.14}, the set
    \[
        \mathbf{Z} \times (\mathbf{Z} - \{0\}) = \{(a, b) : a, b \in \mathbf{Z}, b \neq 0\}
    \]
    is thus countable.
    If one lets \(f : \mathbf{Z} \times (\mathbf{Z} - \{0\}) \to \mathbf{Q}\) be the function \(f(a, b) \coloneqq a / b\)
    (note that \(f\) is well-defined since we prohibit \(b\) from being equal to \(0\)), we see from Corollary \ref{8.1.9} that \(f(\mathbf{Z} \times (\mathbf{Z} - \{0\}))\) is at most countable.
    But we have \(f(\mathbf{Z} \times (\mathbf{Z} - \{0\})) = \mathbf{Q}\)
    (This is basically the definition of the rationals \(\mathbf{Q}\)).
    Thus \(\mathbf{Q}\) is at most countable.
    However, \(\mathbf{Q}\) cannot be finite, since it contains the infinite set \(\mathbf{N}\).
    Thus \(\mathbf{Q}\) is countable.
\end{proof}

\begin{remark}\label{8.1.16}
    Because the rationals are countable, we know \emph{in principle} that it is possible to arrange the rational numbers as a sequence:
    \[
        \mathbf{Q} = \{a_0, a_1, a_2, a_3, \dots\}
    \]
    such that every element of the sequence is different from every other element, and that the elements of the sequence exhaust \(\mathbf{Q}\)
    (i.e., every rational number turns up as one of the elements \(a_n\) of the sequence).
    However, it is quite difficult (though not impossible) to actually try and come up with an explicit sequence \(a_0, a_1, \dots\) which does this.
\end{remark}

\exercisesection

\begin{exercise}[Dedekind-infinite set]\label{ex 8.1.1}
    Let \(X\) be a set.
    Show that \(X\) is infinite if and only if there exists a proper subset \(Y \subsetneq X\) of \(X\) which has the same cardinality as \(X\).
\end{exercise}

\begin{proof}
    We first show that \(X\) is infinite implies \(\exists\ Y \subsetneq X\) such that \(Y\) has the same cardinality as \(X\).
    Suppose that \(X\) is an infinite set.
    Then we have \(X \neq \emptyset\) since by Exercise \ref{ex 3.6.2} \(\#(\emptyset) = 0\).

    Let \(n \in \mathbf{N}\) and let \(P(n)\) be the statement ``\(\exists\ A_n \subseteq X\) such that \(\#(A_n) = n\)''.
    We use induction on \(n\) to show that \(\forall n \in \mathbf{N}\), \(P(n)\) is true.
    For \(n = 0\), we have \(\emptyset \subseteq X\) by Example \ref{3.1.17}, thus the base case holds.
    Suppose inductively that \(P(n)\) is true for some \(n \geq 0\).
    Then we need to show that \(P(n + 1)\) is true.
    By induction hypothesis, \(\exists\ A_n \subseteq X : \#(A_n) = n\).
    Then by Proposition \ref{3.6.14}(b) we know that \(X \setminus A_n\) is infinite.
    Since \(X \setminus A_n\) is infinite, we know that \(X \setminus A_n \neq \emptyset\).
    Let \(x \in X \setminus A_n\).
    Then we define \(A_{n + 1} = A_n \cup \{x\}\), and this closes the induction.

    By axiom of choice (Axiom \ref{8.1}) the set \(\prod_{n \in \mathbf{Z}^+} A_n\) is non-empty since \(\forall n \in \mathbf{Z}^+\), \(P(n)\) is true.
    We can now choose an element \((x_n)_{n \in \mathbf{Z}^+}\) from \(\prod_{n \in \mathbf{Z}^+} A_n\).
    In particular, we want to choose a \((x_n)_{n \in \mathbf{Z}^+}\) where \(x_i \neq x_j\) for every \(i, j \in \mathbf{Z}^+\) and \(i \neq j\).
    This can be done since \(\#(A_i) \neq \#(A_j)\) for every \(i, j \in \mathbf{Z}^+\) and \(i \neq j\).
    We collect \(x_i\) as a set \(A = \{x_i : i \in \mathbf{Z}^+\}\).
    By axiom of choice (Axiom \ref{8.1}) \(A\) can be construct as the image of \((x_n)_{n \in \mathbf{Z}^+}\).
    Now we define a function \(f : X \to X \setminus \{x_1\}\) as follow:
    \[
        f(x) = \begin{cases}
            x_{n + 1} & \text{if } x = x_n \text{ for some } x_n \in A, \\
            x         & \text{if } x \notin A.
        \end{cases}
    \]
    We show that such \(f\) is bijective.
    We start by showing \(f\) is injective.
    Let \(x, x' \in X\) and \(x \neq x'\).
    We split into four cases:
    \begin{itemize}
        \item If \(x \in A \land x' \in A\), then \(\exists\ n, n' \in \mathbf{Z}^+\) such that \(x = x_n \land x' = x_{n'}\).
              By the definition of \(x_n\) and \(x_{n'}\), we must have \(x_n \neq x_{n'} \implies x_{n + 1} \neq x_{n' + 1}\).
              Thus we have \(x_{n + 1} = f(x) \neq f(x') = x_{n' + 1}\).
        \item If \(x \in A \land x' \notin A\), then \(f(x) \in A \land f(x') = x' \notin A\) and thus \(f(x) \neq f(x')\).
        \item If \(x \notin A \land x' \in A\), then \(f(x) = x \notin A \land f(x') \in A\) and thus \(f(x) \neq f(x')\).
        \item If \(x \notin A \land x' \notin A\), then \(f(x) = x \neq x' = f(x')\).
    \end{itemize}
    From all cases above we conclude that \(x \neq x' \implies f(x) \neq f(x')\), thus \(f\) is injective.
    Now we show that \(f\) is surjective.
    Let \(x \in X \setminus \{x_1\}\).
    We split into two cases:
    \begin{itemize}
        \item If \(x \in A\), then \(x \neq x_1\) and \(\exists\ n \in \mathbf{Z}^+ \setminus \{1\}\) such that \(x = x_n\).
              Since \(n \geq 2\), we have \(n - 1 \geq 1\).
              Thus by the definition of \(A\) we have \(x_{n - 1} \in A\) and \(f(x_{n - 1}) = x_n\).
        \item If \(x \notin A\), then we have \(f(x) = x\).
    \end{itemize}
    Since \(x\) is arbitrary, we know that \(f\) is surjective.
    Since \(f\) is both injective and surjective, we know that \(f\) is bijective, and by Definition \ref{3.6.1} \(X\) and \(X \setminus \{x_1\}\) have the same cardinality.
    But \(x_1 \in X \land x_1 \notin X \setminus \{x_1\}\), we have \(X \neq X \setminus \{x_1\}\).
    Thus by Definition \ref{3.1.15} \(X \setminus \{x_1\} \subsetneq X\).

    Now we show that if \(\exists\ Y \subsetneq X\) where \(X\) and \(Y\) have the same cardinality, then \(X\) is infinite.
    We prove this by contradiction.
    Suppose for sake of contradiction that \(X\) is finite.
    Then by Proposition \ref{3.6.14}(c) we have \(\#(Y) < \#(X)\), a contradiction.
    Thus \(X\) is infinite.
\end{proof}

\begin{exercise}\label{ex 8.1.2}
    Prove Proposition \ref{8.1.4}.
\end{exercise}

\begin{proof}
    See Proposition \ref{8.1.4}.
\end{proof}

\begin{exercise}\label{ex 8.1.3}
    Fill in the gaps marked in Proposition \ref{8.1.5}.
\end{exercise}

\begin{proof}
    See Proposition \ref{8.1.5}.
\end{proof}

\begin{exercise}\label{ex 8.1.4}
    Prove Proposition \ref{8.1.8}.
\end{exercise}

\begin{proof}
    See Proposition \ref{8.1.8}.
\end{proof}

\begin{exercise}\label{ex 8.1.5}
    Use Proposition \ref{8.1.8} to prove Corollary \ref{8.1.9}.
\end{exercise}

\begin{proof}
    See Corollary \ref{8.1.9}.
\end{proof}

\begin{exercise}\label{ex 8.1.6}
    Let \(A\) be a set.
    Show that \(A\) is at most countable if and only if there exists an injective map \(f : A \to \mathbf{N}\) from \(A\) to \(\mathbf{N}\).
\end{exercise}

\begin{proof}
    We first show that if \(A\) is at most countable, then there exists an injective map \(f : A \to \mathbf{N}\).
    Suppose that \(A\) is at most countable.
    By Definition \ref{8.1.1} \(A\) is either finite or countable.
    \begin{itemize}
        \item If \(A\) is finite, then by Definition \ref{3.6.10} \(\exists\ g : A \to \{i \in \mathbf{N} : 1 \leq i \leq \#(A)\}\) such that \(g\) is bijective.
              Now let \(f : A \to \mathbf{N}\) be the function \(f(x) = g(x)\) for every \(x \in A\).
              Since \(g\) is a bijection and \(\{i \in \mathbf{N} : 1 \leq i \leq \#(A)\} \subseteq \mathbf{N}\), we have \(f : A \to \mathbf{N}\) is injective.
        \item If \(A\) is countable, then by Definition \ref{8.1.1} \(\exists\ f : A \to \mathbf{N}\) such that \(f\) is a bijection, and hence \(f\) is injective.
    \end{itemize}
    From all cases above we conclude that if \(A\) is at most countable then there exists an injective map \(f : A \to \mathbf{N}\).

    Now we show that if there exists an injective map \(f : A \to \mathbf{N}\), then \(A\) is at most countable.
    Suppose that \(f : A \to \mathbf{N}\) is injective.
    Since \(f(A) \subseteq \mathbf{N}\), by Corollary \ref{8.1.6} \(f(A)\) is at most countable.
    Since \(f\) is bijective from \(A\) to \(f(A)\), we know that \(A\) and \(f(A)\) have equal cardinality, and thus \(A\) is at most countable.
\end{proof}

\begin{exercise}\label{ex 8.1.7}
    Prove Proposition \ref{8.1.10}.
\end{exercise}

\begin{proof}
    See Proposition \ref{8.1.10}.
\end{proof}

\begin{exercise}\label{ex 8.1.8}
    Use Proposition \ref{8.1.13} to prove Corollary \ref{8.1.14}.
\end{exercise}

\begin{proof}
    See Corollary \ref{8.1.14}.
\end{proof}

\begin{exercise}\label{ex 8.1.9}
    Suppose that \(I\) is an at most countable set, and for each \(\alpha \in I\), let \(A_{\alpha}\) be an at most countable set.
    Show that the set \(\bigcup_{\alpha \in I} A_{\alpha}\) is also at most countable.
    In particular, countable unions of countable sets are countable.
\end{exercise}

\begin{proof}
    Suppose that \(I\) be an at most countable set and \(\forall \alpha \in I\) we have \(A_{\alpha}\) is an at most countable set.
    By Definition \ref{8.1.1} \(I\) is either finite or countable.

    We first show that if \(I\) is finite, then \(\bigcup_{\alpha \in I} A_{\alpha}\) is at most countable.
    Since \(I\) is finite, by Definition \ref{3.6.5} \(\exists\ n \in \mathbf{N}\) such that \(\#(I) = n\).
    Let \(P(n)\) be the statement ``\(\#(I) = n\) and \(\bigcup_{\alpha \in I} A_{\alpha}\) is at most countable''.
    We use induction on \(n\) to show that \(P(n)\) is true for every \(n \in \mathbf{N}\).
    For \(n = 0\), we have \(\#(\emptyset) = 0\) and \(\bigcup_{\alpha \in \emptyset} A_{\alpha} = \emptyset\).
    Thus the base case holds.
    Suppose inductively that \(P(n)\) is true for some \(n \geq 0\).
    Then we need to show that \(P(n + 1)\) is also true.
    Since \(\#(I) = n + 1 > 0\), we know that \(I \neq \emptyset\).
    Let \(i \in I\).
    Since \(\#(I \setminus \{i\}) = n\), by induction hypothesis we know that the set \(\bigcup_{\alpha \in I \setminus \{i\}} A_{\alpha}\) is at most countable.
    By Axiom \ref{3.11} we have \(\bigcup_{\alpha \in I} A_{\alpha} = (\bigcup_{\alpha \in I \setminus \{i\}} A_{\alpha}) \cup A_i\).
    Then by Additional Corollary \ref{ac 8.1.1} we know that \(\bigcup_{\alpha \in I} A_{\alpha}\) is at most countable.
    This closes the induction.
    We conclude that finite union of at most countable sets is at most countable.

    Now we show the case where \(I\) is countable.
    Let \(J = \{\alpha \in I : A_{\alpha} \neq \emptyset\}\).
    Since \(J \subseteq I\), by Corollary \ref{8.1.7} we know that \(J\) is at most countable.
    If \(J\) is finite (including the case where \(J = \emptyset\)), then we already show that finite union of at most countable sets is at most countable.
    So suppose that \(J\) is countable.
    Then we have
    \begin{align*}
             & \forall x \in \bigcup_{\alpha \in I} A_{\alpha} \\
        \iff & \exists\ \alpha' \in I : x \in A_{\alpha'}'     \\
        \iff & A_{\alpha'}' \neq \emptyset                     \\
        \iff & \alpha' \in J                                   \\
        \iff & \exists\ \alpha' \in J : x \in A_{\alpha'}'     \\
        \iff & x \in \bigcup_{\alpha \in J} A_{\alpha}.
    \end{align*}
    Thus by Definition \ref{3.1.4} we have \(\bigcup_{\alpha \in I} A_{\alpha} = \bigcup_{\alpha \in J} A_{\alpha}\).
    To show that \(\bigcup_{\alpha \in I} A_{\alpha}\) is at most countable, it suffices to show that \(\bigcup_{\alpha \in J} A_{\alpha}\) is at most countable.

    Since \(\forall \alpha \in J\), \(A_{\alpha}\) is at most countable.
    We split into two cases:
    \begin{itemize}
        \item If \(A_{\alpha}\) is finite, then by Definition \ref{3.6.5} \(\exists\ f_{\alpha}' : \{n \in \mathbf{N} : 1 \leq n \leq \#(A_{\alpha})\} \to A_{\alpha}\) such that \(f_{\alpha}'\) is bijective.
              We now define a function \(f_{\alpha} : \mathbf{N} \to A_{\alpha}\) as follow:
              \[
                  \forall n \in \mathbf{N} : f_{\alpha}(n) = \begin{cases}
                      f_{\alpha}'(n) & \text{if } 1 \leq n \leq \#(A_{\alpha}),  \\
                      f_{\alpha}'(1) & \text{if } n = 0 \lor n > \#(A_{\alpha}).
                  \end{cases}
              \]
              Thus \(f_{\alpha}\) is surjective.
              We can define \(F_{\alpha}\) to be a set of functions
              \[
                  F_{\alpha} = \{f_{\alpha} : \mathbf{N} \to A_{\alpha} | f_{\alpha} \text{ follows the definition above}\}
              \]
              and \(F_{\alpha} \neq \emptyset\).
        \item If \(A_{\alpha}\) is countable, then we define \(F_{\alpha}\) to be a set of bijections
              \[
                  F_{\alpha} = \{f_{\alpha} : \mathbf{N} \to A_{\alpha} | f_{\alpha} \text{ is bijective}\}.
              \]
              Since \(A_{\alpha}\) is countable, we know that \(F_{\alpha} \neq \emptyset\).
    \end{itemize}
    Since \(\forall \alpha \in J\), \(F_{\alpha} \neq \emptyset\), by axiom of choice (Axiom \ref{8.1}) the set \(\prod_{\alpha \in J} F_{\alpha} \neq \emptyset\).
    This means we can choose a function \((f_{\alpha})_{\alpha \in J}\) from \(\prod_{\alpha \in J} F_{\alpha}\) which maps \(\alpha \in J\) to a function \(f_{\alpha} : \mathbf{N} \to A_{\alpha}\).

    We now use axiom of choice (Axiom \ref{8.1}) to choose a function \((f_{\alpha})_{\alpha \in J}\) and fix such function.
    Since \(J\) is countable, \(\exists\ g : \mathbf{N} \to J\) such that \(g\) is bijective.
    We now define another function \(h : \mathbf{N} \times \mathbf{N} \to \bigcup_{\alpha \in J} A_{\alpha}\) as follow:
    \[
        \forall (n, m) \in \mathbf{N} \times \mathbf{N} : h(n, m) = f_{g(n)}(m).
    \]
    By Corollary \ref{8.1.9} we now that \(h(\mathbf{N} \times \mathbf{N})\) is at most countable.
    If we can show that \(h\) is surjective, then we can show that \(\bigcup_{\alpha \in J} A_{\alpha}\) is at most countable.
    Let \(x \in \bigcup_{\alpha \in J} A_{\alpha}\).
    We know that \(\exists\ \beta \in J\) such that \(x \in A_{\beta}\).
    By the definition of \(f_{\beta}\) we know that \(f_{\beta}\) is surjective.
    Since \(f_{\beta}\) is surjective, \(\exists\ m \in \mathbf{N}\) such that \(f_{\beta}(m) = x\).
    Since \(g\) is bijective, \(\exists\ n \in \mathbf{N}\) such that \(g(n) = \beta\).
    Then we have
    \[
        (n, m) \in \mathbf{N} \times \mathbf{N} \implies h(n, m) = f_{g(n)}(m) = f_{\beta}(m) = x.
    \]
    Since \(x\) is arbitrary, we thus know that \(h\) is surjective.
    We conclude that countable union of at most countable set is at most countable.

    Finally we show that countable union of countable set is countable.
    Let \(I\) be a countable set and \(\forall \alpha \in I\) let \(A_{\alpha}\) be countable set.
    From the proof above we know that \(\bigcup_{\alpha \in I} A_{\alpha}\) is at most countable.
    Suppose for sake of contradiction that \(\bigcup_{\alpha \in I} A_{\alpha}\) is finite.
    Let \(\beta \in I\).
    By hypothesis we know that \(A_{\beta}\) is countable, and we have
    \[
        A_{\beta} \subseteq \bigcup_{\alpha \in I} A_{\alpha}.
    \]
    But \(\bigcup_{\alpha \in I} A_{\alpha}\) is finite, thus by Proposition \ref{3.6.14}(c) we know that \(A_{\beta}\) is finite, a contradiction.
    We conclude that countable union of countable set is countable.
\end{proof}

\begin{exercise}\label{ex 8.1.10}
    Find a bijection \(f : \mathbf{N} \to \mathbf{Q}\) from the natural numbers to the rationals.
\end{exercise}

\begin{proof}
    Helped needed.
\end{proof}