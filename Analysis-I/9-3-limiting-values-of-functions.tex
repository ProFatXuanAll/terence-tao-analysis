\section{Limiting values of functions}\label{i:sec:9.3}

\begin{defn}[\(\varepsilon\)-closeness]\label{i:9.3.1}
  Let \(X\) be a subset of \(\R\), let \(f : X \to \R\) be a function, let \(L\) be a real number, and let \(\varepsilon > 0\) be a real number.
  We say that the function \(f\) is \emph{\(\varepsilon\)-close to \(L\)} iff \(f(x)\) is \(\varepsilon\)-close to \(L\) for every \(x \in X\).
\end{defn}

\setcounter{thm}{2}
\begin{defn}[Local \(\varepsilon\)-closeness]\label{i:9.3.3}
  Let \(X\) be a subset of \(\R\), let \(f : X \to \R\) be a function, let \(L\) be a real number, \(x_0\) be an adherent point of \(X\), and \(\varepsilon > 0\) be a real number.
  We say that \(f\) is \emph{\(\varepsilon\)-close to \(L\) near \(x_0\)} iff there exists a \(\delta > 0\) such that \(f\) becomes \(\varepsilon\)-close to \(L\) when restricted to the set \(\set{x \in X : \abs{x - x_0} < \delta}\).
\end{defn}

\setcounter{thm}{5}
\begin{defn}[Convergence of functions at a point]\label{i:9.3.6}
  Let \(X\) be a subset of \(\R\), let \(f : X \to \R\) be a function, let \(E\) be a subset of \(X\), \(x_0\) be an adherent point of \(E\), and let \(L\) be a real number.
  We say that \emph{\(f\) converges to \(L\) at \(x_0\) in \(E\)}, and write \(\lim_{x \to x_0 ; x \in E} f(x) = L\), iff \(f\), after restricting to \(E\), is \(\varepsilon\)-close to \(L\) near \(x_0\) for every \(\varepsilon > 0\).
  If \(f\) does not converge to any number \(L\) at \(x_0\), we say that \emph{\(f\) diverges at \(x_0\)}, and leave \(\lim_{x \to x_0 ; x \in E} f(x)\) undefined.
\end{defn}

\begin{note}
  In other words, we have \(\lim_{x \to x_0 ; x \in E} f(x) = L\) iff for every \(\varepsilon > 0\), there exists a \(\delta > 0\) such that \(\abs{f(x) - L} \leq \varepsilon\) for all \(x \in E\) such that \(\abs{x - x_0} < \delta\).
\end{note}

\begin{rmk}\label{i:9.3.7}
  In many cases we will omit the set \(E\) from the above notation (i.e., we will just say that \(f\) converges to \(L\) at \(x_0\), or that \(\lim_{x \to x_0} f(x) = L\)), although this is slightly dangerous.
  For instance, it sometimes makes a difference whether \(E\) actually contains \(x_0\) or not.
  To give an example, if \(f : \R \to \R\) is the function defined by setting \(f(x) = 1\) when \(x = 0\) and \(f(x) = 0\) when \(x \neq 0\), then one has \(\lim_{x \to 0 ; x \in \R \setminus \set{0}} f(x) = 0\), but \(\lim_{x \to 0 ; x \in \R} f(x)\) is undefined.
  Some authors only define the limit \(\lim_{x \to x_0 ; x \in E} f(x)\) when \(E\) does not contain \(x_0\) (so that \(x_0\) is now a limit point of \(E\) rather than an adherent point), or would use \(\lim_{x \to x_0 ; x \in E} f(x)\) to denote what we would call \(\lim_{x \to x_0 ; x \in E \setminus \set{x_0}} f(x)\), but we have chosen a slightly more general notation, which allows the possibility that \(E\) contains \(x_0\).
\end{rmk}

\setcounter{thm}{8}
\begin{prop}\label{i:9.3.9}
  Let \(X\) be a subset of \(\R\), let \(f : X \to \R\) be a function, let \(E\) be a subset of \(X\), let \(x_0\) be an adherent point of \(E\), and let \(L\) be a real number.
  Then the following two statements are logically equivalent:
  \begin{enumerate}
    \item \(f\) converges to \(L\) at \(x_0\) in \(E\).
    \item For every sequence \((a_n)_{n = 0}^\infty\) which consists entirely of elements of \(E\) and converges to \(x_0\), the sequence \((f(a_n))_{n = 0}^\infty\) converges to \(L\).
  \end{enumerate}
\end{prop}

\begin{proof}
  We first show that statement (a) implies statement (b).
  Since \(f\) converges to \(L\) at \(x_0\) in \(E\), by \cref{i:9.3.6} we have
  \[
    \forall \varepsilon \in \R^+, \exists \delta \in \R^+ : \big(\forall x \in E, \abs{x - x_0} < \delta \implies \abs{f(x) - L} \leq \varepsilon\big).
  \]
  Now we fix \(\varepsilon\), and we have some \(\delta\) satisfying the statement above, we also fix such \(\delta\).
  Let \((a_n)_{n = 0}^\infty\) be a sequence which consists entirely of elements of \(E\) and \(\lim_{n \to \infty} a_n = x_0\).
  Such sequence exists since \cref{i:9.1.14}.
  By \cref{i:6.1.5} we have
  \[
    \forall \varepsilon' \in \R^+, \exists N \in \N : \forall n \geq N, \abs{a_n - x_0} \leq \varepsilon'.
  \]
  In particular, we have
  \[
    \exists N \in \N : \forall n \geq N, \abs{a_n - x_0} \leq \dfrac{\delta}{2} < \delta.
  \]
  Since \((a_n)_{n = 0}^\infty\) consists entirely of elements of \(E\), we have
  \[
    \abs{a_n - x_0} < \delta \implies \abs{f(a_n) - L} \leq \varepsilon.
  \]
  Since \(\varepsilon\) was arbitrary, we have
  \[
    \forall \varepsilon \in \R^+, \exists N \in \N : \forall n \geq N, \abs{f(a_n) - L} \leq \varepsilon
  \]
  and by \cref{i:6.1.5} we have \(\lim_{n \to \infty} f(a_n) = L\).

  Now we show that statement (b) implies statement (a).
  Suppose for sake of contradiction that \(f\) does not converge to \(L\) at \(x_0\) in \(E\).
  Then by \cref{i:9.3.6} we have
  \[
    \exists \varepsilon \in \R^+ : \forall \delta \in \R^+, \Big(\forall x \in E, (\abs{x - x_0} < \delta) \land \big(\abs{f(x) - L} > \varepsilon\big)\Big).
  \]
  Let \((a_n)_{n = 0}^\infty\) be a sequence which consists entirely of elements of \(E\) and \(\lim_{n \to \infty} a_n = x_0\).
  By hypothesis we have \(\lim_{n \to \infty} f(a_n) = L\).
  By \cref{i:6.1.5} the following two statements are true:
  \begin{align*}
     & \exists N_1 \in \N : \forall n_1 \geq N_1, \abs{a_{n_1} - x_0} \leq \dfrac{\delta}{2} < \delta \\
     & \exists N_2 \in \N : \forall n_2 \geq N_2, \abs{f(a_{n_2}) - L} \leq \varepsilon
  \end{align*}
  Let \(N = \max(N_1, N_2)\).
  Then we have
  \[
    \forall n \geq N, (\abs{a_n - x_0} < \delta) \land \big(\abs{f(a_n) - L} \leq \varepsilon\big).
  \]
  But \(a_n \in E\), so this contradict to \(\abs{f(a_n) - L} > \varepsilon\).
  Thus \(\lim_{x \to x_0 ; x \in E} f(x) = L\).
\end{proof}

\begin{note}
  In view of \cref{i:9.3.9}, we will sometimes write ``\(f(x) \to L\) as \(x \to x_0\) in \(E\)'' or ``\(f\) has a limit \(L\) at \(x_0\) in \(E\)'' instead of ``\(f\) converges to \(L\) at \(x_0\)'', or ``\(\lim_{x \to x_0} f(x) = L\)''.
\end{note}

\begin{rmk}\label{i:9.3.10}
  With the notation of \cref{i:9.3.9}, we have the following corollary:
  if \(\lim_{x \to x_0 ; x \in E} f(x) = L\), and \(\lim_{n \to \infty} a_n = x_0\), then \(\lim_{n \to \infty} f(a_n) = L\).
\end{rmk}

\begin{rmk}\label{i:9.3.11}
  We only consider limits of a function \(f\) at \(x_0\) in the case when \(x_0\) is an adherent point of \(E\).
  When \(x_0\) is not an adherent point then it is not worth it to define the concept of a limit.
\end{rmk}

\begin{rmk}\label{i:9.3.12}
  The variable \(x\) used to denote a limit is a dummy variable;
  we could replace it by any other variable and obtain exactly the same limit.
  For instance, if \(\lim_{x \to x_0 ; x \in E} f(x) = L\), then \(\lim_{y \to x_0 ; y \in E} f(y) = L\), and conversely.
  (Since \(x \in \R\).)
\end{rmk}

\begin{cor}\label{i:9.3.13}
  Let \(X\) be a subset of \(\R\), let \(E\) be a subset of \(X\), let \(x_0\) be an adherent point of \(E\), and let \(f : X \to \R\) be a function.
  Then \(f\) can have at most one limit at \(x_0\) in \(E\).
\end{cor}

\begin{proof}
  Suppose for sake of contradiction that there are two distinct numbers \(L\) and \(L'\) such that \(f\) has a limit \(L\) at \(x_0\) in \(E\), and such that \(f\) also has a limit \(L'\) at \(x_0\) in \(E\).
  Since \(x_0\) is an adherent point of \(E\), we know by \cref{i:9.1.14} that there is a sequence \((a_n)_{n = 0}^\infty\) consisting of elements in \(E\) which converges to \(x_0\).
  Since \(f\) has a limit \(L\) at \(x_0\) in \(E\), we thus see by \cref{i:9.3.9}, that \((f(a_n))_{n = 0}^\infty\) converges to \(L\).
  But since \(f\) also has a limit \(L'\) at \(x_0\) in \(E\), we see that \((f(a_n))_{n = 0}^\infty\) also converges to \(L'\).
  But this contradicts the uniqueness of limits of sequences (\cref{i:6.1.7}).
\end{proof}

\begin{prop}[Limit laws for functions]\label{i:9.3.14}
  Let \(X\) be a subset of \(R\), let \(E\) be a subset of \(X\), let \(x_0\) be an adherent point of \(E\), and let \(f : X \to \R\) and \(g : X \to \R\) be functions.
  Suppose that \(f\) has a limit \(L\) at \(x_0\) in \(E\), and \(g\) has a limit \(M\) at \(x_0\) in \(E\).
  Then \(f + g\) has a limit \(L + M\) at \(x_0\) in \(E\), \(f - g\) has a limit \(L - M\) at \(x_0\) in \(E\), \(\max(f, g\)) has a limit \(\max(L, M)\) at \(x_0\) in \(E\), \(\min(f, g)\) has a limit \(\min(L, M)\) at \(x_0\) in \(E\) and \(fg\) has a limit \(LM\) at \(x_0\) in \(E\).
  If \(c\) is a real number, then \(cf\) has a limit \(cL\) at \(x_0\) in \(E\).
  Finally, if \(g\) is non-zero on \(E\) (i.e., \(g(x) \neq 0\) for all \(x \in E\)) and \(M\) is non-zero, then \(f / g\) has a limit \(L / M\) at \(x_0\) in \(E\).
\end{prop}

\begin{proof}
  Since \(x_0\) is an adherent point of \(E\), we know by \cref{i:9.1.14} that there is a sequence \((a_n)_{n = 0}^\infty\) consisting of elements in \(E\), which converges to \(x_0\).
  Since \(f\) has a limit \(L\) at \(x_0\) in \(E\), we thus see by \cref{i:9.3.9}, that \((f(a_n))_{n = 0}^\infty\) converges to \(L\).
  Similarly \((g(a_n))_{n = 0}^\infty\) converges to \(M\).

  By the limit laws for sequences (\cref{i:6.1.19}) we conclude that
  \begin{align*}
             & (\lim_{n \to \infty} f(a_n) = L) \land (\lim_{n \to \infty} g(a_n) = M) \\
    \implies & \begin{dcases}
                 \lim_{n \to \infty} f(a_n) + g(a_n) = L + M                   \\
                 \lim_{n \to \infty} f(a_n) - g(a_n) = L - M                   \\
                 \lim_{n \to \infty} \max\big(f(a_n), g(a_n)\big) = \max(L, M) \\
                 \lim_{n \to \infty} \min\big(f(a_n), g(a_n)\big) = \min(L, M) \\
                 \lim_{n \to \infty} f(a_n) g(a_n) = LM                        \\
                 \lim_{n \to \infty} cf(a_n) = cL
               \end{dcases}           \\
    \implies & \begin{dcases}
                 \lim_{n \to \infty} (f + g)(a_n) = L + M         \\
                 \lim_{n \to \infty} (f - g)(a_n) = L - M         \\
                 \lim_{n \to \infty} \max(f, g)(a_n) = \max(L, M) \\
                 \lim_{n \to \infty} \min(f, g)(a_n) = \min(L, M) \\
                 \lim_{n \to \infty} (fg)(a_n) = LM               \\
                 \lim_{n \to \infty} (cf)(a_n) = cL
               \end{dcases}                     &  & \by{i:9.2.1}
  \end{align*}
  If \(\forall x \in E, g(x) \neq 0\) and \(M \neq 0\), then by the limit laws for sequences (\cref{i:6.1.19}) and \cref{i:9.2.1} we have
  \[
    \lim_{n \to \infty} \big(f(a_n) / g(a_n)\big) = \lim_{n \to \infty} \big((f / g)(a_n)\big)_{n = 0}^\infty = L / M.
  \]
  By \cref{i:9.3.9} again, this implies
  \[
    \begin{dcases}
      \lim_{x \to x_0 ; x \in E} (f + g)(x) = L + M                                                                 \\
      \lim_{x \to x_0 ; x \in E} (f - g)(x) = L - M                                                                 \\
      \lim_{x \to x_0 ; x \in E} \max(f, g)(x) = \max(L, M)                                                         \\
      \lim_{x \to x_0 ; x \in E} \min(f, g)(x) = \min(L, M)                                                         \\
      \lim_{x \to x_0 ; x \in E} (fg)(x) = LM                                                                       \\
      \lim_{x \to x_0 ; x \in E} (cf)(x) = cL                                                                       \\
      \lim_{x \to x_0 ; x \in E} (f / g)(x) = L / M & \text{if } \forall x \in E, g(x) \neq 0 \text{ and } M \neq 0
    \end{dcases}
  \]
  (since \((a_n)_{n = 0}^\infty\) was an arbitrary sequence in \(E\) converging to \(x_0\)).
\end{proof}

\begin{rmk}\label{i:9.3.15}
  One can phrase \cref{i:9.3.14} more informally as saying that
  \begin{align*}
    \lim_{x \to x_0} (f \pm g)(x)  & = \lim_{x \to x_0} f(x) \pm \lim_{x \to x_0} g(x)              \\
    \lim_{x \to x_0} \max(f, g)(x) & = \max\bigg(\lim_{x \to x_0} f(x), \lim_{x \to x_0} g(x)\bigg) \\
    \lim_{x \to x_0} \min(f, g)(x) & = \min\bigg(\lim_{x \to x_0} f(x), \lim_{x \to x_0} g(x)\bigg) \\
    \lim_{x \to x_0} (fg)(x)       & = \lim_{x \to x_0} f(x) \lim_{x \to x_0} g(x)                  \\
    \lim_{x \to x_0} (f / g)(x)    & = \dfrac{\lim_{x \to x_0} f(x)}{\lim_{x \to x_0} g(x)}
  \end{align*}
  (where we have dropped the restriction \(x \in E\) for brevity)
  but bear in mind that these identities are only true when the right-hand side makes sense, and furthermore for the final identity we need \(g\) to be non-zero, and also \(\lim_{x \to x_0} g(x)\) to be non-zero.
\end{rmk}

\begin{note}
  If \(f\) converges to \(L\) at \(x_0\) in \(X\), and \(Y\) is any subset of \(X\) such that \(x_0\) is still an adherent point of \(Y\), then \(f\) will also converge to \(L\) at \(x_0\) in \(Y\)
  (since \(Y \subseteq X\) and \(x \in \overline{Y}\)).
  Thus convergence on a large set implies convergence on a smaller set.
  The converse, however, is not true.
\end{note}

\begin{eg}\label{i:9.3.16}
  Consider the \emph{signum function} \(\text{sgn} : \R \to \R\), defined by
  \[
    \text{sgn}(x) \coloneqq \begin{dcases}
      1  & \text{if } x > 0 \\
      0  & \text{if } x = 0 \\
      -1 & \text{if } x < 0
    \end{dcases}
  \]
  Then \(\lim_{x \to 0 ; x \in (0, \infty)} \text{sgn}(x) = 1\), whereas \(\lim_{x \to 0 ; x \in (-\infty, 0)} = -1\) and \(\lim_{x \to 0 ; x \in \R} \text{sgn}(x)\) is undefined.
  Thus it is sometimes dangerous to drop the set \(E\) from the notation of limit.
  However, in many cases it is safe to do so.
\end{eg}

\begin{eg}\label{i:9.3.17}
  Let \(f(x)\) be the function
  \[
    f(x) \coloneqq \begin{dcases}
      1 & \text{if } x = 0     \\
      0 & \text{if } x \neq 0.
    \end{dcases}
  \]
  Then \(\lim_{x \to 0 ; x \in \R \setminus \set{0}} f(x) = 0\), but \(\lim_{x \to 0 ; x \in \R} f(x)\) is undefined.
  (When this happens, we say that \(f\) has a ``removable singularity'' or ``removable discontinuity'' at \(0\).
  Because of such singularities, it is sometimes the convention when writing \(\lim_{x \to x_0} f(x)\) to automatically exclude \(x_0\) from the set;
  for instance, in some textbook, \(\lim_{x \to x_0} f(x)\) is used as shorthand for \(\lim_{x \to x_0 ; x \in X \setminus \set{x_0}} f(x)\).)
\end{eg}

\begin{note}
  On the other hand, the limit at \(x_0\) should only depend on the values of the function near \(x_0\);
  the values away from \(x_0\) are not relevant.
\end{note}

\begin{prop}[Limits are local]\label{i:9.3.18}
  Let \(X\) be a subset of \(\R\), let \(E\) be a subset of \(X\), let \(x_0\) be an adherent point of \(E\), let \(f : X \to \R\) be a function, and let \(L\) be a real number.
  Let \(\delta > 0\).
  Then we have
  \[
    \lim_{x \to x_0 ; x \in E} f(x) = L
  \]
  iff
  \[
    \lim_{x \to x_0 ; x \in E \cap (x_0 - \delta, x_0 + \delta)} f(x) = L.
  \]
\end{prop}

\begin{proof}
  We know that \(\lim_{x \to x_0 ; x \in E} f(x) = L \implies \lim_{x \to x_0 ; x \in E \cap (x_0 - \delta, x_0 + \delta)} f(x) = L\) since \(E \cap (x_0 - \delta, x_0 + \delta) \subseteq E\).
  We also know that \(\lim_{x \to x_0 ; x \in E \cap (x_0 - \delta, x_0 + \delta)} f(x) = L \implies \lim_{x \to x_0 ; x \in E} f(x) = L\) since
  \begin{align*}
             & \lim_{x \to x_0 ; x \in E \cap (x_0 - \delta, x_0 + \delta)} f(x) = L                                                                 \\
    \implies & \forall \varepsilon \in \R^+, \exists \delta' \in \R^+ :                                                                              \\
             & \big(\forall x \in E \cap (x_0 - \delta, x_0 + \delta), \abs{x - x_0} < \delta' \implies \abs{f(x) - L} \leq \varepsilon\big)         \\
    \implies & \forall \varepsilon \in \R^+, \exists \delta' \in \R^+ :                                                                              \\
             & \big(\forall x \in E, (x_0 - \delta < x < x_0 + \delta) \land (\abs{x - x_0} < \delta') \implies \abs{f(x) - L} \leq \varepsilon\big) \\
    \implies & \forall \varepsilon \in \R^+, \exists \delta' \in \R^+ :                                                                              \\
             & \big(\forall x \in E, (-\delta < x - x_0 < \delta) \land (\abs{x - x_0} < \delta') \implies \abs{f(x) - L} \leq \varepsilon\big)      \\
    \implies & \forall \varepsilon \in \R^+, \exists \delta' \in \R^+ :                                                                              \\
             & \big(\forall x \in E, (\abs{x - x_0} < \delta) \land (\abs{x - x_0} < \delta') \implies \abs{f(x) - L} \leq \varepsilon\big)          \\
    \implies & \forall \varepsilon \in \R^+, \exists \delta' \in \R^+ :                                                                              \\
             & \big(\forall x \in E, \abs{x - x_0} < \min(\delta, \delta') \implies \abs{f(x) - L} \leq \varepsilon\big)                             \\
    \implies & \lim_{x \to x_0 ; x \in E} f(x) = L.
  \end{align*}
  Thus we conclude that \(\lim_{x \to x_0 ; x \in E} f(x) = \lim_{x \to x_0 ; x \in E \cap (x_0 - \delta, x_0 + \delta)} f(x) = L\).
\end{proof}

\begin{note}
  Informally, \cref{i:9.3.18} asserts that
  \[
    \lim_{x \to x_0 ; x \in E} f(x) = \lim_{x \to x_0 ; x \in E \cap (x_0 - \delta, x_0 + \delta)} f(x).
  \]
  Thus the limit of a function at \(x_0\), if it exists, only depends on the values of \(f\) near \(x_0\);
  the values far away do not actually influence the limit.
\end{note}

\begin{ac}[Limit superior and limi inferior]\label{i:ac:9.3.1}
  Let \(X\) be a subset of \(\R\), let \(f : X \to \R\) be a function, let \(E\) be a subset of \(X\), and let \(x_0\) be an adherent point of \(E\).
  We define \emph{limit superior at \(x_0\) in \(E\)} as
  \[
    \limsup_{x \to x_0 ; x \in E} f(x) = \inf\set{\sup\set{f(x) : x \in E \land \abs{x - x_0} < \delta} : \delta \in \R^+}
  \]
  and define \emph{limit inferior at \(x_0\) in \(E\)} as
  \[
    \liminf_{x \to x_0 ; x \in E} f(x) = \sup\set{\inf\set{f(x) : x \in E \land \abs{x - x_0} < \delta} : \delta \in \R^+}.
  \]
\end{ac}

\begin{ac}\label{i:ac:9.3.2}
  Let \(X\) be a subset of \(\R\), let \(f : X \to \R\) be a function, let \(E\) be a subset of \(X\), and let \(x_0\) be an adherent point of \(E\).
  Let \(L \in \R\).
  We claim that the following statements are equivalent:
  \begin{enumerate}
    \item \(\limsup_{x \to x_0 ; x \in E} f(x) = L\)
    \item For every sequence \((a_n)_{n = 1}^\infty\) which consists entirely of elements of \(E\) and converges to \(x_0\), the sequence \((f(a_n))_{n = 1}^\infty\) has limit superior \(\limsup_{n \to \infty} f(a_n) \leq L\).
          There exists a sequence \((b_n)_{n = 1}^\infty\) which consists entirely of elements of \(E\) and converges to \(x_0\), and \(\limsup_{n \to \infty} f(b_n) = L\).
  \end{enumerate}
  Similarly, the following statements are equivalent:
  \begin{enumerate}
    \item \(\liminf_{x \to x_0 ; x \in E} f(x) = L\).
    \item For every sequence \((a_n)_{n = 1}^\infty\) which consists entirely of elements of \(E\) and converges to \(x_0\), the sequence \((f(a_n))_{n = 1}^\infty\) has limit inferior \(\liminf_{n \to \infty} f(a_n) \geq L\).
          There exists a sequence \((b_n)_{n = 1}^\infty\) which consists entirely of elements of \(E\) and converges to \(x_0\), and \(\liminf_{n \to \infty} f(b_n) = L\).
  \end{enumerate}
\end{ac}

\begin{proof}
  We only prove for limit superior.
  The proof for limit inferior are similar.
  For each \(\delta \in \R^+\), define \(X_{\delta}\) as follow:
  \[
    X_{\delta} = \set{x \in E : \abs{x - x_0} \leq \delta}.
  \]
  We know \(X_{\delta} \neq \emptyset\) for each \(\delta \in \R^+\) since \(\delta \in \R^+\) and \(x_0\) is an adherent point.
  By axiom of choice (\cref{i:8.1}) we know that \(\prod_{n \in \N} X_{\dfrac{1}{n}} \neq \emptyset\).
  If we choose some \(g \in \prod_{n \in \N} X_{\dfrac{1}{n}}\) and define \((b_n)_{n = 0}^\infty\) by setting \(b_n = g(n)\) for each \(n \in \N\), then we have
  \begin{align*}
             & \forall n \in \N, b_n \in X_{\dfrac{1}{n}}                                    \\
    \implies & \forall n \in \N, 0 \leq \abs{b_n - x_0} \leq \dfrac{1}{n}                    \\
    \implies & \lim_{n \to \infty} \abs{b_n - x_0} = 0                    &  & \by{i:6.4.14} \\
    \implies & \lim_{n \to \infty} b_n - x_0 = 0                          &  & \by{i:6.4.17} \\
    \implies & \lim_{n \to \infty} b_n = x_0.                             &  & \by{i:6.1.19}
  \end{align*}
  Let \(S_{\delta} = \set{f(x) : x \in X_{\delta}}\).
  We can rewrite limit superior as follow:
  \[
    \limsup_{x \to x_0 ; x \in E} f(x) = \inf\set{\sup(S_\delta) : \delta \in \R^+}.
  \]
  We will use \(X_{\delta}\) and \(S_{\delta}\) throughout the proof of this corollary.

  We first show that statement (a) implies statement (b).
  Suppose that
  \[
    L = \limsup_{x \to x_0 ; x \in E} f(x) = \inf\set{\sup(S_\delta) : \delta \in \R^+}.
  \]
  Let \((a_n)_{n = 1}^\infty\) be a sequence which consists entirely of elements of \(E\) and \(\lim_{n \to \infty} a_n = x_0\).
  Such sequence exists since \cref{i:9.1.14}.
  Then we have
  \begin{align*}
             & \lim_{n \to \infty} a_n = x_0                                                                                        \\
    \implies & \forall \delta \in \R^+, \exists N \in \Z^+ :                                                                        \\
             & \forall n \geq N, \abs{a_n - x_0} \leq \delta                                                                        \\
    \implies & \forall \delta \in \R^+, \exists N \in \Z^+ :                                                                        \\
             & \forall n \geq N, \big(f(a_n) \in S_{\delta}\big) \land \big(f(a_n) \leq \sup(S_{\delta})\big) &  & \by{i:5.5.5}     \\
    \implies & \forall \delta \in \R^+, \exists N \in \Z^+ :                                                                        \\
             & \sup\big(f(a_n)\big)_{n = N}^\infty \leq \sup(S_{\delta})                                      &  & \by{i:5.5.5}     \\
    \implies & \forall \delta \in \R^+, \limsup_{n \to \infty} f(a_n) \leq \sup(S_{\delta})                   &  & \by{i:6.4.12}[c] \\
    \implies & \limsup_{n \to \infty} f(a_n) \leq \inf\set{\sup(S_{\delta}) : \delta \in \R^+} = L.           &  & \by{i:5.5.15}
  \end{align*}
  For each \(n \in \Z^+\), define \(Y_n\) as follow:
  \[
    Y_n = \set{x \in X_{\dfrac{1}{n}} : L - \dfrac{1}{n} < f(x) \leq L}.
  \]
  We must have \(Y_n \neq \emptyset\) for each \(n \in \N\), otherwise
  \begin{align*}
             & Y_n = \emptyset                                                                                     \\
    \implies & \forall x \in X_{\dfrac{1}{n}}, f(x) \leq L - \dfrac{1}{n}                                          \\
    \implies & \sup(S_{\dfrac{1}{n}}) \leq L - \dfrac{1}{n}                                                        \\
    \implies & L = \inf\set{\sup(S_{\delta}) : \delta \in \R^+} \leq \sup(S_{\dfrac{1}{n}}) \leq L - \dfrac{1}{n},
  \end{align*}
  a contradiction.
  By axiom of choice (\cref{i:8.1}) we know that \(\prod_{n \in \Z^+} Y_n \neq \emptyset\).
  Let \(g \in \prod_{n \in \Z^+} Y_n\) and define \((b_n)_{n = 1}^\infty\) by setting \(b_n = g(n)\) for each \(n \in \Z^+\).
  Then we have \(\lim_{n \to \infty} b_n = x_0\) and \(L - \dfrac{1}{n} < f(b_n) \leq L\) for each \(n \in \Z^+\).
  By squeeze test (\cref{i:6.4.14}) we have \(\lim_{n \to \infty} f(b_n) = L\).
  By \cref{i:6.4.12}(f) we have \(\limsup_{n \to \infty} f(b_n) = \lim_{n \to \infty} f(b_n) = L\).

  Now we show that statement (b) implies statement (a).
  Suppose that for every sequence \((a_n)_{n = 1}^\infty\) in \(E\), \(\lim_{n \to \infty} a_n = x_0 \implies \limsup_{n \to \infty} f(a_n) \leq L\).
  Suppose also that there exists a sequence \((b_n)_{n = 1}^\infty\) in \(E\) such that \(\lim_{n \to \infty} b_n = x_0 \implies \limsup_{n \to \infty} f(b_n) = L\).
  Observe that
  \begin{align*}
             & \lim_{n \to \infty} b_n = x_0                                                                                        \\
    \implies & \forall \delta \in \R^+, \exists N \in \Z^+ :                                                                        \\
             & \forall n \geq N, \abs{b_n - x_0} \leq \delta                                                                        \\
    \implies & \forall \delta \in \R^+, \exists N \in \Z^+ :                                                                        \\
             & \forall n \geq N, \big(f(b_n) \in S_{\delta}\big) \land \big(f(b_n) \leq \sup(S_{\delta})\big) &  & \by{i:5.5.5}     \\
    \implies & \forall \delta \in \R^+, \exists N \in \Z^+ :                                                                        \\
             & \sup\big(f(b_n)\big)_{n = N}^\infty \leq \sup(S_{\delta})                                      &  & \by{i:5.5.5}     \\
    \implies & \forall \delta \in \R^+, L = \limsup_{n \to \infty} f(b_n) \leq \sup(S_{\delta})               &  & \by{i:6.4.12}[c] \\
    \implies & L \leq \inf\set{\sup(S_{\delta}) : \delta \in \R^+}.                                           &  & \by{i:5.5.15}
  \end{align*}
  Suppose for sake of contradiction that \(L < \inf\set{\sup(S_\delta) : \delta \in \R^+}\).
  Then we know that
  \[
    \inf\set{\sup(S_\delta) : \delta \in \R^+} = L + \varepsilon
  \]
  for some \(\varepsilon \in \R^+\).
  Since statement (a) implies statement (b), we know that there exist a sequence \((c_n)_{n = 1}^\infty\) in \(E\) such that \(\lim_{n \to \infty} c_n = x_0\) and \(\lim_{n \to \infty} f(c_n) = L + \varepsilon\).
  But this contradict to the hypothesis that \(\lim_{n \to \infty} f(c_n) \leq L\).
  Thus we must have \(L = \inf\set{\sup(S_{\delta}) : \delta \in \R^+}\).
\end{proof}

\exercisesection

\begin{ex}\label{i:ex:9.3.1}
  Prove \cref{i:9.3.9}.
\end{ex}

\begin{proof}
  See \cref{i:9.3.9}.
\end{proof}

\begin{ex}\label{i:ex:9.3.2}
  Prove the remaining claims in \cref{i:9.3.14}.
\end{ex}

\begin{proof}
  See \cref{i:9.3.14}.
\end{proof}

\begin{ex}\label{i:ex:9.3.3}
  Prove \cref{i:9.3.18}.
\end{ex}

\begin{proof}
  See \cref{i:9.3.18}.
\end{proof}

\begin{ex}\label{i:ex:9.3.4}
  Propose a definition for limit superior \(\limsup_{x \to x_0 ; x \in E} f(x)\) and limit inferior \(\liminf_{x \to x_0 ; x \in E} f(x)\), and then propose an analogue of \cref{i:9.3.9} for your definition.
  (For an additional challenge: prove that analogue.)
\end{ex}

\begin{proof}
  See Addtional \cref{i:ac:9.3.1} and Addtional \cref{i:ac:9.3.2}.
\end{proof}

\begin{ex}[Continuous version of squeeze test]\label{i:ex:9.3.5}
  Let \(X\) be a subset of \(\R\), let \(E\) be a subset of \(X\), let \(x_0\) be an adherent point of \(E\), and let \(f : X \to \R\), \(g : X \to \R\), \(h : X \to \R\) be functions such that \(f(x) \leq g(x) \leq h(x)\) for all \(x \in E\).
  If we have \(\lim_{x \to x_0 ; x \in E} f(x) = \lim_{x \to x_0 ; x \in E} h(x) = L\) for some real number \(L\), show that \(\lim_{x \to x_0 ; x \in E} g(x) = L\).
\end{ex}

\begin{proof}
  Since \(\lim_{x \to x_0 ; x \in E} f(x) = L\), by \cref{i:9.3.6} we have
  \[
    \forall \varepsilon \in \R^+, \exists \delta_1 \in \R^+ : \big(\forall x \in E, \abs{x - x_0} < \delta_1 \implies \abs{f(x) - L} \leq \varepsilon\big).
  \]
  Similarly we have
  \[
    \forall \varepsilon \in \R^+, \exists \delta_2 \in \R^+ : \big(\forall x \in E, \abs{x - x_0} < \delta_2 \implies \abs{h(x) - L} \leq \varepsilon\big).
  \]
  Let \(\delta = \min(\delta_1, \delta_2)\).
  Then we have
  \begin{align*}
     & \forall \varepsilon \in \R^+, \exists \delta \in \R^+ :                                                                                     \\
     & \forall x \in E, \abs{x - x_0} < \delta \implies \big(\abs{f(x) - L} \leq \varepsilon\big) \land \big(\abs{h(x) - L} \leq \varepsilon\big).
  \end{align*}
  Since \(f(x) \leq g(x) \leq h(x)\), we have
  \begin{align*}
             & \big(x \in E\big) \land \big(\abs{x - x_0} < \delta\big)                                                                     \\
    \implies & \big(f(x) \leq g(x) \leq h(x)\big) \land \big(\abs{f(x) - L} < \varepsilon\big) \land \big(\abs{h(x) - L} < \varepsilon\big) \\
    \implies & -\varepsilon \leq f(x) - L \leq g(x) - L \leq h(x) - L \leq \varepsilon                                                      \\
    \implies & \abs{g(x) - L} \leq \varepsilon.
  \end{align*}
  But this means
  \[
    \forall \varepsilon \in \R^+, \exists \delta \in \R^+ : \big(\forall x \in E, \abs{x - x_0} < \delta \implies \abs{g(x) - L} \leq \varepsilon\big)
  \]
  and thus by \cref{i:9.3.6} \(\lim_{x \to x_0 ; x \in E} g(x) = L\).
\end{proof}
